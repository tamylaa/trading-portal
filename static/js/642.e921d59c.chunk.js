"use strict";(self.webpackChunktrading_portal=self.webpackChunktrading_portal||[]).push([[642],{7642:(e,t,n)=>{n.d(t,{UI:()=>pt});var a=n(9379),s=n(3986);const i=["type","variant","size","label","helperText","errorText","icon","iconPosition","clearable","loading","className","wrapperClassName"],o=["fields","className"],r=["preset","autoInitialize","enableAchievements","enableProgress","enableNotifications","enableXP","enableLeveling","container"],l=["type","title","size","data","widgets","layout","columns","gap","container"],c={colors:{primary:{50:"var(--tmyl-primary-50)",100:"var(--tmyl-primary-100)",200:"var(--tmyl-primary-200)",300:"var(--tmyl-primary-300)",400:"var(--tmyl-primary-400)",500:"var(--tmyl-primary-500)",600:"var(--tmyl-primary-600)",700:"var(--tmyl-primary-700)",800:"var(--tmyl-primary-800)",900:"var(--tmyl-primary-900)",contrast:"var(--tmyl-primary-contrast)"},neutral:{50:"var(--tmyl-neutral-50)",100:"var(--tmyl-neutral-100)",200:"var(--tmyl-neutral-200)",300:"var(--tmyl-neutral-300)",400:"var(--tmyl-neutral-400)",500:"var(--tmyl-neutral-500)",600:"var(--tmyl-neutral-600)",700:"var(--tmyl-neutral-700)",800:"var(--tmyl-neutral-800)",900:"var(--tmyl-neutral-900)"},semantic:{success:"var(--tmyl-success-600)",warning:"var(--tmyl-warning-600)",error:"var(--tmyl-error-600)",info:"var(--tmyl-info-600)"},surface:{primary:"var(--tmyl-surface-primary)",secondary:"var(--tmyl-surface-secondary)",tertiary:"var(--tmyl-surface-tertiary)"},text:{primary:"var(--tmyl-text-primary)",secondary:"var(--tmyl-text-secondary)",tertiary:"var(--tmyl-text-tertiary)",inverse:"var(--tmyl-text-inverse)"},border:{primary:"var(--tmyl-border-primary)",secondary:"var(--tmyl-border-secondary)",focus:"var(--tmyl-border-focus)"}},spacing:{px:"var(--tmyl-space-px)",0:"var(--tmyl-space-0)",.5:"var(--tmyl-space-0_5)",1:"var(--tmyl-space-1)",1.5:"var(--tmyl-space-1_5)",2:"var(--tmyl-space-2)",2.5:"var(--tmyl-space-2_5)",3:"var(--tmyl-space-3)",3.5:"var(--tmyl-space-3_5)",4:"var(--tmyl-space-4)",5:"var(--tmyl-space-5)",6:"var(--tmyl-space-6)",7:"var(--tmyl-space-7)",8:"var(--tmyl-space-8)",9:"var(--tmyl-space-9)",10:"var(--tmyl-space-10)",11:"var(--tmyl-space-11)",12:"var(--tmyl-space-12)",14:"var(--tmyl-space-14)",16:"var(--tmyl-space-16)",20:"var(--tmyl-space-20)",24:"var(--tmyl-space-24)",28:"var(--tmyl-space-28)",32:"var(--tmyl-space-32)"},sizes:{xs:{height:"1.5rem",padding:"0.25rem 0.5rem",fontSize:"var(--tmyl-text-xs)",iconSize:"0.75rem"},sm:{height:"2rem",padding:"0.375rem 0.75rem",fontSize:"var(--tmyl-text-sm)",iconSize:"1rem"},md:{height:"2.5rem",padding:"0.5rem 1rem",fontSize:"var(--tmyl-text-base)",iconSize:"1.25rem"},lg:{height:"3rem",padding:"0.75rem 1.5rem",fontSize:"var(--tmyl-text-lg)",iconSize:"1.5rem"},xl:{height:"3.5rem",padding:"1rem 2rem",fontSize:"var(--tmyl-text-xl)",iconSize:"1.75rem"}},typography:{fontFamily:{sans:"var(--tmyl-font-sans)",mono:"var(--tmyl-font-mono)"},fontSize:{xs:"var(--tmyl-text-xs)",sm:"var(--tmyl-text-sm)",base:"var(--tmyl-text-base)",lg:"var(--tmyl-text-lg)",xl:"var(--tmyl-text-xl)","2xl":"var(--tmyl-text-2xl)","3xl":"var(--tmyl-text-3xl)","4xl":"var(--tmyl-text-4xl)"},fontWeight:{normal:"var(--tmyl-font-normal)",medium:"var(--tmyl-font-medium)",semibold:"var(--tmyl-font-semibold)",bold:"var(--tmyl-font-bold)"},lineHeight:{tight:"var(--tmyl-leading-tight)",normal:"var(--tmyl-leading-normal)",relaxed:"var(--tmyl-leading-relaxed)"}},borderRadius:{none:"0",sm:"var(--tmyl-radius-sm)",md:"var(--tmyl-radius-md)",lg:"var(--tmyl-radius-lg)",xl:"var(--tmyl-radius-xl)",full:"9999px"},shadows:{none:"none",xs:"var(--tmyl-shadow-xs)",sm:"var(--tmyl-shadow-sm)",md:"var(--tmyl-shadow-md)",lg:"var(--tmyl-shadow-lg)",xl:"var(--tmyl-shadow-xl)",inner:"var(--tmyl-shadow-inner)"},animations:{transition:{fast:"var(--tmyl-transition-fast)",normal:"var(--tmyl-transition-normal)",slow:"var(--tmyl-transition-slow)"},easing:{ease:"ease",easeIn:"cubic-bezier(0.4, 0, 1, 1)",easeOut:"cubic-bezier(0, 0, 0.2, 1)",easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)"}},zIndex:{hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800}},d={primary:{backgroundColor:c.colors.primary[600],color:c.colors.primary.contrast,borderColor:c.colors.primary[600]},secondary:{backgroundColor:c.colors.neutral[100],color:c.colors.text.primary,borderColor:c.colors.border.primary},success:{backgroundColor:c.colors.semantic.success,color:c.colors.text.inverse,borderColor:c.colors.semantic.success},warning:{backgroundColor:c.colors.semantic.warning,color:c.colors.text.inverse,borderColor:c.colors.semantic.warning},error:{backgroundColor:c.colors.semantic.error,color:c.colors.text.inverse,borderColor:c.colors.semantic.error},ghost:{backgroundColor:"transparent",color:c.colors.text.primary,borderColor:"transparent"},outline:{backgroundColor:"transparent",color:c.colors.text.primary,borderColor:c.colors.border.primary}},h={hover:{transform:"translateY(-1px)",transition:c.animations.transition.fast},focus:{outline:"none",borderColor:c.colors.border.focus,boxShadow:"0 0 0 3px ".concat(c.colors.primary[100])},active:{transform:"translateY(0)",transition:"none"},disabled:{opacity:"0.5",cursor:"not-allowed",pointerEvents:"none"},loading:{cursor:"wait",position:"relative"}};const u={generateCSSVariables(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"--tmyl";const n=[];return function e(a){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object.entries(a).forEach(a=>{let[i,o]=a;if("object"!==typeof o||null===o||Array.isArray(o)){const e="".concat(t,"-").concat([...s,i].join("-"));n.push("  ".concat(e,": ").concat(o,";"))}else e(o,[...s,i])})}(e),n.join("\n")},generateVariantCSS(e,t){const n=[];return Object.entries(t).forEach(t=>{let[a,s]=t;n.push(".".concat(e,"--").concat(a," {")),Object.entries(s).forEach(e=>{let[t,a]=e;const s=t.replace(/([A-Z])/g,"-$1").toLowerCase();n.push("  ".concat(s,": ").concat(a,";"))}),n.push("}")}),n.join("\n")},generateSizeCSS(e,t){const n=[];return Object.entries(t).forEach(t=>{let[a,s]=t;n.push(".".concat(e,"--").concat(a," {")),n.push("  height: ".concat(s.height,";")),n.push("  padding: ".concat(s.padding,";")),n.push("  font-size: ".concat(s.fontSize,";")),n.push("}"),n.push(".".concat(e,"--").concat(a," .").concat(e,"__icon {")),n.push("  width: ".concat(s.iconSize,";")),n.push("  height: ".concat(s.iconSize,";")),n.push("}")}),n.join("\n")},generateStateCSS(e,t){const n=[];return Object.entries(t).forEach(t=>{let[a,s]=t;const i="hover"===a?":hover":"focus"===a?":focus":"active"===a?":active":".".concat(e,"--").concat(a);n.push(".".concat(e).concat(i," {")),Object.entries(s).forEach(e=>{let[t,a]=e;const s=t.replace(/([A-Z])/g,"-$1").toLowerCase();n.push("  ".concat(s,": ").concat(a,";"))}),n.push("}")}),n.join("\n")}},m={createElement(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=document.createElement(e);return t.className&&(n.className=t.className),t.attributes&&Object.entries(t.attributes).forEach(e=>{let[t,a]=e;null!==a&&void 0!==a&&n.setAttribute(t,a)}),t.content&&("string"===typeof t.content?n.textContent=t.content:n.appendChild(t.content)),t.innerHTML&&(n.innerHTML=t.innerHTML),n},applyClasses(e,t){Object.entries(t).forEach(t=>{let[n,a]=t;a?e.classList.add(n):e.classList.remove(n)})},setAttributes(e,t){Object.entries(t).forEach(t=>{let[n,a]=t;null===a||void 0===a?e.removeAttribute(n):"boolean"===typeof a?a?e.setAttribute(n,""):e.removeAttribute(n):e.setAttribute(n,a)})},createIcon(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=document.createElement("span");n.className="tmyl-icon ".concat(t.className||""),n.innerHTML=e;const a=n.querySelector("svg");return a&&(a.setAttribute("aria-hidden","true"),a.setAttribute("focusable","false"),t.size&&(a.style.width=t.size,a.style.height=t.size)),n}},p={debounce(e,t){let n,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];const r=a&&!n;clearTimeout(n),n=setTimeout(()=>{n=null,a||e(...i)},t),r&&e(...i)}},throttle(e,t){let n;return function(){if(!n){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];e.apply(this,s),n=!0,setTimeout(()=>n=!1,t)}}},addListener(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return e.addEventListener(t,n,a),()=>{e.removeEventListener(t,n,a)}},createEmitter:e=>({emit(t){const n=new CustomEvent(t,{detail:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},bubbles:!0,cancelable:!0});return e.dispatchEvent(n),n},on:(t,n)=>p.addListener(e,t,n)})},v={validateProps(e,t){const n=[];return Object.entries(t).forEach(t=>{let[a,s]=t;const i=e[a];!s.required||void 0!==i&&null!==i||n.push("".concat(a," is required")),void 0!==i&&s.type&&typeof i!==s.type&&n.push("".concat(a," must be of type ").concat(s.type)),void 0!==i&&s.enum&&!s.enum.includes(i)&&n.push("".concat(a," must be one of: ").concat(s.enum.join(", "))),void 0!==i&&s.pattern&&!s.pattern.test(i)&&n.push("".concat(a," does not match required pattern"))}),n},sanitizeHTML(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}},g={createSpinner(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1rem";const t=document.createElement("span");if(t.className="tmyl-spinner",t.style.cssText="\n      display: inline-block;\n      width: ".concat(e,";\n      height: ").concat(e,";\n      border: 2px solid currentColor;\n      border-radius: 50%;\n      border-top-color: transparent;\n      animation: tmyl-spin 1s linear infinite;\n    "),!document.querySelector("#tmyl-spinner-styles")){const e=document.createElement("style");e.id="tmyl-spinner-styles",e.textContent="\n        @keyframes tmyl-spin {\n          to { transform: rotate(360deg); }\n        }\n      ",document.head.appendChild(e)}return t},animateIn(e){const t={fadeIn:[{opacity:0},{opacity:1}],slideIn:[{transform:"translateY(10px)",opacity:0},{transform:"translateY(0)",opacity:1}],scaleIn:[{transform:"scale(0.95)",opacity:0},{transform:"scale(1)",opacity:1}]},n=t[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fadeIn"]||t.fadeIn;return e.animate(n,{duration:200,easing:"cubic-bezier(0, 0, 0.2, 1)",fill:"forwards"})}},y={generateId(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"tmyl","-").concat(Math.random().toString(36).substr(2,9))},setupFormField(e,t,n,a){const s=e.id||y.generateId("input");e.id=s,t&&t.setAttribute("for",s);const i=[];if(a){const e=a.id||y.generateId("helper");a.id=e,i.push(e)}if(n){const t=n.id||y.generateId("error");n.id=t,i.push(t),e.setAttribute("aria-invalid","true")}else e.removeAttribute("aria-invalid");i.length>0?e.setAttribute("aria-describedby",i.join(" ")):e.removeAttribute("aria-describedby")},setupKeyboardNav(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{onEnter:n=()=>{},onEscape:a=()=>{},onArrowUp:s=()=>{},onArrowDown:i=()=>{}}=t;return p.addListener(e,"keydown",e=>{switch(e.key){case"Enter":e.preventDefault(),n(e);break;case"Escape":a(e);break;case"ArrowUp":e.preventDefault(),s(e);break;case"ArrowDown":e.preventDefault(),i(e)}})}},f={css:u,dom:m,events:p,validation:v,animation:g,a11y:y,tokens:c,variants:d,states:h};const b={search:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"></path>\n  </svg>',user:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path>\n  </svg>',email:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path>\n    <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path>\n  </svg>',phone:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"></path>\n  </svg>',location:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"></path>\n  </svg>',lock:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"></path>\n  </svg>',lockOpen:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path d="M10 2a5 5 0 00-5 5v2a2 2 0 00-2 2v5a2 2 0 002 2h10a2 2 0 002-2v-5a2 2 0 00-2-2H7V7a3 3 0 015.905-.75 1 1 0 001.937-.5A5.002 5.002 0 0010 2z"></path>\n  </svg>',key:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M18 8a6 6 0 01-7.743 5.743L10 14l-1 1-1 1H6v2H2v-4l4.257-4.257A6 6 0 1118 8zm-6-4a1 1 0 100 2 2 2 0 012 2 1 1 0 102 0 4 4 0 00-4-4z" clip-rule="evenodd"></path>\n  </svg>',creditCard:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path d="M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z"></path>\n    <path fill-rule="evenodd" d="M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z" clip-rule="evenodd"></path>\n  </svg>',currency:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path d="M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"></path>\n    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z" clip-rule="evenodd"></path>\n  </svg>',calendar:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path>\n  </svg>',clock:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>\n  </svg>',check:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>\n  </svg>',x:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>\n  </svg>',exclamation:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>\n  </svg>',info:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>\n  </svg>',upload:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path d="M5.5 13a3.5 3.5 0 01-.369-6.98 4 4 0 117.753-1.977A4.5 4.5 0 1113.5 13H11V9.413l1.293 1.293a1 1 0 001.414-1.414l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13H5.5z"></path>\n    <path d="M9 13h2v5a1 1 0 11-2 0v-5z"></path>\n  </svg>',download:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"></path>\n    <path d="M6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z"></path>\n  </svg>',attachment:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M8 4a3 3 0 00-3 3v4a5 5 0 0010 0V7a1 1 0 112 0v4a7 7 0 11-14 0V7a5 5 0 0110 0v4a3 3 0 11-6 0V7a1 1 0 012 0v4a1 1 0 102 0V7a3 3 0 00-3-3z" clip-rule="evenodd"></path>\n  </svg>',chat:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path d="M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z"></path>\n    <path d="M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z"></path>\n  </svg>',chevronDown:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path>\n  </svg>',chevronUp:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z" clip-rule="evenodd"></path>\n  </svg>',eye:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"></path>\n    <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"></path>\n  </svg>',eyeOff:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z" clip-rule="evenodd"></path>\n    <path d="M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"></path>\n  </svg>'};function w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t="",name:n="",accept:a="",multiple:s=!1,disabled:i=!1,required:o=!1,placeholder:r="Choose file...",buttonText:l="Browse",className:c=""}=e,d=t||"file-input-".concat(Math.random().toString(36).substr(2,9)),h=['type="file"','id="'.concat(d,'"'),n&&'name="'.concat(n,'"'),a&&'accept="'.concat(a,'"'),s&&"multiple",i&&"disabled",o&&"required"].filter(Boolean).join(" ");return'\n    <div class="tmyl-file-input '.concat(c,'">\n      <input ').concat(h,'>\n      <label for="').concat(d,'" class="tmyl-file-input__content">\n        <span class="tmyl-file-input__text">').concat(r,'</span>\n        <span class="tmyl-file-input__button">').concat(l,"</span>\n      </label>\n    </div>\n  ").trim()}function S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{type:t="text",variant:n="primary",size:o="md",label:r="",helperText:l="",errorText:c="",icon:d="",iconPosition:h="left",clearable:u=!1,loading:m=!1,className:p="",wrapperClassName:v=""}=e,g=(0,s.A)(e,i);let y;if("textarea"===t)y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{value:t="",placeholder:n="",id:a="",name:s="",disabled:i=!1,readonly:o=!1,required:r=!1,rows:l=4,cols:c,minlength:d,maxlength:h,wrap:u="soft",resize:m="vertical",autoResize:p=!1,className:v=""}=e,g=[n&&'placeholder="'.concat(n,'"'),a&&'id="'.concat(a,'"'),s&&'name="'.concat(s,'"'),i&&"disabled",o&&"readonly",r&&"required",l&&'rows="'.concat(l,'"'),c&&'cols="'.concat(c,'"'),d&&'minlength="'.concat(d,'"'),h&&'maxlength="'.concat(h,'"'),u&&'wrap="'.concat(u,'"'),'class="tmyl-input__field '.concat(v,'"'),'style="resize: '.concat(m,'"')].filter(Boolean).join(" ");return"<textarea ".concat(g,">").concat(t,"</textarea>")}(g);else if("select"===t)y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t=[],value:n="",placeholder:a="Select an option...",id:s="",name:i="",disabled:o=!1,required:r=!1,multiple:l=!1,size:c,className:d=""}=e,h=[s&&'id="'.concat(s,'"'),i&&'name="'.concat(i,'"'),o&&"disabled",r&&"required",l&&"multiple",c&&'size="'.concat(c,'"'),'class="tmyl-input__field '.concat(d,'"')].filter(Boolean).join(" "),u=[a&&!l&&'<option value="" disabled '.concat(n?"":"selected",">").concat(a,"</option>"),...t.map(e=>{if("string"===typeof e){const t=n===e?"selected":"";return'<option value="'.concat(e,'" ').concat(t,">").concat(e,"</option>")}{const t=n===e.value?"selected":"",a=e.disabled?"disabled":"";return'<option value="'.concat(e.value,'" ').concat(t," ").concat(a,">").concat(e.label,"</option>")}})].filter(Boolean).join("\n    ");return"<select ".concat(h,">\n    ").concat(u,"\n  </select>")}(g);else{if("file"===t)return w((0,a.A)((0,a.A)({},g),{},{className:p}));y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{type:t="text",value:n="",placeholder:a="",id:s="",name:i="",disabled:o=!1,readonly:r=!1,required:l=!1,autocomplete:c="",pattern:d="",minlength:h,maxlength:u,min:m,max:p,step:v,className:g=""}=e,y=['type="'.concat(t,'"'),n&&'value="'.concat(n,'"'),a&&'placeholder="'.concat(a,'"'),s&&'id="'.concat(s,'"'),i&&'name="'.concat(i,'"'),o&&"disabled",r&&"readonly",l&&"required",c&&'autocomplete="'.concat(c,'"'),d&&'pattern="'.concat(d,'"'),h&&'minlength="'.concat(h,'"'),u&&'maxlength="'.concat(u,'"'),m&&'min="'.concat(m,'"'),p&&'max="'.concat(p,'"'),v&&'step="'.concat(v,'"'),'class="tmyl-input__field '.concat(g,'"')].filter(Boolean).join(" ");return"<input ".concat(y,">")}((0,a.A)({type:t},g))}return y=d||u||m?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{inputHTML:t="",icon:n="",iconPosition:a="left",clearable:s=!1,loading:i=!1,className:o=""}=e,r=n?'\n    <span class="tmyl-input__icon tmyl-input__icon--'.concat(a,'">\n      ').concat(b[n]||n,"\n    </span>\n  "):"",l=s?'\n    <button type="button" class="tmyl-input__clear" aria-label="Clear input">\n      '.concat(b.x,"\n    </button>\n  "):"",c=i?'\n    <span class="tmyl-input__loading">\n      <span class="tmyl-spinner"></span>\n    </span>\n  ':"",d=[n&&"left"===a&&"tmyl-input--with-icon-left",n&&"right"===a&&"tmyl-input--with-icon-right",s&&"tmyl-input--clearable",i&&"tmyl-input--loading"].filter(Boolean).join(" ");return'\n    <div class="tmyl-input '.concat(d," ").concat(o,'">\n      ').concat(r,"\n      ").concat(t,"\n      ").concat(l,"\n      ").concat(c,"\n    </div>\n  ").trim()}({inputHTML:y,icon:d,iconPosition:h,clearable:u,loading:m,className:"tmyl-input--".concat(n," tmyl-input--").concat(o," ").concat(p)}):'<div class="tmyl-input tmyl-input--'.concat(n," tmyl-input--").concat(o," ").concat(p,'">').concat(y,"</div>"),(r||l||c)&&(y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{inputHTML:t="",label:n="",helperText:a="",errorText:s="",required:i=!1,id:o="",className:r=""}=e,l=n?'\n    <label class="tmyl-input__label '.concat(i?"tmyl-input__label--required":"",'" ').concat(o?'for="'.concat(o,'"'):"",">\n      ").concat(n,"\n    </label>\n  "):"",c=a?'\n    <div class="tmyl-input__helper" '.concat(o?'id="'.concat(o,'-helper"'):"",">\n      ").concat(a,"\n    </div>\n  "):"",d=s?'\n    <div class="tmyl-input__error" '.concat(o?'id="'.concat(o,'-error"'):"",">\n      ").concat(b.exclamation,"\n      <span>").concat(s,"</span>\n    </div>\n  "):"";return'\n    <div class="tmyl-input-group '.concat(r,'">\n      ').concat(l,"\n      ").concat(t,"\n      ").concat(s?d:c,"\n    </div>\n  ").trim()}({inputHTML:y,label:r,helperText:l,errorText:c,required:g.required,id:g.id,className:v})),y}const C={email:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return S((0,a.A)({type:"email",label:"Email",placeholder:"Enter your email",icon:"email",autocomplete:"email",required:!0},e))},password:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return S((0,a.A)({type:"password",label:"Password",placeholder:"Enter your password",icon:"lock",autocomplete:"current-password",required:!0},e))},name:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return S((0,a.A)({type:"text",label:"Name",placeholder:"Enter your name",icon:"user",autocomplete:"name",required:!0},e))},phone:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return S((0,a.A)({type:"tel",label:"Phone",placeholder:"Enter your phone number",icon:"phone",autocomplete:"tel"},e))},search:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return S((0,a.A)({type:"search",placeholder:"Search...",icon:"search",clearable:!0},e))},currency:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return S((0,a.A)({type:"number",label:"Amount",placeholder:"0.00",icon:"currency",step:"0.01",min:"0"},e))},date:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return S((0,a.A)({type:"date",label:"Date",icon:"calendar"},e))},fileUpload:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return w((0,a.A)({placeholder:"Choose file to upload...",buttonText:"Browse"},e))},message:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return S((0,a.A)({type:"textarea",label:"Message",placeholder:"Enter your message...",rows:4},e))}};class _{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.element=e,this.options=(0,a.A)({validateOnBlur:!0,validateOnInput:!1,clearable:!1,autoComplete:!0,debounceDelay:300,maxLength:null,minLength:null,pattern:null,required:!1},t),this.validators=[],this.listeners=[],this.debounceTimer=null,this.value=e.value||"",this.init()}init(){this.setupEventListeners(),this.setupValidation(),this.setupClearButton(),this.setupAutoResize(),this.emitReady()}setupEventListeners(){this.addListener("input",e=>{this.value=e.target.value,this.handleInput(e),this.options.validateOnInput&&this.debounceValidation(),this.updateClearButton(),this.handleAutoResize()}),this.addListener("blur",e=>{this.options.validateOnBlur&&this.validate(),this.emit("blur",{value:this.value})}),this.addListener("focus",e=>{this.emit("focus",{value:this.value})}),this.addListener("keydown",e=>{this.handleKeydown(e)}),this.addListener("paste",e=>{setTimeout(()=>{this.value=e.target.value,this.handleInput(e),this.validate()},0)})}setupValidation(){this.options.required&&this.addValidator(e=>e&&""!==e.trim()?null:"This field is required"),this.options.minLength&&this.addValidator(e=>e&&e.length<this.options.minLength?"Minimum length is ".concat(this.options.minLength," characters"):null),this.options.maxLength&&this.addValidator(e=>e&&e.length>this.options.maxLength?"Maximum length is ".concat(this.options.maxLength," characters"):null),this.options.pattern&&this.addValidator(e=>e&&!this.options.pattern.test(e)?"Please enter a valid format":null),"email"===this.element.type&&this.addValidator(e=>e&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?"Please enter a valid email address":null),"url"===this.element.type&&this.addValidator(e=>{if(e)try{new URL(e)}catch(t){return"Please enter a valid URL"}return null})}setupClearButton(){if(!this.options.clearable)return;const e=this.element.closest(".tmyl-input");if(!e)return;let t=e.querySelector(".tmyl-input__clear");t||(t=document.createElement("button"),t.type="button",t.className="tmyl-input__clear",t.innerHTML=b.x,t.setAttribute("aria-label","Clear input"),e.appendChild(t)),t.addEventListener("click",()=>{this.clear()}),this.clearButton=t,this.updateClearButton()}setupAutoResize(){"TEXTAREA"===this.element.tagName&&this.element.closest(".tmyl-textarea--auto-resize")&&this.handleAutoResize()}handleInput(e){this.emit("input",{value:this.value,event:e})}handleKeydown(e){"Enter"===e.key&&("TEXTAREA"!==this.element.tagName||e.ctrlKey||e.metaKey)&&this.emit("enter",{value:this.value,event:e}),"Escape"===e.key&&(this.element.blur(),this.emit("escape",{value:this.value,event:e})),this.emit("keydown",{key:e.key,value:this.value,event:e})}handleAutoResize(){"TEXTAREA"===this.element.tagName&&(this.element.style.height="auto",this.element.style.height=this.element.scrollHeight+"px")}updateClearButton(){this.clearButton&&(!this.value||this.element.disabled||this.element.readOnly?this.clearButton.style.display="none":this.clearButton.style.display="block")}debounceValidation(){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.validate()},this.options.debounceDelay)}addValidator(e){"function"===typeof e&&this.validators.push(e)}removeValidator(e){const t=this.validators.indexOf(e);t>-1&&this.validators.splice(t,1)}validate(){const e=[];for(const n of this.validators){const t=n(this.value);t&&e.push(t)}const t=0===e.length;return this.setError(t?null:e[0]),this.emit("validate",{isValid:t,errors:e,value:this.value}),t}setError(e){const t=this.element.closest(".tmyl-input-group, .tmyl-input");if(!t)return;const n=t.querySelector(".tmyl-input__error");if(n&&n.remove(),this.element.classList.remove("tmyl-input--error"),t.classList.remove("tmyl-input--error"),e){const n=document.createElement("div");n.className="tmyl-input__error",n.innerHTML="\n        ".concat(b.exclamation,"\n        <span>").concat(e,"</span>\n      ");const a=t.querySelector(".tmyl-input")||this.element;a.parentNode.insertBefore(n,a.nextSibling),this.element.classList.add("tmyl-input--error"),t.classList.add("tmyl-input--error"),n.id||(n.id="".concat(this.element.id||"input","-error")),this.element.setAttribute("aria-describedby",n.id),this.element.setAttribute("aria-invalid","true")}else this.element.removeAttribute("aria-invalid")}setValue(e){this.value=e,this.element.value=e,this.updateClearButton(),this.handleAutoResize(),this.emit("change",{value:this.value})}clear(){this.setValue(""),this.element.focus(),this.emit("clear")}focus(){this.element.focus()}blur(){this.element.blur()}disable(){this.element.disabled=!0,this.updateClearButton()}enable(){this.element.disabled=!1,this.updateClearButton()}setLoading(e){const t=this.element.closest(".tmyl-input");if(t)if(e){t.classList.add("tmyl-input--loading");let e=t.querySelector(".tmyl-input__loading");e||(e=document.createElement("span"),e.className="tmyl-input__loading",e.innerHTML='<span class="tmyl-spinner"></span>',t.appendChild(e))}else{t.classList.remove("tmyl-input--loading");const e=t.querySelector(".tmyl-input__loading");e&&e.remove()}}addListener(e,t){this.element.addEventListener(e,t),this.listeners.push({event:e,handler:t})}emit(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new CustomEvent("tmyl-input:".concat(e),{detail:(0,a.A)((0,a.A)({},t),{},{controller:this}),bubbles:!0,cancelable:!0});return this.element.dispatchEvent(n),n}emitReady(){this.emit("ready",{value:this.value})}destroy(){this.listeners.forEach(e=>{let{event:t,handler:n}=e;this.element.removeEventListener(t,n)}),clearTimeout(this.debounceTimer),this.clearButton&&this.clearButton.remove(),this.emit("destroy")}}class E extends _{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,(0,a.A)({toggleVisibility:!0,strengthMeter:!1},t)),this.isVisible=!1,this.setupPasswordFeatures()}setupPasswordFeatures(){this.options.toggleVisibility&&this.setupVisibilityToggle(),this.options.strengthMeter&&this.setupStrengthMeter()}setupVisibilityToggle(){const e=this.element.closest(".tmyl-input");if(!e)return;const t=document.createElement("button");t.type="button",t.className="tmyl-input__toggle",t.innerHTML=b.eye,t.setAttribute("aria-label","Toggle password visibility"),t.addEventListener("click",()=>{this.toggleVisibility()}),e.appendChild(t),this.toggleButton=t}toggleVisibility(){this.isVisible=!this.isVisible,this.element.type=this.isVisible?"text":"password",this.toggleButton&&(this.toggleButton.innerHTML=this.isVisible?b.eyeOff:b.eye,this.toggleButton.setAttribute("aria-label",this.isVisible?"Hide password":"Show password")),this.emit("visibility-toggle",{isVisible:this.isVisible})}setupStrengthMeter(){this.addValidator(e=>{const t=this.calculateStrength(e);return this.updateStrengthMeter(t),null})}calculateStrength(e){let t=0;return e.length>=8&&(t+=1),e.length>=12&&(t+=1),/[a-z]/.test(e)&&(t+=1),/[A-Z]/.test(e)&&(t+=1),/[0-9]/.test(e)&&(t+=1),/[^A-Za-z0-9]/.test(e)&&(t+=1),{score:t,level:t<2?"weak":t<4?"medium":"strong"}}updateStrengthMeter(e){this.emit("strength-change",e)}}class A extends _{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,(0,a.A)({clearable:!0,debounceDelay:300,minSearchLength:1},t)),this.searchHistory=[],this.suggestions=[]}handleInput(e){super.handleInput(e),this.value.length>=this.options.minSearchLength?this.debounceSearch():this.clearSuggestions()}debounceSearch(){clearTimeout(this.searchTimer),this.searchTimer=setTimeout(()=>{this.performSearch()},this.options.debounceDelay)}performSearch(){this.emit("search",{query:this.value,history:this.searchHistory})}addToHistory(e){e&&!this.searchHistory.includes(e)&&(this.searchHistory.unshift(e),this.searchHistory=this.searchHistory.slice(0,10))}setSuggestions(e){this.suggestions=e,this.emit("suggestions-update",{suggestions:e})}clearSuggestions(){this.suggestions=[],this.emit("suggestions-clear")}}class L extends _{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,(0,a.A)({maxFiles:null,maxSize:null,allowedTypes:null},t)),this.files=[],this.setupFileHandling()}setupFileHandling(){this.addListener("change",e=>{this.handleFileSelection(e)});const e=this.element.closest(".tmyl-file-input");e&&this.setupDragAndDrop(e)}handleFileSelection(e){const t=Array.from(e.target.files),n=this.validateFiles(t);this.files=n,this.updateFileDisplay(),this.emit("files-selected",{files:n,rejected:t.filter(e=>!n.includes(e))})}validateFiles(e){return e.filter(t=>this.options.maxFiles&&e.length>this.options.maxFiles?(this.emit("validation-error",{type:"max-files",limit:this.options.maxFiles}),!1):this.options.maxSize&&t.size>this.options.maxSize?(this.emit("validation-error",{type:"file-size",file:t,limit:this.options.maxSize}),!1):!(this.options.allowedTypes&&!this.options.allowedTypes.includes(t.type))||(this.emit("validation-error",{type:"file-type",file:t,allowed:this.options.allowedTypes}),!1))}setupDragAndDrop(e){["dragenter","dragover","dragleave","drop"].forEach(t=>{e.addEventListener(t,e=>{e.preventDefault(),e.stopPropagation()})}),e.addEventListener("dragenter",()=>{e.classList.add("tmyl-file-input--drag-over")}),e.addEventListener("dragleave",()=>{e.classList.remove("tmyl-file-input--drag-over")}),e.addEventListener("drop",t=>{e.classList.remove("tmyl-file-input--drag-over");const n=Array.from(t.dataTransfer.files),a=this.validateFiles(n);this.files=a,this.updateFileDisplay(),this.emit("files-dropped",{files:a,rejected:n.filter(e=>!a.includes(e))})})}updateFileDisplay(){const e=this.element.closest(".tmyl-file-input"),t=null===e||void 0===e?void 0:e.querySelector(".tmyl-file-input__text");t&&(0===this.files.length?t.textContent=this.options.placeholder||"Choose file...":1===this.files.length?t.textContent=this.files[0].name:t.textContent="".concat(this.files.length," files selected"))}}class x{constructor(){this.defaultProps={variant:"primary",size:"md",type:"text",disabled:!1,readonly:!1,required:!1,clearable:!1,loading:!1},this.variants=["primary","secondary","success","warning","error","ghost","minimal"],this.sizes=["xs","sm","md","lg","xl"],this.inputTypes=["text","email","password","tel","url","search","number","date","time","datetime-local","month","week","textarea","select","file"],this.ensureCSS()}setSharedFoundation(e,t){this.tokens=e,this.utilities=t}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,a.A)((0,a.A)({},this.defaultProps),e);this.validateConfig(t);const n=S(t),s=document.createElement("div");s.innerHTML=n;const i=s.firstElementChild,o=this.findInputElement(i);return!1!==t.interactive&&this.attachController(o,t),this.setupAccessibility(i,t),i}createMultiple(e){return e.map(e=>this.create(e))}createFromTemplate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=C[e];if(!n)throw new Error('Template "'.concat(e,'" not found. Available: ').concat(Object.keys(C).join(", ")));const s=n(t),i=document.createElement("div");i.innerHTML=s;const o=i.firstElementChild,r=this.findInputElement(o);return!1!==t.interactive&&this.attachController(r,(0,a.A)({templateName:e},t)),o}createForm(e){const{fields:t=[],className:n=""}=e,a=(0,s.A)(e,o),i=document.createElement("form");return i.className="tmyl-form ".concat(n),Object.entries(a).forEach(e=>{let[t,n]=e;void 0!==n&&null!==n&&i.setAttribute(t,n)}),t.forEach(e=>{const t=this.create(e);i.appendChild(t)}),i}createGroup(e){const{inputs:t=[],orientation:n="horizontal",className:a=""}=e,s=document.createElement("div");return s.className="tmyl-input-stack ".concat("vertical"===n?"tmyl-input-stack--vertical":""," ").concat(a),t.forEach(e=>{const t=this.create(e);s.appendChild(t)}),s}findInputElement(e){if(this.isInputElement(e))return e;const t=e.querySelector("input, textarea, select");if(!t)throw new Error("No input element found in the created component");return t}isInputElement(e){return["INPUT","TEXTAREA","SELECT"].includes(e.tagName)}attachController(e,t){let n;switch(t.type){case"password":n=new E(e,t);break;case"search":n=new A(e,t);break;case"file":n=new L(e,t);break;default:n=new _(e,t)}return e._tmylController=n,n}setupAccessibility(e,t){const n=this.findInputElement(e),a=n.closest(".tmyl-input-group");if(!a)return;const s=a.querySelector(".tmyl-input__label"),i=a.querySelector(".tmyl-input__helper"),o=a.querySelector(".tmyl-input__error");!n.id&&(s||i||o)&&(n.id=this.generateId("input")),s&&n.id&&s.setAttribute("for",n.id);const r=[];i&&(i.id||(i.id=this.generateId("helper")),r.push(i.id)),o&&(o.id||(o.id=this.generateId("error")),r.push(o.id)),r.length>0&&n.setAttribute("aria-describedby",r.join(" ")),o&&n.setAttribute("aria-invalid","true"),t.required&&n.setAttribute("aria-required","true")}generateId(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"tmyl","-").concat(Math.random().toString(36).substr(2,9))}validateConfig(e){const t=[];if(e.variant&&!this.variants.includes(e.variant)&&t.push("Invalid variant: ".concat(e.variant,". Available: ").concat(this.variants.join(", "))),e.size&&!this.sizes.includes(e.size)&&t.push("Invalid size: ".concat(e.size,". Available: ").concat(this.sizes.join(", "))),e.type&&!this.inputTypes.includes(e.type)&&t.push("Invalid type: ".concat(e.type,". Available: ").concat(this.inputTypes.join(", "))),t.length>0)throw new Error("Input configuration errors: ".concat(t.join(", ")))}getVariants(){return[...this.variants]}getSizes(){return[...this.sizes]}getTypes(){return[...this.inputTypes]}getTemplates(){return Object.keys(C)}setDefaults(e){this.defaultProps=(0,a.A)((0,a.A)({},this.defaultProps),e)}ensureCSS(){}getController(e){return e._tmylController||null}updateProps(e,t){const n=this.findInputElement(e),a=this.getController(n);if(Object.entries(t).forEach(e=>{let[t,s]=e;switch(t){case"value":a?a.setValue(s):n.value=s;break;case"disabled":n.disabled=s,a&&(s?a.disable():a.enable());break;case"loading":a&&a.setLoading(s);break;case"error":a&&a.setError(s);break;default:null!==s&&void 0!==s?n.setAttribute(t,s):n.removeAttribute(t)}}),t.variant||t.size){const e=n.closest(".tmyl-input");if(e){e.className=e.className.replace(/tmyl-input--\w+/g,"");const n=t.variant||this.defaultProps.variant,a=t.size||this.defaultProps.size;e.classList.add("tmyl-input--".concat(n),"tmyl-input--".concat(a))}}}}new x;const M={search:'<svg viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"></path></svg>',plus:'<svg viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"></path></svg>',download:'<svg viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',upload:'<svg viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg>',x:'<svg viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',"chevron-down":'<svg viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',microphone:'<svg viewBox="0 0 20 20"><path fill-rule="evenodd" d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z" clip-rule="evenodd"></path></svg>'};function k(e){return M[e]||""}function T(e){const{variant:t="primary",size:n="md",icon:a="",iconPosition:s="left",loading:i=!1,disabled:o=!1,fullWidth:r=!1,children:l=""}=e,c=["tmyl-button","tmyl-button--".concat(t),"tmyl-button--".concat(n),i&&"tmyl-button--loading",r&&"tmyl-button--full-width"].filter(Boolean).join(" "),d=a?'\n    <span class="tmyl-button__icon">\n      '.concat(k(a),"\n    </span>\n  "):"",h=i?'\n    <div class="tmyl-button__loading-spinner"></div>\n  ':"";return'\n    <button \n      class="'.concat(c,'"\n      ').concat(o?"disabled":"","\n      ").concat(i?'aria-busy="true"':"",'\n      type="button"\n    >\n      ').concat(h,"\n      ").concat("left"===s?d:"","\n      ").concat(l,"\n      ").concat("right"===s?d:"","\n    </button>\n  ")}class z{constructor(e){this.element=e,this.setupEventListeners()}setupEventListeners(){this.element.addEventListener("click",this.handleClick.bind(this)),this.element.addEventListener("keydown",this.handleKeydown.bind(this))}handleClick(e){if(this.isDisabled()||this.isLoading())return e.preventDefault(),void e.stopPropagation();this.dispatchCustomEvent("tmyl-click",{originalEvent:e})}handleKeydown(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.handleClick(e))}isDisabled(){return this.element.hasAttribute("disabled")||!0===this.element.disabled}isLoading(){return this.element.hasAttribute("loading")||!0===this.element.loading}setLoading(e){e?(this.element.setAttribute("loading",""),this.element.classList.add("tmyl-button--loading")):(this.element.removeAttribute("loading"),this.element.classList.remove("tmyl-button--loading"))}setDisabled(e){e?(this.element.setAttribute("disabled",""),this.element.disabled=!0):(this.element.removeAttribute("disabled"),this.element.disabled=!1)}dispatchCustomEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.element.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0,composed:!0}))}destroy(){this.element.removeEventListener("click",this.handleClick),this.element.removeEventListener("keydown",this.handleKeydown)}}class P{constructor(){this.defaultProps={variant:"primary",size:"md",disabled:!1,loading:!1,fullWidth:!1,icon:"",iconPosition:"left",elevation:!0,rippleEffect:!0,focusRing:!0,accessibility:!0,hapticFeedback:!1,analyticsTracking:!1},this.variants=["primary","secondary","ghost","danger","success","warning","info","action-card","status-pending","status-filled","status-cancelled"],this.sizes=["xs","sm","md","lg","xl"],this.ensureCSS()}setSharedFoundation(e,t){this.tokens=e,this.utilities=t}ensureCSS(){}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,a.A)((0,a.A)({},this.defaultProps),e);this.validateProps(t);const n=document.createElement("div");n.innerHTML=T(t);const s=n.firstElementChild;this.attachEnhancedInteractions(s,t);const i=new z(s);return i.enableTradingPortalPatterns(t),s._controller=i,t.onClick&&s.addEventListener("tmyl-click",e=>{t.analyticsTracking&&this.trackButtonClick(t,e),t.hapticFeedback&&"vibrate"in navigator&&navigator.vibrate(50),t.onClick(e)}),this.enhanceAccessibility(s,t),s}validateProps(e){this.variants.includes(e.variant)||(console.warn("Invalid button variant: ".concat(e.variant,". Using 'primary'.")),e.variant="primary"),this.sizes.includes(e.size)||(console.warn("Invalid button size: ".concat(e.size,". Using 'md'.")),e.size="md")}attachEnhancedInteractions(e,t){t.elevation&&(e.addEventListener("mouseenter",()=>{e.disabled||e.classList.contains("tmyl-button--loading")||(e.style.transform="translateY(-1px)",e.style.boxShadow="var(--tmyl-shadow-md)")}),e.addEventListener("mouseleave",()=>{e.style.transform="",e.style.boxShadow=""})),t.rippleEffect&&e.addEventListener("click",t=>{const n=document.createElement("span");n.className="tmyl-button__ripple";const a=e.getBoundingClientRect(),s=Math.max(a.width,a.height),i=t.clientX-a.left-s/2,o=t.clientY-a.top-s/2;n.style.width=n.style.height=s+"px",n.style.left=i+"px",n.style.top=o+"px",e.appendChild(n),setTimeout(()=>{n.remove()},600)}),e.addEventListener("mousedown",()=>{e.disabled||(e.style.transform=t.elevation?"translateY(1px)":"scale(0.98)")}),e.addEventListener("mouseup",()=>{setTimeout(()=>{e.style.transform=t.elevation?"translateY(-1px)":""},100)})}enhanceAccessibility(e,t){const n=window.getComputedStyle(e);parseInt(n.height)<44&&(e.style.minHeight="44px"),t.focusRing&&(e.addEventListener("focus",()=>{e.classList.add("tmyl-button--focused")}),e.addEventListener("blur",()=>{e.classList.remove("tmyl-button--focused")})),e.addEventListener("keydown",t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),e.disabled||e.classList.contains("tmyl-button--loading")||e.click())}),t.loading&&(e.setAttribute("aria-busy","true"),e.setAttribute("aria-describedby","button-loading-description")),t.disabled&&e.setAttribute("aria-disabled","true")}trackButtonClick(e,t){const n={component:"button",variant:e.variant,size:e.size,text:e.text||"",timestamp:Date.now(),userAgent:navigator.userAgent};window.tamylaAnalytics&&"function"===typeof window.tamylaAnalytics.track&&window.tamylaAnalytics.track("button_click",n)}createPrimary(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)((0,a.A)({},e),{},{variant:"primary"}))}createSecondary(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)((0,a.A)({},e),{},{variant:"secondary"}))}createGhost(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)((0,a.A)({},e),{},{variant:"ghost"}))}createDanger(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)((0,a.A)({},e),{},{variant:"danger"}))}createSuccess(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)((0,a.A)({},e),{},{variant:"success"}))}createWithIcon(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.create((0,a.A)((0,a.A)({},t),{},{icon:e}))}createIconOnly(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.create((0,a.A)((0,a.A)({},t),{},{icon:e,children:"","aria-label":t["aria-label"]||e}))}update(e,t){return function(e,t){const n=e.querySelector("button");if(!n)return;const a=["tmyl-button","tmyl-button--".concat(t.variant||"primary"),"tmyl-button--".concat(t.size||"md"),t.loading&&"tmyl-button--loading",t.fullWidth&&"tmyl-button--full-width"].filter(Boolean).join(" ");n.className=a,t.disabled?n.setAttribute("disabled",""):n.removeAttribute("disabled"),t.loading?n.setAttribute("aria-busy","true"):n.removeAttribute("aria-busy")}(e,t),e}attachController(e){if(!e._controller){const t=new z(e);e._controller=t}return e._controller}createMultiple(e){return e.map(e=>this.create(e))}createGroup(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=document.createElement("div");n.className="tmyl-button-group",t.className&&(n.className+=" ".concat(t.className));return e.map(e=>"object"===typeof e?this.create(e):e).forEach(e=>n.appendChild(e)),n}validateProps(e){const t=[];return e.variant&&!this.variants.includes(e.variant)&&t.push("Invalid variant: ".concat(e.variant,". Must be one of: ").concat(this.variants.join(", "))),e.size&&!this.sizes.includes(e.size)&&t.push("Invalid size: ".concat(e.size,". Must be one of: ").concat(this.sizes.join(", "))),t}makeAccessible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{label:n,describedBy:a,expanded:s,controls:i,pressed:o}=t;return n&&e.setAttribute("aria-label",n),a&&e.setAttribute("aria-describedby",a),void 0!==s&&e.setAttribute("aria-expanded",s),i&&e.setAttribute("aria-controls",i),void 0!==o&&e.setAttribute("aria-pressed",o),e}}const I=new P,{create:D,createPrimary:N,createSecondary:B,createGhost:q,createDanger:F,createSuccess:H,createWithIcon:R,createIconOnly:V}=I;class j{constructor(){this.inputFactory=new x,this.buttonFactory=new P}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{value:t=[],onChange:n,placeholder:a="Add recipient email",maxRecipients:s=50,allowDuplicates:i=!1,validateEmail:o=!0,container:r=null,className:l=""}=e;let c=null,d=[...t],h=null;function u(e){const t=e.trim();return!!t&&(function(e){return!o||/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(e)}(t)?!i&&d.includes(t)?(b("Email already added"),!1):d.length>=s?(b("Maximum ".concat(s," recipients allowed")),!1):(d.push(t),p(),f(),!0):(b("Invalid email format"),!1))}function m(e){d=d.filter(t=>t!==e),p(),f()}function p(){const e=c.querySelector(".email-chips");e.innerHTML=d.map(e=>'\n        <span class="email-chip" data-email="'.concat(e,'">\n          <span class="chip-text">').concat(e,'</span>\n          <button class="chip-remove" data-email="').concat(e,'" aria-label="Remove ').concat(e,'">\xd7</button>\n        </span>\n      ')).join(""),e.querySelectorAll(".chip-remove").forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation(),m(e.dataset.email)})})}function v(e){"Enter"===e.key&&(e.preventDefault(),y())}function g(){h.getValue().trim()&&y()}function y(){u(h.getValue())&&h.setValue("")}function f(){n&&n([...d])}function b(e){console.error("EmailRecipients:",e),c&&c.dispatchEvent(new CustomEvent("email-recipients-error",{detail:{message:e,currentValue:d}}))}return function(){c=document.createElement("div"),c.className="email-recipients ".concat(l);const e=document.createElement("div");e.className="email-input-container",h=this.inputFactory.create({type:"email",placeholder:a,onKeyDown:v,onBlur:g,container:e});const t=document.createElement("div");this.buttonFactory.create({variant:"primary",size:"sm",label:"Add",onClick:y,container:t});const n=document.createElement("div");return n.className="email-chips",c.appendChild(n),c.appendChild(e),c.appendChild(t),p(),r&&r.appendChild(c),{element:c,getValue:()=>[...d],setValue:e=>{d=[...e],p()},addEmail:e=>u(e),removeEmail:e=>m(e),clear:()=>{d=[],p(),f()},destroy:()=>{var e;null!==(e=c)&&void 0!==e&&e.parentNode&&c.parentNode.removeChild(c)}}}.call(this)}}new j;const O={chevronRight:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>\n  </svg>',chevronDown:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path>\n  </svg>',externalLink:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path d="M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"></path>\n    <path d="M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"></path>\n  </svg>',heart:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"></path>\n  </svg>',heartOutline:'<svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2">\n    <path d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z"></path>\n  </svg>',share:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path d="M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z"></path>\n  </svg>',bookmark:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>\n  </svg>',bookmarkOutline:'<svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2">\n    <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>\n  </svg>',download:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"></path>\n    <path d="M6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z"></path>\n  </svg>',clock:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>\n  </svg>',calendar:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path>\n  </svg>',user:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path>\n  </svg>',users:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"></path>\n  </svg>',location:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"></path>\n  </svg>',eye:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"></path>\n    <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"></path>\n  </svg>',star:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>\n  </svg>',starOutline:'<svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2">\n    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>\n  </svg>',checkCircle:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>\n  </svg>',xCircle:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>\n  </svg>',exclamationCircle:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>\n  </svg>',infoCircle:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>\n  </svg>',photograph:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"></path>\n  </svg>',film:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm3 2h6v4H7V5zm8 8v2h1v-2h-1zm-2-2H7v4h6v-4zm2 0h1V9h-1v2zm1-4V5h-1v2h1zM5 5v2H4V5h1zm0 4H4v2h1V9zm-1 4h1v2H4v-2z" clip-rule="evenodd"></path>\n  </svg>',musicNote:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path d="M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z"></path>\n  </svg>',document:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"></path>\n  </svg>',plus:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"></path>\n  </svg>',minus:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path>\n  </svg>',x:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>\n  </svg>',dotsVertical:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"></path>\n  </svg>',dotsHorizontal:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path d="M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"></path>\n  </svg>',chat:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path d="M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z"></path>\n    <path d="M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z"></path>\n  </svg>',mail:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path>\n    <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path>\n  </svg>',tag:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path fill-rule="evenodd" d="M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V3a1 1 0 011-1h7c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path>\n  </svg>',collection:'<svg viewBox="0 0 20 20" fill="currentColor">\n    <path d="M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"></path>\n  </svg>'};function U(e){return O[e]||O[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document"]||""}function G(e){const{variant:t="default",size:n="md",padding:a="md",elevation:s="sm",interactive:i=!1,selected:o=!1,disabled:r=!1,header:l="",children:c="",footer:d="",image:h="",icon:u="",title:m="",subtitle:p="",actions:v=[]}=e,g=["tmyl-card","tmyl-card--".concat(t),"tmyl-card--".concat(n),"tmyl-card--padding-".concat(a),"tmyl-card--elevation-".concat(s),i&&"tmyl-card--interactive",o&&"tmyl-card--selected",r&&"tmyl-card--disabled"].filter(Boolean).join(" "),y=h?'\n    <div class="tmyl-card__image">\n      <img src="'.concat(h,'" alt="" loading="lazy" />\n    </div>\n  '):"",f=u?'\n    <div class="tmyl-card__icon">\n      '.concat(U(u),"\n    </div>\n  "):"",b=l||m||p||u?'\n    <div class="tmyl-card__header">\n      '.concat(f,"\n      ").concat(m?'<h3 class="tmyl-card__title">'.concat(m,"</h3>"):"","\n      ").concat(p?'<p class="tmyl-card__subtitle">'.concat(p,"</p>"):"","\n      ").concat(l,"\n    </div>\n  "):"",w=c?'\n    <div class="tmyl-card__content">\n      '.concat(c,"\n    </div>\n  "):"",S=v.length>0||d?'\n    <div class="tmyl-card__footer">\n      '.concat(d,"\n      ").concat(v.length>0?'\n        <div class="tmyl-card__actions">\n          '.concat(v.map(e=>'\n            <button \n              class="tmyl-card__action tmyl-button tmyl-button--'.concat(e.variant||"ghost",' tmyl-button--sm"\n              data-action="').concat(e.name||"",'"\n            >\n              ').concat(e.label,"\n            </button>\n          ")).join(""),"\n        </div>\n      "):"","\n    </div>\n  "):"";return'\n    <div \n      class="'.concat(g,'"\n      ').concat(i?'tabindex="0" role="button"':"","\n      ").concat(r?'aria-disabled="true"':"","\n      ").concat(o?'aria-selected="true"':"","\n    >\n      ").concat(y,"\n      ").concat(b,"\n      ").concat(w,"\n      ").concat(S,"\n    </div>\n  ")}const W=e=>G((0,a.A)({variant:"default",padding:"md",elevation:"sm"},e)),K=e=>G((0,a.A)({variant:"default",padding:"md",elevation:"sm",interactive:!0},e)),X=e=>G((0,a.A)({variant:"default",padding:"lg",elevation:"sm"},e)),Q=e=>G((0,a.A)({variant:"default",padding:"lg",elevation:"sm"},e));class Y{constructor(e){this.element=e,this.isInteractive=this.element.hasAttribute("tabindex"),this.setupEventListeners()}setupEventListeners(){this.isInteractive&&(this.element.addEventListener("click",this.handleClick.bind(this)),this.element.addEventListener("keydown",this.handleKeydown.bind(this)),this.element.addEventListener("mouseenter",this.handleMouseEnter.bind(this)),this.element.addEventListener("mouseleave",this.handleMouseLeave.bind(this)),this.element.addEventListener("focus",this.handleFocus.bind(this)),this.element.addEventListener("blur",this.handleBlur.bind(this)));this.element.querySelectorAll("[data-action]").forEach(e=>{e.addEventListener("click",this.handleActionClick.bind(this))})}handleClick(e){if(this.isDisabled())return e.preventDefault(),void e.stopPropagation();e.target.closest("[data-action]")||(this.toggleSelected(),this.dispatchCustomEvent("tmyl-card-click",{originalEvent:e,selected:this.isSelected()}))}handleActionClick(e){if(e.stopPropagation(),this.isDisabled())return void e.preventDefault();const t=e.target.getAttribute("data-action");this.dispatchCustomEvent("tmyl-card-action",{action:t,originalEvent:e})}handleKeydown(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.handleClick(e))}handleMouseEnter(e){this.isDisabled()||(this.element.classList.add("tmyl-card--hover"),this.dispatchCustomEvent("tmyl-card-hover",{entering:!0}))}handleMouseLeave(e){this.element.classList.remove("tmyl-card--hover"),this.dispatchCustomEvent("tmyl-card-hover",{entering:!1})}handleFocus(e){this.isDisabled()||(this.element.classList.add("tmyl-card--focus"),this.dispatchCustomEvent("tmyl-card-focus",{focused:!0}))}handleBlur(e){this.element.classList.remove("tmyl-card--focus"),this.dispatchCustomEvent("tmyl-card-focus",{focused:!1})}isDisabled(){return this.element.hasAttribute("aria-disabled")&&"true"===this.element.getAttribute("aria-disabled")}isSelected(){return this.element.hasAttribute("aria-selected")&&"true"===this.element.getAttribute("aria-selected")}setSelected(e){e?(this.element.setAttribute("aria-selected","true"),this.element.classList.add("tmyl-card--selected")):(this.element.removeAttribute("aria-selected"),this.element.classList.remove("tmyl-card--selected")),this.dispatchCustomEvent("tmyl-card-selection-change",{selected:e})}toggleSelected(){this.setSelected(!this.isSelected())}setDisabled(e){e?(this.element.setAttribute("aria-disabled","true"),this.element.classList.add("tmyl-card--disabled"),this.element.removeAttribute("tabindex")):(this.element.removeAttribute("aria-disabled"),this.element.classList.remove("tmyl-card--disabled"),this.isInteractive&&this.element.setAttribute("tabindex","0"))}setElevation(e){["none","xs","sm","md","lg","xl"].forEach(e=>{this.element.classList.remove("tmyl-card--elevation-".concat(e))}),e&&"none"!==e&&this.element.classList.add("tmyl-card--elevation-".concat(e))}dispatchCustomEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.element.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0,composed:!0}))}destroy(){this.isInteractive&&(this.element.removeEventListener("click",this.handleClick),this.element.removeEventListener("keydown",this.handleKeydown),this.element.removeEventListener("mouseenter",this.handleMouseEnter),this.element.removeEventListener("mouseleave",this.handleMouseLeave),this.element.removeEventListener("focus",this.handleFocus),this.element.removeEventListener("blur",this.handleBlur));this.element.querySelectorAll("[data-action]").forEach(e=>{e.removeEventListener("click",this.handleActionClick)})}}class J{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.container=e,this.options=(0,a.A)({multiSelect:!1,selectable:!0},t),this.cards=[],this.setupCards()}setupCards(){this.container.querySelectorAll(".tmyl-card").forEach(e=>{const t=new Y(e);e._controller=t,this.cards.push(t),this.options.selectable&&e.addEventListener("tmyl-card-click",this.handleCardSelection.bind(this))})}handleCardSelection(e){const t=e.target;t._controller,this.options.multiSelect||this.cards.forEach(e=>{e.element!==t&&e.setSelected(!1)}),this.dispatchGroupEvent("tmyl-card-group-selection",{selectedCards:this.getSelectedCards(),changedCard:t})}getSelectedCards(){return this.cards.filter(e=>e.isSelected()).map(e=>e.element)}selectAll(){this.options.multiSelect&&this.cards.forEach(e=>e.setSelected(!0))}deselectAll(){this.cards.forEach(e=>e.setSelected(!1))}dispatchGroupEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.container.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0,composed:!0}))}destroy(){this.cards.forEach(e=>e.destroy()),this.cards=[]}}class Z{constructor(){this.defaultProps={variant:"default",size:"md",padding:"md",elevation:"sm",interactive:!1,selected:!1,disabled:!1},this.variants=["default","outlined","filled","elevated","ghost"],this.sizes=["xs","sm","md","lg","xl"],this.paddings=["none","xs","sm","md","lg","xl"],this.elevations=["none","xs","sm","md","lg","xl"],this.ensureCSS()}setSharedFoundation(e,t){this.tokens=e,this.utilities=t}ensureCSS(){}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,a.A)((0,a.A)({},this.defaultProps),e),n=document.createElement("div");n.innerHTML=G(t);const s=n.firstElementChild;if(t.interactive){const e=new Y(s);s._controller=e,t.onClick&&s.addEventListener("tmyl-card-click",t.onClick),t.onAction&&s.addEventListener("tmyl-card-action",t.onAction)}return s}createDefault(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)((0,a.A)({},e),{},{variant:"default"}))}createOutlined(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)((0,a.A)({},e),{},{variant:"outlined"}))}createFilled(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)((0,a.A)({},e),{},{variant:"filled"}))}createElevated(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)((0,a.A)({},e),{},{variant:"elevated",elevation:"md"}))}createGhost(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)((0,a.A)({},e),{},{variant:"ghost"}))}createInteractive(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)((0,a.A)({},e),{},{interactive:!0}))}createSelectable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)((0,a.A)({},e),{},{interactive:!0,selectable:!0}))}createBasic(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=document.createElement("div");return t.innerHTML=W(e),t.firstElementChild}createProduct(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=document.createElement("div");t.innerHTML=K(e);const n=t.firstElementChild,a=new Y(n);return n._controller=a,n}createArticle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=document.createElement("div");return t.innerHTML=X(e),t.firstElementChild}createProfile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=document.createElement("div");return t.innerHTML=Q(e),t.firstElementChild}update(e,t){return function(e,t){const n=e.querySelector(".tmyl-card");if(!n)return;const a=["tmyl-card","tmyl-card--".concat(t.variant||"default"),"tmyl-card--".concat(t.size||"md"),"tmyl-card--padding-".concat(t.padding||"md"),"tmyl-card--elevation-".concat(t.elevation||"sm"),t.interactive&&"tmyl-card--interactive",t.selected&&"tmyl-card--selected",t.disabled&&"tmyl-card--disabled"].filter(Boolean).join(" ");n.className=a,t.disabled?n.setAttribute("aria-disabled","true"):n.removeAttribute("aria-disabled"),t.selected?n.setAttribute("aria-selected","true"):n.removeAttribute("aria-selected")}(e,t),e}attachController(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e._controller){const n=new Y(e,t);e._controller=n}return e._controller}createMultiple(e){return e.map(e=>this.create(e))}createGrid(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=document.createElement("div");n.className="tmyl-card-grid";const{columns:a="auto",gap:s="md",responsive:i=!0,className:o=""}=t;o&&(n.className+=" ".concat(o)),"auto"!==a&&n.style.setProperty("--tmyl-grid-columns",a),n.style.setProperty("--tmyl-grid-gap","var(--tmyl-space-".concat(s,")"));return e.map(e=>"object"===typeof e?this.create(e):e).forEach(e=>n.appendChild(e)),n}createGroup(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=document.createElement("div");n.className="tmyl-card-group";const{multiSelect:a=!1,selectable:s=!0,className:i=""}=t;i&&(n.className+=" ".concat(i));e.map(e=>{const t="object"===typeof e?this.create(e):e;return s&&!t._controller&&this.attachController(t),t}).forEach(e=>n.appendChild(e));const o=new J(n,{multiSelect:a,selectable:s});return n._groupController=o,n}validateProps(e){const t=[];return e.variant&&!this.variants.includes(e.variant)&&t.push("Invalid variant: ".concat(e.variant,". Must be one of: ").concat(this.variants.join(", "))),e.size&&!this.sizes.includes(e.size)&&t.push("Invalid size: ".concat(e.size,". Must be one of: ").concat(this.sizes.join(", "))),e.padding&&!this.paddings.includes(e.padding)&&t.push("Invalid padding: ".concat(e.padding,". Must be one of: ").concat(this.paddings.join(", "))),e.elevation&&!this.elevations.includes(e.elevation)&&t.push("Invalid elevation: ".concat(e.elevation,". Must be one of: ").concat(this.elevations.join(", "))),t}makeAccessible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{label:n,describedBy:a,role:s,selected:i,disabled:o}=t;return n&&e.setAttribute("aria-label",n),a&&e.setAttribute("aria-describedby",a),s&&e.setAttribute("role",s),void 0!==i&&e.setAttribute("aria-selected",i),void 0!==o&&e.setAttribute("aria-disabled",o),e}}const $=new Z,{create:ee,createDefault:te,createOutlined:ne,createFilled:ae,createElevated:se,createGhost:ie,createInteractive:oe,createSelectable:re,createBasic:le,createProduct:ce,createArticle:de,createProfile:he}=$;class ue{constructor(){this.cardFactory=new Z}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{files:t=[],onSelect:n,selected:a=[],multiSelect:s=!0,showSize:i=!0,showDate:o=!0,showPreview:r=!1,sortBy:l="name",sortOrder:c="asc",filterBy:d="all",container:h=null,className:u=""}=e;let m=null,p=[...t],v=[...a],g=l,y=c,f=d;function b(){const e=m.querySelector(".files-container"),t=function(e){return"all"===f?e:e.filter(e=>C(e)===f)}([...p].sort((e,t)=>{let n,a;switch(g){case"size":n=e.size||0,a=t.size||0;break;case"date":n=new Date(e.date||0),a=new Date(t.date||0);break;default:n=(e.name||"").toLowerCase(),a=(t.name||"").toLowerCase()}return"desc"===y?n<a?1:-1:n>a?1:-1}));0!==t.length?(e.innerHTML="",t.forEach(t=>{const a=function(e){const t=document.createElement("div");t.className="file-card-container";const a=v.includes(e.id||e.name),r=this.cardFactory.create({variant:a?"selected":"default",className:"file-card ".concat(a?"selected":""),onClick:()=>function(e){const t=e.id||e.name;s?v.includes(t)?v=v.filter(e=>e!==t):v.push(t):v=v.includes(t)?[]:[t];w(),n&&n({file:e,selected:v.includes(t),allSelected:v});m.dispatchEvent(new CustomEvent("file-select",{detail:{file:e,selected:v.includes(t),allSelected:v}}))}(e),container:t}),l=document.createElement("div");return l.className="file-content",l.innerHTML='\n        <div class="file-icon">'.concat(function(e){const t=C(e);return{image:"\ud83d\uddbc\ufe0f",video:"\ud83c\udfac",audio:"\ud83c\udfb5",document:"\ud83d\udcc4",other:"\ud83d\udcc1"}[t]}(e),'</div>\n        <div class="file-info">\n          <div class="file-name">').concat(e.name,"</div>\n          ").concat(i&&e.size?'<div class="file-size">'.concat(function(e){if(0===e)return"0 Bytes";const t=1024,n=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,a)).toFixed(1))+" "+n[a]}(e.size),"</div>"):"","\n          ").concat(o&&e.date?'<div class="file-date">'.concat(function(e){return new Date(e).toLocaleDateString()}(e.date),"</div>"):"","\n        </div>\n        ").concat(a?'<div class="selection-indicator">\u2713</div>':"","\n      "),r.element.appendChild(l),t}(t);e.appendChild(a)}),w(),S()):e.innerHTML='\n          <div class="empty-state">\n            <div class="empty-icon">\ud83d\udcc1</div>\n            <div class="empty-title">No files found</div>\n            <div class="empty-message">\n              '.concat(0===p.length?"No files to display":"No files match the current filter","\n            </div>\n          </div>\n        ")}function w(){m.querySelectorAll(".file-card").forEach(e=>{const t=e.querySelector(".file-content"),n=t.querySelector(".file-name").textContent,a=p.find(e=>e.name===n),s=v.includes((null===a||void 0===a?void 0:a.id)||n);e.classList.toggle("selected",s);let i=e.querySelector(".selection-indicator");s&&!i?(i=document.createElement("div"),i.className="selection-indicator",i.textContent="\u2713",t.appendChild(i)):!s&&i&&i.remove()}),S()}function S(){const e=m.querySelector(".file-list-title"),t=m.querySelector(".selection-info");e.textContent="Files (".concat(p.length,")"),t.textContent="".concat(v.length," selected")}function C(e){var t;const n=null===(t=(e.name||"").split(".").pop())||void 0===t?void 0:t.toLowerCase();return["jpg","jpeg","png","gif","webp","svg"].includes(n)?"image":["mp4","avi","mov","wmv","flv"].includes(n)?"video":["mp3","wav","ogg","flac"].includes(n)?"audio":["pdf","doc","docx","txt","rtf"].includes(n)?"document":"other"}function _(e){g=e.target.value,b()}function E(e){f=e.target.value,b()}return function(){m=document.createElement("div"),m.className="advanced-file-list ".concat(u);const e=function(){const e=document.createElement("div");e.className="file-list-header",e.innerHTML='\n        <div class="file-list-info">\n          <h3 class="file-list-title">Files ('.concat(p.length,')</h3>\n          <span class="selection-info">').concat(v.length,' selected</span>\n        </div>\n        <div class="file-list-controls">\n          <select class="sort-select" value="').concat(g,'">\n            <option value="name">Sort by Name</option>\n            <option value="size">Sort by Size</option>\n            <option value="date">Sort by Date</option>\n          </select>\n          <select class="filter-select" value="').concat(f,'">\n            <option value="all">All Files</option>\n            <option value="image">Images</option>\n            <option value="video">Videos</option>\n            <option value="document">Documents</option>\n            <option value="audio">Audio</option>\n          </select>\n        </div>\n      ');const t=e.querySelector(".sort-select"),n=e.querySelector(".filter-select");return t.addEventListener("change",_),n.addEventListener("change",E),e}();m.appendChild(e);const t=document.createElement("div");return t.className="files-container",m.appendChild(t),b(),h&&h.appendChild(m),{element:m,getSelected:()=>[...v],setSelected:e=>{v=[...e],w()},getFiles:()=>[...p],setFiles:e=>{p=[...e],b()},addFile:e=>{p.push(e),b()},removeFile:e=>{p=p.filter(t=>t.id!==e),v=v.filter(t=>t!==e),b()},clearSelection:()=>{v=[],w()},destroy:()=>{var e;null!==(e=m)&&void 0!==e&&e.parentNode&&m.parentNode.removeChild(m)}}}.call(this)}}new ue;class me{constructor(){this.buttonFactory=new P}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{open:t=!1,title:n="",children:a="",actions:s=[],size:i="md",closable:o=!0,backdropClose:r=!0,persistent:l=!1,onClose:c,onOpen:d,className:h=""}=e;let u=null,m=t;function p(e){"Escape"===e.key&&m&&o&&!l&&g()}function v(){m||(m=!0,u.style.display="flex",y(),u.dispatchEvent(new CustomEvent("modal-open",{detail:{modal:u}})),d&&d())}function g(){m&&!l&&(m=!1,u.style.display="none",function(){u._previousFocus&&u._previousFocus.focus&&u._previousFocus.focus();document.body.style.overflow=""}(),u.dispatchEvent(new CustomEvent("modal-close",{detail:{modal:u}})),c&&c())}function y(){u._previousFocus=document.activeElement,setTimeout(()=>{const e=u.querySelector('button, input, select, textarea, [tabindex]:not([tabindex="-1"])');e&&e.focus()},100),document.body.style.overflow="hidden"}return function(){u=document.createElement("div"),u.className="advanced-modal-backdrop ".concat(h),u.style.display=m?"flex":"none";const e=document.createElement("div");if(e.className="advanced-modal advanced-modal-".concat(i),n||o){const t=function(){const e=document.createElement("div");if(e.className="advanced-modal-header",n){const t=document.createElement("h2");t.className="advanced-modal-title",t.textContent=n,e.appendChild(t)}if(o){const t=document.createElement("button");t.className="advanced-modal-close",t.innerHTML="\xd7",t.setAttribute("aria-label","Close modal"),t.addEventListener("click",g),e.appendChild(t)}return e}();e.appendChild(t)}const t=document.createElement("div");if(t.className="advanced-modal-body","string"===typeof a?t.innerHTML=a:a instanceof Element&&t.appendChild(a),e.appendChild(t),s.length>0){const t=function(){const e=document.createElement("div");return e.className="advanced-modal-footer",s.forEach(t=>{const n=document.createElement("div");this.buttonFactory.create({variant:t.variant||"secondary",size:t.size||"md",label:t.label,onClick:()=>{if(t.onClick){const e=t.onClick();e&&"function"===typeof e.then?e.then(()=>{!1!==t.close&&g()}).catch(e=>{console.error("Modal action error:",e)}):!1!==t.close&&g()}else!1!==t.close&&g()},container:n}),e.appendChild(n)}),e}();e.appendChild(t)}return u.appendChild(e),function(){r&&u.addEventListener("click",e=>{e.target===u&&g()});document.addEventListener("keydown",p);const e=u.querySelector(".advanced-modal");e.addEventListener("click",e=>{e.stopPropagation()})}(),document.body.appendChild(u),m&&y(),{element:u,open:()=>v(),close:()=>g(),toggle:()=>m?g():v(),setContent:e=>{t.innerHTML="","string"===typeof e?t.innerHTML=e:e instanceof Element&&t.appendChild(e)},setTitle:e=>{const t=u.querySelector(".advanced-modal-title");t&&(t.textContent=e)},isOpen:()=>m,destroy:()=>{var e;document.removeEventListener("keydown",p),null!==(e=u)&&void 0!==e&&e.parentNode&&u.parentNode.removeChild(u),document.body.style.overflow=""}}}.call(this)}createConfirmModal(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)({size:"sm",title:e.title||"Confirm Action",children:e.message||"Are you sure?",actions:[{label:"Cancel",variant:"secondary",onClick:e.onCancel},{label:e.confirmLabel||"Confirm",variant:e.confirmVariant||"primary",onClick:e.onConfirm}]},e))}createAlertModal(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)({size:"sm",title:e.title||"Alert",children:e.message||"",actions:[{label:"OK",variant:"primary",onClick:e.onOK}]},e))}}new me;class pe{constructor(){this.notifications=new Map,this.container=null,this.createContainer()}createContainer(){this.container=document.getElementById("notifications-container"),this.container||(this.container=document.createElement("div"),this.container.className="notifications-container",this.container.id="notifications-container",document.body.appendChild(this.container))}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{type:t="info",message:n="",duration:a=4e3,persistent:s=!1,actions:i=[],onClose:o,id:r=Date.now().toString()+Math.random().toString(36).substr(2,9)}=e;let l=null,c=null;function d(){l&&l.parentNode&&(c&&clearTimeout(c),l.classList.add("notification-exit"),setTimeout(()=>{l&&l.parentNode&&l.parentNode.removeChild(l),this.notifications.delete(r),document.dispatchEvent(new CustomEvent("notification-closed",{detail:{id:r,type:t,message:n}})),o&&o()},300))}return function(){l=document.createElement("div"),l.className="notification notification-".concat(t),l.dataset.id=r;const e=document.createElement("div");e.className="notification-content";const o=document.createElement("span");o.className="notification-icon",o.textContent=function(e){const t={info:"\u2139\ufe0f",success:"\u2705",warning:"\u26a0\ufe0f",error:"\u274c"};return t[e]||t.info}(t),e.appendChild(o);const h=document.createElement("span");if(h.className="notification-message",h.textContent=n,e.appendChild(h),l.appendChild(e),i.length>0){const e=document.createElement("div");e.className="notification-actions",i.forEach(t=>{const n=document.createElement("button");n.className="notification-action action-".concat(t.variant||"primary"),n.textContent=t.label,n.addEventListener("click",()=>{t.onClick&&t.onClick(),d()}),e.appendChild(n)}),l.appendChild(e)}const u=document.createElement("button");return u.className="notification-close",u.innerHTML="\xd7",u.setAttribute("aria-label","Close notification"),u.addEventListener("click",d),l.appendChild(u),this.container.appendChild(l),this.notifications.set(r,l),!s&&a>0&&(c=setTimeout(d,a)),requestAnimationFrame(()=>{l.classList.add("notification-enter")}),l.dispatchEvent(new CustomEvent("notification-created",{detail:{id:r,type:t,message:n}})),{element:l,close:d,extend:e=>{c&&(clearTimeout(c),c=setTimeout(d,e))},getId:()=>r,getType:()=>t}}.call(this)}info(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.create((0,a.A)((0,a.A)({},t),{},{type:"info",message:e}))}success(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.create((0,a.A)((0,a.A)({},t),{},{type:"success",message:e}))}warning(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.create((0,a.A)((0,a.A)({},t),{},{type:"warning",message:e}))}error(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.create((0,a.A)((0,a.A)({},t),{},{type:"error",message:e,duration:6e3}))}confirm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(n=>{this.create((0,a.A)((0,a.A)({},t),{},{type:"warning",message:e,persistent:!0,actions:[{label:"Cancel",variant:"secondary",onClick:()=>n(!1)},{label:"Confirm",variant:"primary",onClick:()=>n(!0)}]}))})}prompt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(s=>{const i=document.createElement("input");i.type="text",i.value=t,i.className="notification-input";const o=document.createElement("div");o.appendChild(document.createTextNode(e)),o.appendChild(document.createElement("br")),o.appendChild(i),this.create((0,a.A)((0,a.A)({},n),{},{type:"info",message:"",persistent:!0,actions:[{label:"Cancel",variant:"secondary",onClick:()=>s(null)},{label:"OK",variant:"primary",onClick:()=>s(i.value)}],onOpen:()=>{setTimeout(()=>i.focus(),100)}}))})}clearAll(){this.notifications.forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),this.notifications.clear()}clearByType(e){this.notifications.forEach((t,n)=>{t.classList.contains("notification-".concat(e))&&(t.parentNode&&t.parentNode.removeChild(t),this.notifications.delete(n))})}getCount(){return this.notifications.size}getActiveNotifications(){return Array.from(this.notifications.entries()).map(e=>{var t;let[n,a]=e;return{id:n,element:a,type:(null===(t=a.className.match(/notification-(\w+)/))||void 0===t?void 0:t[1])||"unknown"}})}}new pe;class ve{constructor(){this.tokens=c,this.utilities=f,this.commonProps={size:"md",disabled:!1,className:"",id:null,"data-testid":null}}mergeProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.A)((0,a.A)((0,a.A)({},this.commonProps),t),e)}buildClassName(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return["tmyl-".concat(e),t&&"tmyl-".concat(e,"--").concat(t),n&&"tmyl-".concat(e,"--").concat(n),...a].filter(Boolean).join(" ")}applyAttributes(e,t){Object.entries(t).forEach(t=>{let[n,a]=t;null!==a&&void 0!==a&&("boolean"===typeof a?a&&e.setAttribute(n,""):e.setAttribute(n,a))})}setupEventHandling(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.entries(t).forEach(t=>{let[n,a]=t;"function"===typeof a&&e.addEventListener(n,a)})}}class ge extends ve{constructor(){super(),this.button=new P,this.input=new x,this.card=new Z,this.setupSharedFoundation()}setupSharedFoundation(){[this.button,this.input,this.card].forEach(e=>{e.setSharedFoundation(this.tokens,this.utilities)})}create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={button:this.button,input:this.input,card:this.card},a=n[e];if(!a)throw new Error("Unknown atom type: ".concat(e,". Available: ").concat(Object.keys(n).join(", ")));return a.create(t)}createMultiple(e){return e.map(e=>{let{type:t,props:n}=e;return this.create(t,n)})}getVariants(e){const t={button:this.button,input:this.input,card:this.card}[e];return t?t.getVariants():[]}getDesignTokens(){return this.tokens}createThemed(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=(0,a.A)((0,a.A)({},n),{},{className:"".concat(n.className||""," tmyl-theme-").concat(t).trim()});return this.create(e,s)}createBatch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).map(n=>this.create(e,(0,a.A)((0,a.A)({},t),n)))}}class ye{constructor(e){this.factory=e}createFormElements(e){const{fields:t,submitButton:n,cancelButton:s}=e,i={fields:t.map(e=>this.factory.create("input",e)),actions:[]};return n&&i.actions.push(this.factory.create("button",(0,a.A)({variant:"primary",type:"submit"},n))),s&&i.actions.push(this.factory.create("button",(0,a.A)({variant:"secondary",type:"button"},s))),i}createCardGrid(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.map(e=>this.factory.create("card",(0,a.A)((0,a.A)({},t),{},{content:e})))}createButtonGroup(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{container:this.createButtonGroupContainer(t),buttons:e.map(e=>this.factory.create("button",e))}}createButtonGroupContainer(e){const t=document.createElement("div");return t.className="tmyl-button-group ".concat(e.className||""),"vertical"===e.orientation&&t.classList.add("tmyl-button-group--vertical"),t}}class fe{constructor(){this.themes=new Map,this.registerDefaultThemes()}registerDefaultThemes(){this.register("primary",{button:{variant:"primary"},input:{variant:"primary"},card:{variant:"elevated"}}),this.register("minimal",{button:{variant:"ghost"},input:{variant:"minimal"},card:{variant:"flat"}}),this.register("bold",{button:{variant:"primary",size:"lg"},input:{variant:"primary",size:"lg"},card:{variant:"raised",padding:"xl"}})}register(e,t){this.themes.set(e,t)}get(e){return this.themes.get(e)}apply(e,t){const n=this.get(t);n&&Object.entries(n).forEach(t=>{let[n,a]=t;e[n]&&e[n].setDefaults&&e[n].setDefaults(a)})}}const be=new ge,we=(new ye(be),new fe,{});function Se(e){const{placeholder:t="Search...",value:n="",size:a="md",disabled:s=!1,loading:i=!1,voiceEnabled:o=!1,clearable:r=!0,showSubmitButton:l=!0,suggestions:c=[],showSuggestions:d=!1,maxSuggestions:h=5,className:u=""}=e,m=["tmyl-search-bar","tmyl-search-bar--".concat(a),i&&"tmyl-search-bar--loading",s&&"tmyl-search-bar--disabled",u].filter(Boolean).join(" "),p=C.search({placeholder:t,value:n,size:a,disabled:s,variant:"primary",className:"tmyl-search-bar__input".concat(o?" tmyl-search-bar__input--with-voice":"")}),v=[];r&&n&&v.push(T({variant:"ghost",size:"sm",icon:"x",className:"tmyl-search-bar__action-button tmyl-search-bar__clear-button","aria-label":"Clear search","data-action":"clear"})),o&&v.push(T({variant:"ghost",size:"sm",icon:"microphone",className:"tmyl-search-bar__action-button tmyl-search-bar__voice-button","aria-label":"Voice search","data-action":"voice"}));const g=l?T({variant:"primary",size:a,icon:"search",text:"sm"===a?"":"Search",className:"tmyl-search-bar__submit-button",type:"submit",disabled:s,loading:i,"data-action":"submit"}):"",y=d&&c.length?'\n    <div class="tmyl-search-bar__suggestions tmyl-search-bar__suggestions--visible">\n      '.concat(c.slice(0,h).map((e,t)=>'\n        <div class="tmyl-search-bar__suggestion" data-suggestion-index="'.concat(t,'" data-action="select-suggestion">\n          <div class="tmyl-search-bar__suggestion-icon">\n            ').concat(Ce(e.type),'\n          </div>\n          <div class="tmyl-search-bar__suggestion-text">').concat(e.text,"</div>\n          ").concat(e.type?'<div class="tmyl-search-bar__suggestion-type">'.concat(e.type,"</div>"):"","\n        </div>\n      ")).join(""),"\n    </div>\n  "):'<div class="tmyl-search-bar__suggestions"></div>';return'\n    <div class="'.concat(m,'">\n      <form class="tmyl-search-bar__container" role="search">\n        <div class="tmyl-search-bar__input-wrapper">\n          ').concat(p,"\n          ").concat(v.length?'\n            <div class="tmyl-search-bar__actions">\n              '.concat(v.join(""),"\n            </div>\n          "):"","\n          ").concat(y,"\n        </div>\n        ").concat(g,"\n      </form>\n    </div>\n  ")}function Ce(e){const t={recent:'<svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path></svg>',suggestion:'<svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"></path></svg>',content:'<svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z" clip-rule="evenodd"></path></svg>',user:'<svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path></svg>'};return t[e]||t.suggestion}class _e{constructor(e){var t;this.element=e,this.form=e.querySelector(".tmyl-search-bar__container"),this.input=e.querySelector(".tmyl-search-bar__input input"),this.suggestions=e.querySelector(".tmyl-search-bar__suggestions"),this.state={value:(null===(t=this.input)||void 0===t?void 0:t.value)||"",isListening:!1,highlightedIndex:-1,recentSearches:this.getRecentSearches()},this.debounceTimer=null,this.recognition=null,this.setupEventListeners(),this.initializeVoiceSearch()}setupEventListeners(){this.form&&this.input&&(this.form.addEventListener("submit",this.handleSubmit.bind(this)),this.input.addEventListener("input",this.handleInput.bind(this)),this.input.addEventListener("keydown",this.handleKeydown.bind(this)),this.input.addEventListener("focus",this.handleFocus.bind(this)),this.input.addEventListener("blur",this.handleBlur.bind(this)),this.element.addEventListener("click",this.handleClick.bind(this)),this.suggestions&&(this.suggestions.addEventListener("click",this.handleSuggestionClick.bind(this)),this.suggestions.addEventListener("mouseover",this.handleSuggestionHover.bind(this))),document.addEventListener("click",this.handleDocumentClick.bind(this)))}handleSubmit(e){e.preventDefault();const t=this.input.value.trim();t&&(this.saveToRecentSearches(t),this.hideSuggestions(),this.dispatchCustomEvent("tmyl-search-submit",{query:t,suggestions:this.getCurrentSuggestions()}))}handleInput(e){const t=e.target.value;this.state.value=t,this.debounceTimer&&clearTimeout(this.debounceTimer),this.updateClearButtonVisibility(t),this.debounceTimer=setTimeout(()=>{this.dispatchCustomEvent("tmyl-search-input",{query:t,shouldFetchSuggestions:t.length>=2})},300)}handleKeydown(e){const t=this.getCurrentSuggestions();switch(e.key){case"ArrowDown":e.preventDefault(),this.highlightNextSuggestion(t.length);break;case"ArrowUp":e.preventDefault(),this.highlightPreviousSuggestion(t.length);break;case"Enter":this.state.highlightedIndex>=0&&t.length>0&&(e.preventDefault(),this.selectSuggestion(t[this.state.highlightedIndex]));break;case"Escape":this.hideSuggestions(),this.input.blur();break;case"Tab":this.hideSuggestions()}}handleFocus(e){this.state.value.length>=2&&this.showSuggestions(),this.dispatchCustomEvent("tmyl-search-focus",{query:this.state.value})}handleBlur(e){setTimeout(()=>{this.hideSuggestions()},150)}handleClick(e){var t;switch(null===(t=e.target.closest("[data-action]"))||void 0===t?void 0:t.getAttribute("data-action")){case"clear":this.clearSearch();break;case"voice":this.toggleVoiceSearch();break;case"submit":this.form.dispatchEvent(new Event("submit"))}}handleSuggestionClick(e){const t=e.target.closest(".tmyl-search-bar__suggestion");if(!t)return;const n=parseInt(t.getAttribute("data-suggestion-index")),a=this.getCurrentSuggestions();a[n]&&this.selectSuggestion(a[n])}handleSuggestionHover(e){const t=e.target.closest(".tmyl-search-bar__suggestion");if(!t)return;const n=parseInt(t.getAttribute("data-suggestion-index"));this.highlightSuggestion(n)}handleDocumentClick(e){this.element.contains(e.target)||this.hideSuggestions()}initializeVoiceSearch(){"webkitSpeechRecognition"in window&&(this.recognition=new webkitSpeechRecognition,this.recognition.continuous=!1,this.recognition.interimResults=!1,this.recognition.lang="en-US",this.recognition.onstart=()=>{this.state.isListening=!0,this.updateVoiceButtonState(!0),this.dispatchCustomEvent("tmyl-search-voice-start")},this.recognition.onresult=e=>{const t=e.results[0][0].transcript;this.input.value=t,this.state.value=t,this.updateClearButtonVisibility(t),this.dispatchCustomEvent("tmyl-search-voice-result",{transcript:t,confidence:e.results[0][0].confidence})},this.recognition.onend=()=>{this.state.isListening=!1,this.updateVoiceButtonState(!1),this.dispatchCustomEvent("tmyl-search-voice-end")},this.recognition.onerror=e=>{this.state.isListening=!1,this.updateVoiceButtonState(!1),this.dispatchCustomEvent("tmyl-search-voice-error",{error:e.error})})}toggleVoiceSearch(){this.recognition&&(this.state.isListening?this.recognition.stop():this.recognition.start())}showSuggestions(){this.suggestions&&this.suggestions.classList.add("tmyl-search-bar__suggestions--visible")}hideSuggestions(){this.suggestions&&this.suggestions.classList.remove("tmyl-search-bar__suggestions--visible"),this.state.highlightedIndex=-1,this.updateHighlightedSuggestion()}highlightNextSuggestion(e){this.state.highlightedIndex=Math.min(this.state.highlightedIndex+1,e-1),this.updateHighlightedSuggestion()}highlightPreviousSuggestion(e){this.state.highlightedIndex=Math.max(this.state.highlightedIndex-1,-1),this.updateHighlightedSuggestion()}highlightSuggestion(e){this.state.highlightedIndex=e,this.updateHighlightedSuggestion()}updateHighlightedSuggestion(){var e;((null===(e=this.suggestions)||void 0===e?void 0:e.querySelectorAll(".tmyl-search-bar__suggestion"))||[]).forEach((e,t)=>{t===this.state.highlightedIndex?e.classList.add("tmyl-search-bar__suggestion--highlighted"):e.classList.remove("tmyl-search-bar__suggestion--highlighted")})}selectSuggestion(e){this.input.value=e.text,this.state.value=e.text,this.hideSuggestions(),this.updateClearButtonVisibility(e.text),this.dispatchCustomEvent("tmyl-search-suggestion-select",{suggestion:e,query:e.text}),!1!==e.autoSubmit&&this.form.dispatchEvent(new Event("submit"))}getCurrentSuggestions(){var e;const t=(null===(e=this.suggestions)||void 0===e?void 0:e.querySelectorAll(".tmyl-search-bar__suggestion"))||[];return Array.from(t).map(e=>{var t,n;return{text:(null===(t=e.querySelector(".tmyl-search-bar__suggestion-text"))||void 0===t?void 0:t.textContent)||"",type:(null===(n=e.querySelector(".tmyl-search-bar__suggestion-type"))||void 0===n?void 0:n.textContent)||""}})}clearSearch(){this.input.value="",this.state.value="",this.hideSuggestions(),this.updateClearButtonVisibility(""),this.input.focus(),this.dispatchCustomEvent("tmyl-search-clear")}updateClearButtonVisibility(e){const t=this.element.querySelector('[data-action="clear"]');t&&(t.style.display=e?"flex":"none")}updateVoiceButtonState(e){const t=this.element.querySelector(".tmyl-search-bar__voice-button");t&&(e?t.classList.add("tmyl-search-bar__voice-button--listening"):t.classList.remove("tmyl-search-bar__voice-button--listening"))}getRecentSearches(){try{return JSON.parse(localStorage.getItem("tmyl-recent-searches"))||[]}catch(e){return[]}}saveToRecentSearches(e){const t=this.getRecentSearches().filter(t=>t!==e),n=[e,...t].slice(0,10);try{localStorage.setItem("tmyl-recent-searches",JSON.stringify(n))}catch(a){}}setValue(e){this.input.value=e,this.state.value=e,this.updateClearButtonVisibility(e)}getValue(){return this.state.value}focus(){this.input.focus()}blur(){this.input.blur()}dispatchCustomEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.element.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0,composed:!0}))}destroy(){this.debounceTimer&&clearTimeout(this.debounceTimer),this.recognition&&this.recognition.abort(),document.removeEventListener("click",this.handleDocumentClick)}}class Ee{constructor(){this.defaultProps={placeholder:"Search...",size:"md",variant:"primary",disabled:!1,loading:!1,voiceEnabled:!1,clearable:!0,showSubmitButton:!0,suggestions:[],showSuggestions:!1,maxSuggestions:5},this.sizes=["sm","md","lg","xl"],this.variants=["primary","secondary","ghost"],this.inputFactory=new x,this.buttonFactory=new P,this.ensureCSS()}ensureCSS(){}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,a.A)((0,a.A)({},this.defaultProps),e),n=document.createElement("div");n.innerHTML=Se(t);const s=n.firstElementChild,i=new _e(s);return s._controller=i,this.attachEventHandlers(s,t),s}attachEventHandlers(e,t){t.onSearch&&e.addEventListener("tmyl-search-submit",t.onSearch),t.onInput&&e.addEventListener("tmyl-search-input",t.onInput),t.onSuggestionSelect&&e.addEventListener("tmyl-search-suggestion-select",t.onSuggestionSelect),t.onVoiceStart&&e.addEventListener("tmyl-search-voice-start",t.onVoiceStart),t.onVoiceResult&&e.addEventListener("tmyl-search-voice-result",t.onVoiceResult),t.onClear&&e.addEventListener("tmyl-search-clear",t.onClear),t.onFocus&&e.addEventListener("tmyl-search-focus",t.onFocus)}createBasic(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)((0,a.A)({},e),{},{voiceEnabled:!1,showSubmitButton:!1,clearable:!1}))}createWithVoice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)((0,a.A)({},e),{},{voiceEnabled:!0}))}createWithSuggestions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)((0,a.A)({},e),{},{showSuggestions:!0,suggestions:e.suggestions||[]}))}createComplete(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)((0,a.A)({},e),{},{voiceEnabled:!0,showSuggestions:!0,clearable:!0,showSubmitButton:!0}))}createCompact(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)((0,a.A)({},e),{},{size:"sm",showSubmitButton:!1}))}createGlobalSearch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)({placeholder:"Search everything...",voiceEnabled:!0,showSuggestions:!0,clearable:!0,size:"lg"},e))}createContentSearch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)({placeholder:"Search content...",showSuggestions:!0,clearable:!0},e))}createQuickSearch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)({placeholder:"Quick search...",size:"sm",showSubmitButton:!1,clearable:!0},e))}update(e,t){return function(e,t){const n=e.querySelector(".tmyl-search-bar__container"),a=e.querySelector(".tmyl-search-bar__input input"),s=e.querySelector(".tmyl-search-bar__suggestions");if(n&&a){if(void 0!==t.value&&(a.value=t.value),void 0!==t.loading){const n=e.querySelector('[data-action="submit"]');n&&(t.loading?(n.classList.add("tmyl-button--loading"),n.disabled=!0):(n.classList.remove("tmyl-button--loading"),n.disabled=!1))}if(t.suggestions&&s){const e=t.showSuggestions&&t.suggestions.length>0;s.className="tmyl-search-bar__suggestions".concat(e?" tmyl-search-bar__suggestions--visible":""),e&&(s.innerHTML=t.suggestions.slice(0,t.maxSuggestions||5).map((e,t)=>'\n        <div class="tmyl-search-bar__suggestion" data-suggestion-index="'.concat(t,'" data-action="select-suggestion">\n          <div class="tmyl-search-bar__suggestion-icon">\n            ').concat(Ce(e.type),'\n          </div>\n          <div class="tmyl-search-bar__suggestion-text">').concat(e.text,"</div>\n          ").concat(e.type?'<div class="tmyl-search-bar__suggestion-type">'.concat(e.type,"</div>"):"","\n        </div>\n      ")).join(""))}if(void 0!==t.isListening){const n=e.querySelector(".tmyl-search-bar__voice-button");n&&(t.isListening?n.classList.add("tmyl-search-bar__voice-button--listening"):n.classList.remove("tmyl-search-bar__voice-button--listening"))}}}(e,t),e}attachController(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e._controller){const n=new _e(e,t);e._controller=n}return e._controller}createMultiple(e){return e.map(e=>this.create(e))}createWithRecentSearches(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.getRecentSearches().map(e=>({text:e,type:"recent"}));return this.create((0,a.A)((0,a.A)({},e),{},{suggestions:t,showSuggestions:!0}))}validateProps(e){const t=[];return e.size&&!this.sizes.includes(e.size)&&t.push("Invalid size: ".concat(e.size,". Must be one of: ").concat(this.sizes.join(", "))),e.variant&&!this.variants.includes(e.variant)&&t.push("Invalid variant: ".concat(e.variant,". Must be one of: ").concat(this.variants.join(", "))),e.maxSuggestions&&("number"!==typeof e.maxSuggestions||e.maxSuggestions<1)&&t.push("maxSuggestions must be a positive number"),t}makeAccessible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{label:n,describedBy:a,role:s="search",ariaExpanded:i,ariaLabel:o="Search"}=t,r=e.querySelector(".tmyl-search-bar__container");r&&(r.setAttribute("role",s),r.setAttribute("aria-label",o));const l=e.querySelector(".tmyl-search-bar__input input");return l&&(n&&l.setAttribute("aria-label",n),a&&l.setAttribute("aria-describedby",a),void 0!==i&&l.setAttribute("aria-expanded",i)),e}getRecentSearches(){try{return JSON.parse(localStorage.getItem("tmyl-recent-searches"))||[]}catch(e){return[]}}clearRecentSearches(){try{localStorage.removeItem("tmyl-recent-searches")}catch(e){}}createWithSearchService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.create((0,a.A)((0,a.A)({},t),{},{showSuggestions:!0}));return n.addEventListener("tmyl-search-input",async t=>{if(t.detail.shouldFetchSuggestions)try{const a=await e.getSuggestions(t.detail.query);this.update(n,{suggestions:a,showSuggestions:a.length>0})}catch(a){console.warn("Failed to fetch suggestions:",a)}}),n.addEventListener("tmyl-search-submit",async t=>{try{this.update(n,{loading:!0});const a=await e.search(t.detail.query);this.update(n,{loading:!1}),n.dispatchEvent(new CustomEvent("tmyl-search-results",{detail:{results:a,query:t.detail.query},bubbles:!0}))}catch(a){this.update(n,{loading:!1}),console.error("Search failed:",a)}}),n}}const Ae=new Ee,{create:Le,createBasic:xe,createWithVoice:Me,createWithSuggestions:ke,createComplete:Te,createCompact:ze,createGlobalSearch:Pe,createContentSearch:Ie,createQuickSearch:De}=Ae;function Ne(e){const{content:t={},variant:n="default",size:a="md",selectable:s=!1,selected:i=!1,disabled:o=!1,loading:r=!1,showActions:l=!0,highlightTerms:c=[],className:d=""}=e,{id:h,title:u="Untitled Content",description:m="",type:p="content",author:v="",date:g="",tags:y=[],stats:f={},actions:b=[],media:w=null,url:S=null}=t,C=["tmyl-content-card","tmyl-content-card--".concat(a),s&&"tmyl-content-card--selectable",i&&"tmyl-content-card--selected",o&&"tmyl-content-card--disabled",r&&"tmyl-content-card--loading",d].filter(Boolean).join(" "),_=e=>{if(!c.length||!e)return e;let t=e;return c.forEach(e=>{const n=new RegExp("(".concat(e,")"),"gi");t=t.replace(n,'<span class="tmyl-content-card__highlight">$1</span>')}),t},E="\n    ".concat(s?'<div class="tmyl-content-card__selection-indicator"></div>':"","\n    \n    ").concat(w?'\n      <div class="tmyl-content-card__media">\n        <img src="'.concat(w.url,'" alt="').concat(w.alt||u,'" loading="lazy" />\n        ').concat(w.duration?'\n          <div class="tmyl-content-card__media-overlay">\n            <div class="tmyl-content-card__media-info">'.concat(w.duration,"</div>\n          </div>\n        "):"","\n      </div>\n    "):"",'\n\n    <div class="tmyl-content-card__header">\n      <div class="tmyl-content-card__meta">\n        <div class="tmyl-content-card__type">\n          <div class="tmyl-content-card__type-icon">\n            ').concat(function(e){const t={article:'<svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"></path></svg>',document:'<svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z" clip-rule="evenodd"></path></svg>',video:'<svg viewBox="0 0 20 20" fill="currentColor"><path d="M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"></path></svg>',image:'<svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"></path></svg>',podcast:'<svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM15.657 6.343a1 1 0 010 1.414A4.98 4.98 0 0117 10a4.98 4.98 0 01-1.343 2.243 1 1 0 11-1.414-1.414A2.98 2.98 0 0015 10a2.98 2.98 0 00-.757-1.829 1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',content:'<svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg>'};return t[e]||t.content}(p),"\n          </div>\n          ").concat(p,"\n        </div>\n        ").concat(v?"<span>by ".concat(v,"</span>"):"","\n        ").concat(g?"<span>".concat(function(e){if("string"===typeof e){return new Date(e).toLocaleDateString()}return e.toLocaleDateString()}(g),"</span>"):"",'\n      </div>\n      \n      <h3 class="tmyl-content-card__title">\n        ').concat(S?'<a href="'.concat(S,'" target="_blank" rel="noopener noreferrer">'):"","\n        ").concat(_(u),"\n        ").concat(S?"</a>":"","\n      </h3>\n      \n      ").concat(m?'\n        <div class="tmyl-content-card__description tmyl-content-card__description--truncated">\n          '.concat(_(m),"\n        </div>\n      "):"","\n    </div>\n\n    ").concat(y.length||Object.keys(f).length?'\n      <div class="tmyl-content-card__details">\n        '.concat(y.length?'\n          <div class="tmyl-content-card__tags">\n            '.concat(y.map(e=>'\n              <span class="tmyl-content-card__tag">'.concat(e,"</span>\n            ")).join(""),"\n          </div>\n        "):"","\n        \n        ").concat(Object.keys(f).length?'\n          <div class="tmyl-content-card__stats">\n            '.concat(Object.entries(f).map(e=>{let[t,n]=e;return'\n              <div class="tmyl-content-card__stat">\n                <div class="tmyl-content-card__stat-icon">\n                  '.concat(function(e){const t={views:'<svg viewBox="0 0 20 20" fill="currentColor"><path d="M10 12a2 2 0 100-4 2 2 0 000 4z"></path><path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"></path></svg>',downloads:'<svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',likes:'<svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"></path></svg>',comments:'<svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg>',shares:'<svg viewBox="0 0 20 20" fill="currentColor"><path d="M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z"></path></svg>',duration:'<svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path></svg>',size:'<svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 4a1 1 0 011-1h4a1 1 0 010 2H6.414l2.293 2.293a1 1 0 11-1.414 1.414L5 6.414V8a1 1 0 01-2 0V4zm9 1a1 1 0 010-2h4a1 1 0 011 1v4a1 1 0 01-2 0V6.414l-2.293 2.293a1 1 0 11-1.414-1.414L13.586 5H12zm-9 7a1 1 0 012 0v1.586l2.293-2.293a1 1 0 111.414 1.414L6.414 15H8a1 1 0 010 2H4a1 1 0 01-1-1v-4zm13-1a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 010-2h1.586l-2.293-2.293a1 1 0 111.414-1.414L15 13.586V12a1 1 0 011-1z" clip-rule="evenodd"></path></svg>'};return t[e]||t.views}(t),"\n                </div>\n                <span>").concat(function(e,t){if("number"!==typeof t)return t;switch(e){case"size":return function(e){if(0===e)return"0 B";const t=1024,n=["B","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,a)).toFixed(1))+" "+n[a]}(t);case"duration":return function(e){if(e<60)return"".concat(e,"s");if(e<3600)return"".concat(Math.floor(e/60),"m ").concat(e%60,"s");const t=Math.floor(e/3600),n=Math.floor(e%3600/60);return"".concat(t,"h ").concat(n,"m")}(t);default:return t.toLocaleString()}}(t,n),"</span>\n              </div>\n            ")}).join(""),"\n          </div>\n        "):"","\n      </div>\n    "):"","\n\n    ").concat(l&&b.length?'\n      <div class="tmyl-content-card__footer">\n        <div class="tmyl-content-card__actions">\n          '.concat(b.map(e=>T({variant:e.variant||"ghost",size:"sm",text:e.label,icon:e.icon,disabled:o,"data-action":e.action,"data-content-id":h})).join(""),"\n        </div>\n      </div>\n    "):"","\n  ");return'\n    <div class="'.concat(C,'" data-content-id="').concat(h||"",'" ').concat(s?'tabindex="0"':"",">\n      ").concat(W({variant:n,size:a,interactive:s,className:"tmyl-content-card__card",children:E}),"\n    </div>\n  ")}function Be(e,t){if(e.querySelector(".tmyl-content-card__card")&&(void 0!==t.selected&&(t.selected?(e.classList.add("tmyl-content-card--selected"),e.setAttribute("aria-selected","true")):(e.classList.remove("tmyl-content-card--selected"),e.removeAttribute("aria-selected"))),void 0!==t.disabled&&(t.disabled?(e.classList.add("tmyl-content-card--disabled"),e.setAttribute("aria-disabled","true")):(e.classList.remove("tmyl-content-card--disabled"),e.removeAttribute("aria-disabled"))),void 0!==t.loading&&(t.loading?e.classList.add("tmyl-content-card--loading"):e.classList.remove("tmyl-content-card--loading")),t.highlightTerms)){[e.querySelector(".tmyl-content-card__title"),e.querySelector(".tmyl-content-card__description")].forEach(e=>{e&&e.dataset.originalText&&(e.innerHTML=function(e,t){if(!t.length||!e)return e;let n=e;return t.forEach(e=>{const t=new RegExp("(".concat(e,")"),"gi");n=n.replace(t,'<span class="tmyl-content-card__highlight">$1</span>')}),n}(e.dataset.originalText,t.highlightTerms))})}}function qe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{onSelect:n,onAction:s,onInteraction:i,onMediaError:o,onIntersection:r,selectable:l=!1,lazy:c=!0,trackInteractions:d=!0}=t,h={selected:!1,disabled:!1,loading:!1,highlightTerms:[],interacted:!1,visible:!1,mediaLoaded:!1};let u=null,m=null,p=null;function v(e){if(!e.target.closest(".tmyl-content-card__actions")&&!e.target.closest("a"))if(h.disabled)e.preventDefault();else{if(l){if(m)return clearTimeout(m),void(m=null);m=setTimeout(()=>{m=null,A()},300)}x("click")}}function g(t){t.target.closest(".tmyl-content-card__actions")||t.target.closest("a")||(h.disabled?t.preventDefault():(x("doubleClick"),i&&i({type:"doubleClick",element:e,contentId:M(),state:(0,a.A)({},h)})))}function y(e){if(!h.disabled)switch(e.key){case"Enter":case" ":e.preventDefault(),l&&A(),x("keyboard");break;case"Escape":h.selected&&L(!1)}}function f(){h.disabled||(e.classList.add("tmyl-content-card--hover"),x("hover"))}function b(){e.classList.remove("tmyl-content-card--hover"),e.classList.remove("tmyl-content-card--active")}function w(){h.disabled||e.classList.add("tmyl-content-card--active")}function S(){e.classList.remove("tmyl-content-card--active")}function C(t){h.disabled||(p=Date.now(),e.classList.add("tmyl-content-card--active"))}function _(t){e.classList.remove("tmyl-content-card--active"),p&&Date.now()-p>500&&(x("longPress"),i&&i({type:"longPress",element:e,contentId:M(),state:(0,a.A)({},h)})),p=null}function E(){e.classList.remove("tmyl-content-card--active"),p=null}function A(){L(!h.selected)}function L(t){h.selected!==t&&(h.selected=t,Be(e,{selected:t}),n&&n({selected:t,contentId:M(),element:e,state:(0,a.A)({},h)}))}function x(e){d&&(h.interacted||"visible"===e||(h.interacted=!0),console.debug("Content card interaction: ".concat(e),{contentId:M(),type:e,timestamp:Date.now()}))}function M(){return e.dataset.contentId}const k={getState:()=>(0,a.A)({},h),setSelected:L,setDisabled:function(t){h.disabled!==t&&(h.disabled=t,Be(e,{disabled:t}))},setLoading:function(t){h.loading!==t&&(h.loading=t,Be(e,{loading:t}))},setHighlightTerms:function(t){h.highlightTerms=t,Be(e,{highlightTerms:t})},toggleSelection:A,destroy:function(){u&&(u.disconnect(),u=null),m&&(clearTimeout(m),m=null)}};return l&&(e.addEventListener("click",v),e.addEventListener("keydown",y),e.addEventListener("dblclick",g)),l&&(e.setAttribute("tabindex","0"),e.setAttribute("role","option")),e.addEventListener("mouseenter",f),e.addEventListener("mouseleave",b),e.addEventListener("mousedown",w),e.addEventListener("mouseup",S),e.addEventListener("touchstart",C,{passive:!0}),e.addEventListener("touchend",_),e.addEventListener("touchcancel",E),function(){const t=e.querySelector(".tmyl-content-card__media img");t&&(t.addEventListener("load",()=>{t.classList.add("tmyl-content-card__media--loaded")}),t.addEventListener("error",()=>{t.classList.add("tmyl-content-card__media--error"),o&&o({element:t,src:t.src,cardElement:e})}))}(),function(){const t=M(),n=e.querySelector(".tmyl-content-card__title");t&&e.setAttribute("data-content-id",t),n&&(e.setAttribute("aria-labelledby","content-title-".concat(t)),n.id="content-title-".concat(t)),l&&e.setAttribute("aria-selected","false")}(),e.querySelectorAll(".tmyl-content-card__actions .tmyl-button").forEach(t=>{!function(e){new z(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(t,{onClick:t=>{const n=t.dataset.action,a=t.dataset.contentId;s&&s({action:n,contentId:a,element:t,cardElement:e})}})}),function(){if(!c)return;const t=e.querySelector(".tmyl-content-card__media img");if(!t)return;const n=t.src;t.dataset.src=n,t.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjFmNWY5Ii8+PC9zdmc+";const a=()=>{if(h.mediaLoaded)return;const a=new Image;a.onload=()=>{t.src=n,t.classList.add("tmyl-content-card__media--loaded"),h.mediaLoaded=!0},a.onerror=()=>{t.classList.add("tmyl-content-card__media--error"),o&&o({element:t,src:n,cardElement:e})},a.src=n};!function(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}(e)?e._loadImage=a:a()}(),"undefined"!==typeof IntersectionObserver&&(u=new IntersectionObserver(t=>{t.forEach(t=>{const n=h.visible;h.visible=t.isIntersecting,t.isIntersecting&&!n?(e.classList.add("tmyl-content-card--visible"),e._loadImage&&(e._loadImage(),delete e._loadImage),x("visible"),r&&r({type:"visible",element:e,contentId:M(),state:(0,a.A)({},h)})):!t.isIntersecting&&n&&(e.classList.remove("tmyl-content-card--visible"),r&&r({type:"hidden",element:e,contentId:M(),state:(0,a.A)({},h)}))})},{threshold:.1,rootMargin:"50px"}),u.observe(e)),k}const Fe={createSelectionManager(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{multiSelect:n=!1,onSelectionChange:a}=t,s=new Set;return{selectCard(e){n||s.clear(),s.add(e),this.updateUI()},deselectCard(e){s.delete(e),this.updateUI()},toggleCard(e){s.has(e)?this.deselectCard(e):this.selectCard(e)},selectAll(){e.forEach(e=>{const t=e.dataset.contentId;t&&s.add(t)}),this.updateUI()},deselectAll(){s.clear(),this.updateUI()},getSelection:()=>Array.from(s),updateUI(){e.forEach(e=>{const t=e.dataset.contentId,n=e._contentCardController;n&&t&&n.setSelected(s.has(t))}),a&&a(Array.from(s))}}},createGridNavigation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{wrap:n=!0,enterAction:a="select",onNavigate:s}=t;let i=0;function o(){return Array.from(e.querySelectorAll(".tmyl-content-card"))}function r(e){const t=o()[e];t&&(t.focus(),i=e,s&&s(t,e))}return e.addEventListener("keydown",t=>{const a=o();if(!a.length)return;let s=i;switch(t.key){case"ArrowRight":t.preventDefault(),s=i+1,s>=a.length&&(s=n?0:a.length-1);break;case"ArrowLeft":t.preventDefault(),s=i-1,s<0&&(s=n?a.length-1:0);break;case"ArrowDown":t.preventDefault();const o=a[0].offsetWidth,r=e.offsetWidth,l=Math.floor(r/o);s=i+l,s>=a.length&&(s=n?s%a.length:a.length-1);break;case"ArrowUp":t.preventDefault();const c=a[0].offsetWidth,d=e.offsetWidth,h=Math.floor(d/c);s=i-h,s<0&&(s=n?a.length+s:0);break;case"Home":t.preventDefault(),s=0;break;case"End":t.preventDefault(),s=a.length-1}s!==i&&r(s)}),{focusCard:r,getCurrentIndex:()=>i,getCardCount:()=>o().length}}};function He(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{content:t={},variant:n="default",size:s="md",selectable:i=!1,selected:o=!1,disabled:r=!1,loading:l=!1,showActions:c=!0,highlightTerms:d=[],lazy:h=!0,trackInteractions:u=!0,className:m="",onSelect:p,onAction:v,onInteraction:g,onMediaError:y,onIntersection:f,container:b=null}=e;let w=null,S=null;function C(){const e=Ne({content:t,variant:n,size:s,selectable:i,selected:o,disabled:r,loading:l,showActions:c,highlightTerms:d,className:m}),a=document.createElement("div");return a.innerHTML=e,w=a.firstElementChild,w}function _(){if(w)return S=qe(w,{onSelect:p,onAction:v,onInteraction:g,onMediaError:y,onIntersection:f,selectable:i,lazy:h,trackInteractions:u}),w._contentCardController=S,S}return{render:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;if(!e)throw new Error("Container element required for rendering");return w||C(),S||_(),e.appendChild(w),w},update:function(t){if(w&&S&&(void 0!==t.selected&&S.setSelected(t.selected),void 0!==t.disabled&&S.setDisabled(t.disabled),void 0!==t.loading&&S.setLoading(t.loading),void 0!==t.highlightTerms&&S.setHighlightTerms(t.highlightTerms),t.content||t.variant||t.size||t.showActions)){const n=w.parentNode,s=He((0,a.A)((0,a.A)((0,a.A)({},e),t),{},{container:null})).getElement();n&&n.replaceChild(s,w),S&&S.destroy(),w=s,S=w._contentCardController}},destroy:function(){S&&(S.destroy(),S=null),w&&w.parentNode&&w.parentNode.removeChild(w),w=null},getElement:function(){return w||(C(),_()),w},getController:function(){return!S&&w&&_(),S},get props(){return{content:t,variant:n,size:s,selectable:i,selected:o,disabled:r,loading:l,showActions:c,highlightTerms:d,className:m}}}}function Re(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{items:t=[],cardProps:n={},gridProps:s={},selectionManager:i=null,navigationEnabled:o=!0,lazy:r=!0,className:l="",container:c=null}=e;let d=null,h=new Map,u=null,m=null;function p(){return d=document.createElement("div"),d.className=["tmyl-content-card-grid",l].filter(Boolean).join(" "),Object.entries(s).forEach(e=>{let[t,n]=e;t.startsWith("data-")||t.startsWith("aria-")?d.setAttribute(t,n):"style"===t&&Object.assign(d.style,n)}),d}function v(){if(!i)return;const e=Array.from(d.querySelectorAll(".tmyl-content-card"));return u=Fe.createSelectionManager(e,i),u}function g(){if(o&&d)return m=Fe.createGridNavigation(d,{wrap:!0,enterAction:"select",onNavigate:(e,t)=>{e.scrollIntoView({behavior:"smooth",block:"nearest"})}}),m}return{render:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;if(!e)throw new Error("Container element required for rendering grid");return d||(p(),d||p(),h.forEach(e=>e.destroy()),h.clear(),d.innerHTML="",t.forEach((e,t)=>{const s=He((0,a.A)((0,a.A)({},n),{},{content:e,lazy:r&&t>20,container:null}));s.render(d),h.set(e.id||t,s)})),e.appendChild(d),v(),g(),d},destroy:function(){h.forEach(e=>e.destroy()),h.clear(),d&&d.parentNode&&d.parentNode.removeChild(d),d=null,u=null,m=null},addItems:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"end";e.forEach((e,s)=>{const i=He((0,a.A)((0,a.A)({},n),{},{content:e,container:null})),o=i.getElement();"start"===t?d.insertBefore(o,d.firstChild):d.appendChild(o),h.set(e.id||"new-".concat(Date.now(),"-").concat(s),i)}),u&&v(),m&&g()},removeItems:function(e){e.forEach(e=>{const t=h.get(e);t&&(t.destroy(),h.delete(e))})},filterCards:function(e){h.forEach((t,n)=>{const a=t.getElement(),s=e(t.props.content,n);a.style.display=s?"":"none"})},setHighlightTerms:function(e){h.forEach(t=>{const n=t.getController();n&&n.setHighlightTerms(e)})},updateLayout:function(e){d&&(Object.assign(s,e),Object.entries(e).forEach(e=>{let[t,n]=e;t.startsWith("data-")||t.startsWith("aria-")?d.setAttribute(t,n):"style"===t&&Object.assign(d.style,n)}))},getSelection:function(){return u?u.getSelection():[]},getElement:()=>d,getCards:()=>h,getCard:e=>h.get(e)}}const Ve=new class{constructor(){this.factories=new Map,this.instances=new Map,this.registerDefaults()}registerDefaults(){this.register("search-bar",Ee),this.register("content-card",He),this.register("content-card-grid",Re)}register(e,t){return this.factories.set(e,t),this}create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const a=this.factories.get(e);if(!a)throw new Error("Unknown molecular component type: ".concat(e));let s;return s="function"===typeof a&&a.prototype&&a.prototype.constructor===a?new a(t):a(t),n&&this.instances.set(n,s),s}getFactory(e){return this.factories.get(e)}getInstance(e){return this.instances.get(e)}getTypes(){return Array.from(this.factories.keys())}destroyInstance(e){const t=this.instances.get(e);t&&"function"===typeof t.destroy&&t.destroy(),this.instances.delete(e)}destroyAll(){this.instances.forEach((e,t)=>{this.destroyInstance(t)}),this.instances.clear()}setSharedFoundation(e,t){this.factories.forEach((n,a)=>{try{const a=n({});a&&"function"===typeof a.setSharedFoundation&&a.setSharedFoundation(e,t)}catch(s){console.warn("Factory ".concat(a," does not support setSharedFoundation:"),s.message)}})}};function je(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Ve.create(e,t,n)}function Oe(e){let{results:t,loading:n,error:a,resultsCount:s}=e;return a?Ge(a):n?Ue():0===s?'\n    <div class="tmyl-search-interface__empty" role="status" aria-live="polite">\n      <div class="tmyl-search-interface__empty-icon">\n        <svg viewBox="0 0 24 24" fill="currentColor">\n          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n        </svg>\n      </div>\n      <h3 class="tmyl-search-interface__empty-title">No results found</h3>\n      <p class="tmyl-search-interface__empty-description">\n        Try adjusting your search terms or filters to find what you\'re looking for.\n      </p>\n    </div>\n  ':function(e){if(!e.length)return'\n    <div class="tmyl-search-interface__empty" role="status" aria-live="polite">\n      <div class="tmyl-search-interface__empty-icon">\n        <svg viewBox="0 0 24 24" fill="currentColor">\n          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n        </svg>\n      </div>\n      <h3 class="tmyl-search-interface__empty-title">No results found</h3>\n      <p class="tmyl-search-interface__empty-description">\n        Try adjusting your search terms or filters to find what you\'re looking for.\n      </p>\n    </div>\n  ';return'\n    <div class="tmyl-content-grid" role="grid" aria-label="Search results">\n      '.concat(e.map(e=>Ne({content:e,variant:"default",size:"md",selectable:!0,showActions:!0})).join(""),"\n    </div>\n  ")}(t)}function Ue(){return'\n    <div class="tmyl-search-interface__loading" role="status" aria-live="polite">\n      <div class="tmyl-content-grid">\n        '.concat(Array.from({length:6},()=>'\n    <div class="tmyl-content-card tmyl-content-card--loading">\n      <div class="tmyl-content-card__loading-placeholder">\n        <div class="tmyl-loading-skeleton tmyl-loading-skeleton--title"></div>\n        <div class="tmyl-loading-skeleton tmyl-loading-skeleton--text"></div>\n        <div class="tmyl-loading-skeleton tmyl-loading-skeleton--text"></div>\n      </div>\n    </div>\n  ').join(""),"\n      </div>\n    </div>\n  ")}function Ge(e){return'\n    <div class="tmyl-search-interface__error" role="alert">\n      <div class="tmyl-search-interface__empty-icon">\n        <svg viewBox="0 0 24 24" fill="currentColor">\n          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>\n        </svg>\n      </div>\n      <h3 class="tmyl-search-interface__empty-title">Search Error</h3>\n      <p class="tmyl-search-interface__empty-description">\n        '.concat(e.message||"An error occurred while searching. Please try again.","\n      </p>\n      ").concat(T({variant:"primary",size:"sm",text:"Try Again","data-action":"retry"}),"\n    </div>\n  ")}function We(e){return 0===e?"No results":1===e?"1 result":e<1e3?"".concat(e," results"):e<1e6?"".concat((e/1e3).toFixed(1),"K results"):"".concat((e/1e6).toFixed(1),"M results")}function Ke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{searchAPI:n,initialQuery:s="",initialFilters:i={},debounceMs:o=300,pageSize:r=20,enableVoiceSearch:l=!0,enableFiltering:c=!0,enableSorting:d=!0,onSearch:h,onResults:u,onError:m,onSelection:p,trackAnalytics:v=!0}=t,g={query:s,filters:(0,a.A)({},i),results:[],totalCount:0,currentPage:1,loading:!1,error:null,selectedItems:new Set,sortBy:"relevance",sortOrder:"desc",viewMode:"grid"};let y=null,f=null,b=null,w=null;function S(e){return je("search-bar",{value:g.query,showVoiceInput:l,onSearch:_,onVoiceSearch:A,onClear:x,container:null})._controller}function C(){f&&(f.element.addEventListener("click",e=>{const t=e.target.closest(".tmyl-content-card");if(!t)return;const n=t.dataset.contentId,a=e.target.closest(".tmyl-content-card__actions .tmyl-button");a?function(e,t){const n=g.results.find(t=>t.id===e);if(!n)return;switch(t){case"view":!function(e){e.url&&window.open(e.url,"_blank")}(n);break;case"download":!function(e){if(e.downloadUrl||e.url){const t=document.createElement("a");t.href=e.downloadUrl||e.url,t.download=e.title||"download",t.click()}}(n);break;case"share":!function(e){navigator.share?navigator.share({title:e.title,text:e.description,url:e.url}):H(e.url||e.title)}(n);break;case"favorite":!function(e){console.log("Toggle favorite:",e.id)}(n)}v&&F("content_action",{action:t,contentId:e,contentType:n.type})}(n,a.dataset.action):t.classList.contains("tmyl-content-card--selectable")&&k(n,t)}),f.element.addEventListener("keydown",T))}function _(e){g.query=e,b&&clearTimeout(b),b=setTimeout(()=>{z()},o)}function E(e){_(e.detail.query)}function A(e){g.query=e,z(),v&&F("voice_search",{transcript:e})}function L(e){A(e.detail.transcript)}function x(){g.query="",g.results=[],g.totalCount=0,P()}function M(e){x()}function k(e,t){g.selectedItems.has(e)?(g.selectedItems.delete(e),t.classList.remove("tmyl-content-card--selected")):(g.selectedItems.add(e),t.classList.add("tmyl-content-card--selected")),q(),p&&p(Array.from(g.selectedItems))}function T(e){const t=e.target.closest(".tmyl-content-card");if(t)switch(e.key){case"Enter":case" ":e.preventDefault(),k(t.dataset.contentId,t)}}async function z(){w&&w.abort(),w=new AbortController;try{I(!0),D(null);const e={query:g.query,filters:g.filters,sortBy:g.sortBy,sortOrder:g.sortOrder,page:g.currentPage,pageSize:r,signal:w.signal};let t,a;if(n){const s=await n(e);t=s.results||s.data||[],a=s.totalCount||s.total||t.length}else{if(!h)throw new Error("No search API or handler provided");{const n=await h(e);t=n.results||n.data||[],a=n.totalCount||n.total||t.length}}g.results=t,g.totalCount=a,P(),u&&u(t,a),v&&F("search_performed",{query:g.query,filters:g.filters,resultCount:a})}catch(e){if("AbortError"===e.name)return;console.error("Search error:",e),D(e),m&&m(e)}finally{I(!1),w=null}}function P(){!function(e,t,n){const a=e.querySelector(".tmyl-search-interface__content-grid"),s=e.querySelector(".tmyl-search-interface__results-count");a&&(a.innerHTML=Oe({results:t,loading:!1,error:null,resultsCount:n})),s&&(s.textContent=We(n))}(e,g.results,g.totalCount),C()}function I(t){g.loading=t,function(e,t){const n=e.querySelector(".tmyl-search-interface__content-grid");t?(e.classList.add("tmyl-search-interface--loading"),n&&(n.innerHTML=Ue())):e.classList.remove("tmyl-search-interface--loading")}(e,t)}function D(t){g.error=t,function(e,t){const n=e.querySelector(".tmyl-search-interface__content-grid");t?(e.classList.add("tmyl-search-interface--error"),n&&(n.innerHTML=Ge(t))):e.classList.remove("tmyl-search-interface--error")}(e,t)}function P(e){!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;g.results=Array.isArray(e)?e:[],g.totalCount=null!==t?t:g.results.length,P(),I(!1)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}function N(){g.results.forEach(e=>{g.selectedItems.add(e.id)}),q(),p&&p(Array.from(g.selectedItems))}function B(){g.selectedItems.clear(),q(),p&&p([])}function q(){e.querySelectorAll(".tmyl-content-card").forEach(e=>{const t=e.dataset.contentId,n=g.selectedItems.has(t);e.classList.toggle("tmyl-content-card--selected",n),e.setAttribute("aria-selected",n)})}function F(e,t){console.debug("Analytics event:",e,t)}function H(e){navigator.clipboard&&navigator.clipboard.writeText(e)}const R={getState:()=>(0,a.A)({},g),getResults:()=>g.results,getSelection:()=>Array.from(g.selectedItems),search:e=>{g.query=e,z()},setFilters:e=>{g.filters=(0,a.A)({},e),z()},clearFilters:()=>{g.filters={},z()},refresh:()=>z(),selectAll:N,clearSelection:B,destroy:()=>{w&&w.abort(),b&&clearTimeout(b)}};return function(){const t=e.querySelector(".tmyl-search-interface__search-bar .tmyl-search-bar"),n=e.querySelector(".tmyl-search-interface__content-grid");t&&(y={element:t,controller:t._searchBarController||S()}),n&&(f={element:n,selection:new Set})}(),y&&(y.element.addEventListener("tmyl:search",E),y.element.addEventListener("tmyl:voice-search",L),y.element.addEventListener("tmyl:clear",M)),e.querySelectorAll("[data-filter]").forEach(e=>{const t=e.dataset.filter;e.addEventListener("change",e=>{!function(e,t,n){void 0!==n?(g.filters[e]||(g.filters[e]=[]),n?g.filters[e].push(t):g.filters[e]=g.filters[e].filter(e=>e!==t)):g.filters[e]=t,z()}(t,e.target.value,e.target.checked)})}),e.querySelectorAll(".tmyl-search-interface__results-actions .tmyl-button").forEach(t=>{t.addEventListener("click",t=>{const n=t.target.dataset.action,s=t.target.dataset.view;var i;s?(i=s,g.viewMode=i,f&&(f.element.className=f.element.className.replace(/tmyl-content-grid--\w+/g,"").concat(" tmyl-content-grid--".concat(i))),e.querySelectorAll("[data-view]").forEach(e=>{e.classList.toggle("tmyl-button--active",e.dataset.view===i)})):n&&function(t){switch(t){case"filter":!function(){const t=e.querySelector(".tmyl-search-interface__filters");t&&(t.style.display="none"===t.style.display?"":"none")}();break;case"sort":console.log("Sort menu opened");break;case"export":!function(){const e=g.results.filter(e=>g.selectedItems.has(e.id)),t=e.length>0?e:g.results;!function(e,t,n){const a=new Blob([e],{type:n}),s=URL.createObjectURL(a),i=document.createElement("a");i.href=s,i.download=t,i.click(),URL.revokeObjectURL(s)}(function(e){const t=["Title","Description","Type","URL"],n=e.map(e=>[e.title||"",e.description||"",e.type||"",e.url||""]);return[t,...n].map(e=>e.map(e=>'"'.concat(e.replace(/"/g,'""'),'"')).join(",")).join("\n")}(t),"search-results.csv","text/csv")}();break;case"share":!function(){const e=function(){const e=new URLSearchParams((0,a.A)({q:g.query},g.filters));return"".concat(window.location.origin).concat(window.location.pathname,"?").concat(e)}();navigator.share?navigator.share({title:"Search Results",url:e}):H(e)}()}}(n)})}),C(),e.addEventListener("keydown",t=>{(t.ctrlKey||t.metaKey)&&"f"===t.key&&(t.preventDefault(),function(){const t=e.querySelector(".tmyl-search-bar__input");t&&t.focus()}()),(t.ctrlKey||t.metaKey)&&"a"===t.key&&(t.preventDefault(),N()),"Escape"===t.key&&B()}),g.query&&z(),R}function Xe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{title:t="",description:n="",searchProps:s={},filters:i=[],initialQuery:o="",initialFilters:r={},searchAPI:l=null,onSearch:c=null,onResults:d=null,onError:h=null,onSelection:u=null,showHeader:m=!0,showFilters:p=!1,showResultsActions:v=!0,layout:g="vertical",size:y="default",className:f="",debounceMs:b=300,pageSize:w=20,enableVoiceSearch:S=!0,enableFiltering:C=!0,enableSorting:_=!0,trackAnalytics:E=!0,container:A=null}=e;let L=null,x=null,M=new Map;function k(){const e=function(e){const{title:t="",description:n="",searchProps:s={},resultsCount:i=0,results:o=[],loading:r=!1,error:l=null,showHeader:c=!0,showFilters:d=!1,filters:h=[],showResultsActions:u=!0,layout:m="vertical",size:p="default",className:v=""}=e,g=["tmyl-search-interface","tmyl-search-interface--".concat(m),"tmyl-search-interface--".concat(p),r&&"tmyl-search-interface--loading",l&&"tmyl-search-interface--error",v].filter(Boolean).join(" ");return'\n    <div class="'.concat(g,'">\n      ').concat(c?'\n        <div class="tmyl-search-interface__header">\n          '.concat(t?'<h2 class="tmyl-search-interface__title">'.concat(t,"</h2>"):"","\n          ").concat(n?'<p class="tmyl-search-interface__description">'.concat(n,"</p>"):"","\n        </div>\n      "):"",'\n\n      <div class="tmyl-search-interface__controls">\n        <div class="tmyl-search-interface__search-bar">\n          ').concat(Se((0,a.A)({placeholder:"Search content...",showVoiceInput:!0,showAdvancedFilters:!1},s)),"\n        </div>\n\n        ").concat(d&&h.length?'\n          <div class="tmyl-search-interface__filters">\n            '.concat(h.map(e=>function(e){const{type:t,label:n,options:a=[],selected:s=[]}=e;switch(t){case"select":return'\n        <div class="tmyl-search-interface__filter-group">\n          <label class="tmyl-search-interface__filter-label">'.concat(n,'</label>\n          <select class="tmyl-filter-select" data-filter="').concat(e.key,'">\n            <option value="">All ').concat(n,"</option>\n            ").concat(a.map(e=>'\n              <option value="'.concat(e.value,'" ').concat(s.includes(e.value)?"selected":"",">\n                ").concat(e.label,"\n              </option>\n            ")).join(""),"\n          </select>\n        </div>\n      ");case"checkbox":return'\n        <div class="tmyl-search-interface__filter-group">\n          <span class="tmyl-search-interface__filter-label">'.concat(n,'</span>\n          <div class="tmyl-filter-checkboxes">\n            ').concat(a.map(t=>'\n              <label class="tmyl-filter-checkbox">\n                <input type="checkbox" value="'.concat(t.value,'" ').concat(s.includes(t.value)?"checked":"",' data-filter="').concat(e.key,'">\n                <span>').concat(t.label,"</span>\n              </label>\n            ")).join(""),"\n          </div>\n        </div>\n      ");case"radio":return'\n        <div class="tmyl-search-interface__filter-group">\n          <span class="tmyl-search-interface__filter-label">'.concat(n,'</span>\n          <div class="tmyl-filter-radios">\n            ').concat(a.map(t=>'\n              <label class="tmyl-filter-radio">\n                <input type="radio" name="'.concat(e.key,'" value="').concat(t.value,'" ').concat(s.includes(t.value)?"checked":"",">\n                <span>").concat(t.label,"</span>\n              </label>\n            ")).join(""),"\n          </div>\n        </div>\n      ");default:return""}}(e)).join(""),"\n          </div>\n        "):"",'\n      </div>\n\n      <div class="tmyl-search-interface__results">\n        ').concat(u||i>0?'\n          <div class="tmyl-search-interface__results-header">\n            '.concat(i>0?'\n              <div class="tmyl-search-interface__results-count">\n                '.concat(We(i),"\n              </div>\n            "):"","\n            \n            ").concat(u?'\n              <div class="tmyl-search-interface__results-actions">\n                '.concat(T({variant:"ghost",size:"sm",icon:"grid","aria-label":"Grid view","data-view":"grid"}),"\n                ").concat(T({variant:"ghost",size:"sm",icon:"list","aria-label":"List view","data-view":"list"}),"\n                ").concat(T({variant:"ghost",size:"sm",icon:"filter","aria-label":"Filter options","data-action":"filter"}),"\n                ").concat(T({variant:"ghost",size:"sm",icon:"sort","aria-label":"Sort options","data-action":"sort"}),"\n              </div>\n            "):"","\n          </div>\n        "):"",'\n\n        <div class="tmyl-search-interface__content-grid">\n          ').concat(Oe({results:o,loading:r,error:l,resultsCount:i}),"\n        </div>\n      </div>\n    </div>\n  ")}({title:t,description:n,searchProps:(0,a.A)({value:o,showVoiceInput:S},s),showHeader:m,showFilters:p,filters:i,showResultsActions:v,layout:g,size:y,className:f,resultsCount:0,results:[],loading:!1,error:null}),r=document.createElement("div");return r.innerHTML=e,L=r.firstElementChild,L}function z(){if(!L)return;const e=L.querySelector(".tmyl-search-interface__search-bar");if(e){const t=je("search-bar",(0,a.A)({value:o,showVoiceInput:S,showAdvancedFilters:!1,container:e},s));M.set("searchBar",t)}return M}function P(){if(L)return x=Ke(L,{searchAPI:l,initialQuery:o,initialFilters:r,debounceMs:b,pageSize:w,enableVoiceSearch:S,enableFiltering:C,enableSorting:_,onSearch:c,onResults:d,onError:h,onSelection:u,trackAnalytics:E}),L._searchInterfaceController=x,x}function I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;x&&x.setResults(e,t)}function D(){M.forEach(e=>{e&&"function"===typeof e.destroy&&e.destroy()}),M.clear(),x&&(x.destroy(),x=null)}return{render:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;if(!e)throw new Error("Container element required for rendering");return L||k(),e.appendChild(L),z(),x||P(),L},update:function(t){if(L&&x&&(void 0!==t.filters&&x.setFilters(t.filters),void 0!==t.query&&x.search(t.query),t.layout||t.size||void 0!==t.showFilters)){const n=L.parentNode,s=Xe((0,a.A)((0,a.A)((0,a.A)({},e),t),{},{container:null})).getElement();n&&n.replaceChild(s,L),D(),L=s,x=L._searchInterfaceController}},destroy:function(){D(),L&&L.parentNode&&L.parentNode.removeChild(L),L=null},search:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x&&(x.search(e),Object.keys(t).length>0&&x.setFilters(t))},clear:function(){x&&(x.search(""),x.clearFilters(),x.clearSelection())},getResults:function(){return x?x.getResults():[]},getSelection:function(){return x?x.getSelection():[]},getState:function(){return x?x.getState():{}},setResults:I,updateResults:function(e){I(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)},setLoading:function(e){x&&x.setLoading(e)},getElement:function(){return L||(k(),z(),P()),L},getController:function(){return!x&&L&&P(),x},get props(){return{title:t,description:n,searchProps:s,filters:i,initialQuery:o,initialFilters:r,showHeader:m,showFilters:p,showResultsActions:v,layout:g,size:y,className:f}}}}const Qe={COMMON:{name:"Common",color:"#6b7280",borderColor:"#d1d5db",glow:!1},UNCOMMON:{name:"Uncommon",color:"#16a34a",borderColor:"#86efac",glow:!1},RARE:{name:"Rare",color:"#2563eb",borderColor:"#93c5fd",glow:!0},EPIC:{name:"Epic",color:"#7c3aed",borderColor:"#c4b5fd",glow:!0},LEGENDARY:{name:"Legendary",color:"#f59e0b",borderColor:"#fcd34d",glow:!0,gradient:!0}},Ye={TRADING:{name:"Trading",icon:"\ud83d\udcc8",description:"Trading activity achievements"},LEARNING:{name:"Learning",icon:"\ud83c\udf93",description:"Educational milestone achievements"},SOCIAL:{name:"Social",icon:"\ud83d\udc65",description:"Community engagement achievements"},STREAKS:{name:"Streaks",icon:"\ud83d\udd25",description:"Consistency and streak achievements"},MILESTONES:{name:"Milestones",icon:"\ud83c\udfc6",description:"Major milestone achievements"}},Je={first_trade:{id:"first_trade",title:"First Trade",description:"Complete your first trade",icon:"\ud83d\udcb0",category:"TRADING",rarity:"COMMON",points:100,requirements:{type:"count",target:1,metric:"trades_completed"}},early_bird:{id:"early_bird",title:"Early Bird",description:"Trade before 9 AM",icon:"\ud83c\udf05",category:"TRADING",rarity:"UNCOMMON",points:150,requirements:{type:"condition",condition:"trade_before_9am"}},knowledge_seeker:{id:"knowledge_seeker",title:"Knowledge Seeker",description:"Complete 10 learning modules",icon:"\ud83d\udcda",category:"LEARNING",rarity:"RARE",points:300,requirements:{type:"count",target:10,metric:"modules_completed"}},community_leader:{id:"community_leader",title:"Community Leader",description:"Help 50 community members",icon:"\ud83d\udc51",category:"SOCIAL",rarity:"EPIC",points:500,requirements:{type:"count",target:50,metric:"members_helped"}},trading_master:{id:"trading_master",title:"Trading Master",description:"Achieve 90% win rate over 100 trades",icon:"\ud83c\udfaf",category:"TRADING",rarity:"LEGENDARY",points:1e3,requirements:{type:"complex",conditions:[{metric:"trades_completed",operator:">=",value:100},{metric:"win_rate",operator:">=",value:.9}]}}},Ze={types:{LINEAR:"linear",CIRCULAR:"circular",STEPS:"steps"},sizes:{SMALL:"small",MEDIUM:"medium",LARGE:"large"},colors:{PRIMARY:"primary",SUCCESS:"success",WARNING:"warning",DANGER:"danger"},animations:{enabled:!0,duration:300,easing:"ease"},defaults:{type:"LINEAR",size:"MEDIUM",color:"PRIMARY",showPercentage:!0,animated:!0},formatters:{percentage:(e,t)=>"".concat(Math.round(e/t*100),"%"),count:(e,t)=>"".concat(e,"/").concat(t),xp:(e,t)=>"".concat(e," XP / ").concat(t," XP"),level:(e,t)=>"Level ".concat(e),custom:(e,t,n)=>n.replace("{value}",e).replace("{total}",t)}},$e={types:{XP:{name:"XP Gained",icon:"\u2b50",duration:3e3,sound:"xp_gain.mp3"},ACHIEVEMENT:{name:"Achievement Unlocked",icon:"\ud83c\udfc6",duration:5e3,sound:"achievement.mp3"},LEVEL:{name:"Level Up",icon:"\ud83d\udcc8",duration:4e3,sound:"level_up.mp3"},BADGE:{name:"Badge Earned",icon:"\ud83c\udf96\ufe0f",duration:4e3,sound:"badge.mp3"}},positions:{TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",CENTER:"center"},defaults:{position:"TOP_RIGHT",duration:3e3,closable:!0,sound:!0,animation:!0},limits:{maxVisible:3,queueSize:10,minDisplayTime:1e3},templates:{xp_gained:{title:"XP Gained!",message:"You earned {amount} XP",type:"XP"},achievement_unlocked:{title:"Achievement Unlocked!",message:"{achievement_name}",type:"ACHIEVEMENT"},level_up:{title:"Level Up!",message:"You reached level {level}",type:"LEVEL"},badge_earned:{title:"Badge Earned!",message:"You earned the {badge_name} badge",type:"BADGE"}}},et={baseXP:1e3,multiplier:1.5,maxLevel:100,sources:{TRADE_COMPLETED:50,PROFITABLE_TRADE:100,STREAK_DAY:25,MODULE_COMPLETED:75,QUIZ_PASSED:40,COMMUNITY_HELP:30,FORUM_POST:20,ACHIEVEMENT_UNLOCK:200},bonuses:{FIRST_DAILY:1.5,WEEKEND:1.2,STREAK_MULTIPLIER:.1,PERFECT_WEEK:2},levelFormula:e=>Math.floor(et.baseXP*Math.pow(et.multiplier,e-1)),getXPForLevel:e=>{let t=0;for(let n=1;n<e;n++)t+=et.levelFormula(n);return t},getLevelFromXP:e=>{let t=1,n=0;for(;t<=et.maxLevel;){const a=et.levelFormula(t);if(n+a>e)break;n+=a,t++}return{level:t,currentXP:e-n,requiredXP:et.levelFormula(t),totalXP:e}}},tt={beginner:{name:"Beginner Trader",achievements:["first_trade","early_bird"],xpMultiplier:1.5,notifications:{frequency:"high",types:["XP","ACHIEVEMENT","LEVEL"]}},intermediate:{name:"Developing Trader",achievements:["knowledge_seeker","community_leader"],xpMultiplier:1.2,notifications:{frequency:"medium",types:["ACHIEVEMENT","LEVEL","BADGE"]}},advanced:{name:"Expert Trader",achievements:["trading_master"],xpMultiplier:1,notifications:{frequency:"low",types:["ACHIEVEMENT","LEVEL"]}},competitive:{name:"Competitive Mode",achievements:Object.keys(Je),xpMultiplier:2,notifications:{frequency:"high",types:["XP","ACHIEVEMENT","LEVEL","BADGE"],sound:!0},leaderboards:!0,streaks:!0}},nt={achievement:{id:{required:!0,type:"string",minLength:3},title:{required:!0,type:"string",minLength:1},description:{required:!0,type:"string",minLength:1},icon:{required:!0,type:"string"},category:{required:!0,enum:Object.keys(Ye)},rarity:{required:!0,enum:Object.keys(Qe)},points:{required:!0,type:"number",min:0}},progress:{current:{required:!0,type:"number",min:0},total:{required:!0,type:"number",min:1},type:{required:!1,enum:Object.values(Ze.types)},color:{required:!1,enum:Object.values(Ze.colors)}},notification:{title:{required:!0,type:"string",minLength:1},message:{required:!0,type:"string",minLength:1},type:{required:!0,enum:Object.keys($e.types)},duration:{required:!1,type:"number",min:1e3,max:1e4}}};class at{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.achievements=new Map,this.userProgress=new Map,this.listeners=new Map,this.options=(0,a.A)({autoSave:!0,validateData:!0,trackProgress:!0},e),this.loadUserData(),this.initializeAchievements()}initializeAchievements(){Object.values(Je).forEach(e=>{this.registerAchievement(e)})}registerAchievement(e){if(this.options.validateData&&!this.validateAchievement(e))throw new Error("Invalid achievement data: ".concat(e.id));return this.achievements.set(e.id,(0,a.A)((0,a.A)({},e),{},{registeredAt:Date.now()})),this.userProgress.has(e.id)||this.userProgress.set(e.id,{id:e.id,progress:0,earned:!1,earnedAt:null,attempts:0}),this.emit("achievement:registered",e),e.id}updateProgress(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=this.achievements.get(e);if(!a)return console.warn("Achievement not found: ".concat(e)),!1;const s=this.userProgress.get(e);if(s.earned)return!1;const i=s.progress,o=this.calculateProgress(a,t,n);return s.progress=o,s.attempts++,s.lastUpdated=Date.now(),this.isAchievementEarned(a,o,n)&&this.earnAchievement(e),this.emit("progress:updated",{achievementId:e,oldProgress:i,newProgress:o,metadata:n}),this.options.autoSave&&this.saveUserData(),!0}calculateProgress(e,t,n){const{requirements:a}=e;switch(a.type){case"count":return Math.min(t,a.target);case"condition":return this.evaluateCondition(a.condition,n)?1:0;case"complex":return this.evaluateComplexRequirements(a.conditions,n);default:return t}}isAchievementEarned(e,t,n){const{requirements:a}=e;switch(a.type){case"count":return t>=a.target;case"condition":return 1===t;case"complex":return a.conditions.every(e=>this.evaluateCondition(e,n));default:return!1}}evaluateCondition(e,t){if("string"===typeof e)return this.evaluateNamedCondition(e,t);const{metric:n,operator:a,value:s}=e,i=t[n]||0;switch(a){case">=":return i>=s;case"<=":return i<=s;case">":return i>s;case"<":return i<s;case"==":return i===s;case"!=":return i!==s;default:return!1}}evaluateNamedCondition(e,t){const n={trade_before_9am:()=>new Date(t.timestamp||Date.now()).getHours()<9,profitable_trade:()=>t.profit>0,weekend_trade:()=>{const e=new Date(t.timestamp||Date.now()).getDay();return 0===e||6===e},perfect_week:()=>1===t.winRate&&t.tradesThisWeek>=5};return!!n[e]&&n[e]()}evaluateComplexRequirements(e,t){return e.every(e=>this.evaluateCondition(e,t))}earnAchievement(e){const t=this.achievements.get(e),n=this.userProgress.get(e);return!(!t||n.earned)&&(n.earned=!0,n.earnedAt=Date.now(),n.progress=this.getMaxProgress(t),t.points&&this.awardXP(t.points,"Achievement: ".concat(t.title)),this.emit("achievement:earned",{achievement:t,userProgress:n,timestamp:n.earnedAt}),this.options.autoSave&&this.saveUserData(),!0)}getMaxProgress(e){const{requirements:t}=e;return"count"===t.type?t.target:1}getProgressPercentage(e){const t=this.achievements.get(e),n=this.userProgress.get(e);if(!t||!n)return 0;const a=this.getMaxProgress(t);return Math.round(n.progress/a*100)}getAchievementsByCategory(e){return Array.from(this.achievements.values()).filter(t=>t.category===e)}getAchievementsByRarity(e){return Array.from(this.achievements.values()).filter(t=>t.rarity===e)}getEarnedAchievements(){return Array.from(this.userProgress.values()).filter(e=>e.earned).map(e=>(0,a.A)((0,a.A)({},this.achievements.get(e.id)),e))}getAllProgress(){return Array.from(this.achievements.values()).map(e=>(0,a.A)((0,a.A)({},e),this.userProgress.get(e.id)))}awardXP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unknown";this.emit("xp:awarded",{points:e,source:t,timestamp:Date.now()})}validateAchievement(e){const t=nt.achievement;for(const[n,a]of Object.entries(t)){const t=e[n];if(a.required&&(void 0===t||null===t))return console.error("Missing required field: ".concat(n)),!1;if(void 0!==t){if(a.type&&typeof t!==a.type)return console.error("Invalid type for ".concat(n,": expected ").concat(a.type)),!1;if(a.enum&&!a.enum.includes(t))return console.error("Invalid value for ".concat(n,": must be one of ").concat(a.enum.join(", "))),!1;if(a.minLength&&t.length<a.minLength)return console.error("".concat(n," too short: minimum ").concat(a.minLength," characters")),!1;if(a.min&&t<a.min)return console.error("".concat(n," too small: minimum ").concat(a.min)),!1}}return!0}loadUserData(){try{const e=localStorage.getItem("tmyl_achievement_progress");if(e){const t=JSON.parse(e);Object.entries(t).forEach(e=>{let[t,n]=e;this.userProgress.set(t,n)})}}catch(e){console.warn("Failed to load achievement progress:",e)}}saveUserData(){try{const e=Object.fromEntries(this.userProgress);localStorage.setItem("tmyl_achievement_progress",JSON.stringify(e))}catch(e){console.warn("Failed to save achievement progress:",e)}}on(e,t){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t)}off(e,t){if(this.listeners.has(e)){const n=this.listeners.get(e),a=n.indexOf(t);a>-1&&n.splice(a,1)}}emit(e,t){this.listeners.has(e)&&this.listeners.get(e).forEach(n=>{try{n(t)}catch(a){console.error("Error in event listener for ".concat(e,":"),a)}})}reset(){this.userProgress.clear(),this.saveUserData(),this.emit("achievements:reset")}getStatistics(){const e=Array.from(this.achievements.values()),t=this.getEarnedAchievements();return{total:e.length,earned:t.length,completion:Math.round(t.length/e.length*100),byCategory:this.getStatsByCategory(),byRarity:this.getStatsByRarity(),totalPoints:t.reduce((e,t)=>e+t.points,0)}}getStatsByCategory(){const e={},t=this.getEarnedAchievements();return Object.keys(Ye).forEach(n=>{const a=this.getAchievementsByCategory(n).length,s=t.filter(e=>e.category===n).length;e[n]={total:a,earned:s,completion:a?Math.round(s/a*100):0}}),e}getStatsByRarity(){const e={},t=this.getEarnedAchievements();return Object.keys(Qe).forEach(n=>{const a=this.getAchievementsByRarity(n).length,s=t.filter(e=>e.rarity===n).length;e[n]={total:a,earned:s,completion:a?Math.round(s/a*100):0}}),e}}class st{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.progressBars=new Map,this.animationQueue=[],this.isAnimating=!1,this.options=(0,a.A)({enableAnimations:!0,batchUpdates:!0,validateData:!0},e)}createProgress(e,t){if(this.options.validateData&&!this.validateProgressConfig(t))throw new Error("Invalid progress configuration");const n={id:e,current:t.current||0,total:t.total||100,type:t.type||Ze.defaults.type,size:t.size||Ze.defaults.size,color:t.color||Ze.defaults.color,label:t.label||"",showPercentage:!1!==t.showPercentage,animated:!1!==t.animated,formatter:t.formatter||"percentage",steps:t.steps||[],container:document.getElementById(e),createdAt:Date.now()};if(!n.container)throw new Error("Container not found: ".concat(e));return this.progressBars.set(e,n),this.renderProgress(e),e}updateProgress(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=this.progressBars.get(e);if(!s)return console.warn("Progress indicator not found: ".concat(e)),!1;const i=s.current;return s.total,s.current=Math.max(0,t),null!==n&&(s.total=Math.max(1,n)),s.current=Math.min(s.current,s.total),!1!==a.animated&&s.animated&&this.options.enableAnimations?this.animateProgress(e,i,s.current,a.duration):this.renderProgress(e),!0}animateProgress(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ze.animations.duration;this.progressBars.get(e)&&(this.animationQueue.push({progressId:e,fromValue:t,toValue:n,duration:a,startTime:null}),this.isAnimating||this.processAnimationQueue())}processAnimationQueue(){if(0===this.animationQueue.length)return void(this.isAnimating=!1);this.isAnimating=!0;const e=this.animationQueue.shift();null===e.startTime&&(e.startTime=performance.now());const t=n=>{const a=n-e.startTime,s=Math.min(a/e.duration,1),i=1-Math.pow(1-s,3),o=e.fromValue+(e.toValue-e.fromValue)*i;this.progressBars.get(e.progressId)&&this.updateProgressDisplay(e.progressId,o),s<1?requestAnimationFrame(t):setTimeout(()=>this.processAnimationQueue(),50)};requestAnimationFrame(t)}renderProgress(e){const t=this.progressBars.get(e);if(!t)return;const{container:n,type:a}=t;if(n.innerHTML="",n.className="tmyl-progress-indicator type-".concat(a," size-").concat(t.size," color-").concat(t.color),t.label){const e=document.createElement("div");e.className="progress-label",e.textContent=t.label,n.appendChild(e)}switch(a){case Ze.types.LINEAR:this.renderLinearProgress(n,t);break;case Ze.types.CIRCULAR:this.renderCircularProgress(n,t);break;case Ze.types.STEPS:this.renderStepsProgress(n,t)}}renderLinearProgress(e,t){const n=document.createElement("div");n.className="progress-linear";const a=document.createElement("div");a.className="progress-track";const s=document.createElement("div");s.className="progress-fill";const i=t.current/t.total*100;if(s.style.width="".concat(i,"%"),a.appendChild(s),n.appendChild(a),t.showPercentage){const e=document.createElement("div");e.className="progress-value",e.textContent=this.formatValue(t),n.appendChild(e)}e.appendChild(n)}renderCircularProgress(e,t){const n=document.createElement("div");n.className="progress-circular";const a=this.getCircularSize(t.size),s=a>100?6:4,i=(a-s)/2,o=2*i*Math.PI,r=o-t.current/t.total*100/100*o,l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.classList.add("circular-chart"),l.setAttribute("width",a),l.setAttribute("height",a);const c=document.createElementNS("http://www.w3.org/2000/svg","circle");c.classList.add("circle-bg"),c.setAttribute("cx",a/2),c.setAttribute("cy",a/2),c.setAttribute("r",i),c.setAttribute("stroke-width",s);const d=document.createElementNS("http://www.w3.org/2000/svg","circle");if(d.classList.add("circle"),d.setAttribute("cx",a/2),d.setAttribute("cy",a/2),d.setAttribute("r",i),d.setAttribute("stroke-width",s),d.setAttribute("stroke-dasharray",o),d.setAttribute("stroke-dashoffset",r),l.appendChild(c),l.appendChild(d),n.appendChild(l),t.showPercentage){const e=document.createElement("div");e.className="progress-percentage",e.textContent=this.formatValue(t),n.appendChild(e)}e.appendChild(n)}renderStepsProgress(e,t){const n=document.createElement("div");n.className="progress-steps";const a=t.steps||this.generateDefaultSteps(t.total),s=Math.floor(t.current/t.total*a.length);a.forEach((e,t)=>{const i=document.createElement("div");i.className="progress-step",t<s?i.classList.add("completed"):t===s&&i.classList.add("current");const o=document.createElement("div");o.className="step-indicator",o.textContent=e.icon||t+1;const r=document.createElement("div");if(r.className="step-label",r.textContent=e.label||"Step ".concat(t+1),i.appendChild(o),i.appendChild(r),n.appendChild(i),t<a.length-1){const e=document.createElement("div");e.className="step-connector",t<s&&e.classList.add("completed"),n.appendChild(e)}}),e.appendChild(n)}updateProgressDisplay(e,t){const n=this.progressBars.get(e);if(!n)return;const s=t/n.total*100,{container:i,type:o}=n;switch(o){case Ze.types.LINEAR:const e=i.querySelector(".progress-fill");e&&(e.style.width="".concat(s,"%"));break;case Ze.types.CIRCULAR:const a=i.querySelector(".circle");if(a){const e=2*parseFloat(a.getAttribute("r"))*Math.PI,t=e-s/100*e;a.setAttribute("stroke-dashoffset",t)}break;case Ze.types.STEPS:this.updateStepsDisplay(i,t,n.total,n.steps)}if(n.showPercentage){const e=i.querySelector(".progress-value, .progress-percentage");e&&(e.textContent=this.formatValue((0,a.A)((0,a.A)({},n),{},{current:t})))}}updateStepsDisplay(e,t,n,a){const s=e.querySelectorAll(".progress-step"),i=e.querySelectorAll(".step-connector"),o=Math.floor(t/n*s.length);s.forEach((e,t)=>{e.classList.remove("completed","current"),t<o?e.classList.add("completed"):t===o&&e.classList.add("current")}),i.forEach((e,t)=>{e.classList.toggle("completed",t<o)})}formatValue(e){const{current:t,total:n,formatter:a}=e;if("function"===typeof a)return a(t,n);const s=Ze.formatters;switch(a){case"percentage":return s.percentage(t,n);case"count":return s.count(t,n);case"xp":return s.xp(t,n);case"level":return s.level(t,n);default:return"string"===typeof a?s.custom(t,n,a):s.percentage(t,n)}}generateDefaultSteps(e){const t=Math.min(e,5),n=[];for(let a=0;a<t;a++)n.push({label:"Step ".concat(a+1),icon:a+1});return n}getCircularSize(e){const t={small:80,medium:120,large:160};return t[e]||t.medium}validateProgressConfig(e){const t=nt.progress;for(const[n,a]of Object.entries(t)){const t=e[n];if(a.required&&(void 0===t||null===t))return console.error("Missing required field: ".concat(n)),!1;if(void 0!==t){if(a.type&&typeof t!==a.type)return console.error("Invalid type for ".concat(n,": expected ").concat(a.type)),!1;if(a.enum&&!a.enum.includes(t))return console.error("Invalid value for ".concat(n,": must be one of ").concat(a.enum.join(", "))),!1;if(a.min&&t<a.min)return console.error("".concat(n," too small: minimum ").concat(a.min)),!1}}return!0}removeProgress(e){const t=this.progressBars.get(e);t&&t.container&&(t.container.innerHTML="",t.container.className=""),this.progressBars.delete(e),this.animationQueue=this.animationQueue.filter(t=>t.progressId!==e)}getProgress(e){return this.progressBars.get(e)}getAllProgress(){return Array.from(this.progressBars.values())}setColor(e,t){const n=this.progressBars.get(e);n&&(n.color=t,n.container.className=n.container.className.replace(/color-\w+/,"color-".concat(t)))}setSize(e,t){const n=this.progressBars.get(e);n&&(n.size=t,n.container.className=n.container.className.replace(/size-\w+/,"size-".concat(t)),n.type===Ze.types.CIRCULAR&&this.renderProgress(e))}reset(e){this.updateProgress(e,0)}complete(e){const t=this.progressBars.get(e);t&&this.updateProgress(e,t.total)}}let it=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.notifications=new Map,this.queue=[],this.visibleCount=0,this.nextId=1,this.options=(0,a.A)({maxVisible:$e.limits.maxVisible,queueSize:$e.limits.queueSize,defaultPosition:$e.defaults.position,defaultDuration:$e.defaults.duration,enableSound:$e.defaults.sound,enableAnimations:$e.defaults.animation,validateData:!0},e),this.initializeContainer(),this.bindEvents()}initializeContainer(){this.containers={},Object.values($e.positions).forEach(e=>{const t=document.createElement("div");t.id="tmyl-notifications-".concat(e),t.className="tmyl-notification-container position-".concat(e),t.style.cssText="\n        position: fixed;\n        z-index: 10000;\n        pointer-events: none;\n      ",this.positionContainer(t,e),document.body.appendChild(t),this.containers[e]=t})}positionContainer(e,t){switch(t){case $e.positions.TOP_LEFT:e.style.top="20px",e.style.left="20px";break;case $e.positions.TOP_RIGHT:e.style.top="20px",e.style.right="20px";break;case $e.positions.BOTTOM_LEFT:e.style.bottom="20px",e.style.left="20px";break;case $e.positions.BOTTOM_RIGHT:e.style.bottom="20px",e.style.right="20px";break;case $e.positions.CENTER:e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)"}}show(e){var t;if(this.options.validateData&&!this.validateNotification(e))throw new Error("Invalid notification data");const n={id:this.nextId++,title:e.title,message:e.message,type:e.type||"XP",icon:e.icon||(null===(t=$e.types[e.type])||void 0===t?void 0:t.icon),duration:e.duration||this.options.defaultDuration,position:e.position||this.options.defaultPosition,closable:!1!==e.closable,sound:!1!==e.sound&&this.options.enableSound,value:e.value,metadata:e.metadata||{},createdAt:Date.now()};return this.visibleCount>=this.options.maxVisible?this.addToQueue(n):this.displayNotification(n),n.id}addToQueue(e){this.queue.length>=this.options.queueSize&&this.queue.shift(),this.queue.push(e)}displayNotification(e){const t=this.createNotificationElement(e),n=this.containers[e.position];n?(n.appendChild(t),this.notifications.set(e.id,(0,a.A)((0,a.A)({},e),{},{element:t,container:n})),this.visibleCount++,this.options.enableAnimations?this.animateIn(t):t.classList.add("showing"),e.sound&&this.playNotificationSound(e.type),e.duration>0&&setTimeout(()=>{this.hide(e.id)},e.duration),this.processQueue()):console.error("Invalid notification position: ".concat(e.position))}createNotificationElement(e){const t=document.createElement("div");t.className="tmyl-reward-notification notification-".concat(e.type.toLowerCase()," position-").concat(e.position),t.style.pointerEvents="auto";const n=document.createElement("div");n.className="notification-content";const a=document.createElement("div");a.className="notification-icon",a.textContent=e.icon||"\ud83c\udf89";const s=document.createElement("div");s.className="notification-text";const i=document.createElement("div");i.className="notification-title",i.textContent=e.title;const o=document.createElement("div");if(o.className="notification-message",o.textContent=e.message,s.appendChild(i),s.appendChild(o),void 0!==e.value){const t=document.createElement("div");t.className="notification-value",t.textContent=this.formatValue(e),s.appendChild(t)}if(n.appendChild(a),n.appendChild(s),e.closable){const t=document.createElement("button");t.className="notification-close",t.innerHTML="\xd7",t.addEventListener("click",()=>{this.hide(e.id)}),n.appendChild(t)}return t.appendChild(n),t}formatValue(e){const{type:t,value:n}=e;switch(t.toLowerCase()){case"xp":return"+".concat(n," XP");case"achievement":case"badge":return"";case"level":return"Level ".concat(n);default:return n?"+".concat(n):""}}animateIn(e){e.style.opacity="0",e.style.transform="translateY(-20px)",requestAnimationFrame(()=>{e.classList.add("showing"),e.style.transition="all 0.3s ease",e.style.opacity="1",e.style.transform="translateY(0)"})}animateOut(e,t){if(!this.options.enableAnimations)return e.classList.add("hiding"),void setTimeout(t,50);e.classList.add("hiding"),e.style.transition="all 0.3s ease",e.style.opacity="0",e.style.transform="translateY(-20px)",setTimeout(t,300)}hide(e){const t=this.notifications.get(e);t&&this.animateOut(t.element,()=>{t.element.parentNode&&t.element.parentNode.removeChild(t.element),this.notifications.delete(e),this.visibleCount--,this.processQueue()})}processQueue(){if(this.queue.length>0&&this.visibleCount<this.options.maxVisible){const e=this.queue.shift();this.displayNotification(e)}}playNotificationSound(e){const t=$e.types[e];if(t&&t.sound)try{const e=new Audio("/sounds/".concat(t.sound));e.volume=.3,e.play().catch(e=>{console.warn("Failed to play notification sound:",e)})}catch(n){console.warn("Audio not supported or failed to load:",n)}}showXP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.show({title:"XP Gained!",message:t||"You earned experience points",type:"XP",value:e,metadata:{source:t}})}showAchievement(e){return this.show({title:"Achievement Unlocked!",message:e.title,type:"ACHIEVEMENT",icon:e.icon,duration:5e3,metadata:{achievement:e}})}showLevelUp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.show({title:"Level Up!",message:"Congratulations! You reached level ".concat(e),type:"LEVEL",value:e,duration:4e3,metadata:{level:e,xp:t}})}showBadge(e){return this.show({title:"Badge Earned!",message:e.name||"You earned a new badge",type:"BADGE",icon:e.icon,duration:4e3,metadata:{badge:e}})}showCustom(e){return this.show(e)}clearAll(){this.notifications.forEach((e,t)=>{this.hide(t)}),this.queue=[]}clearByType(e){this.notifications.forEach((t,n)=>{t.type===e&&this.hide(n)}),this.queue=this.queue.filter(t=>t.type!==e)}validateNotification(e){const t=nt.notification;for(const[n,a]of Object.entries(t)){const t=e[n];if(a.required&&(void 0===t||null===t))return console.error("Missing required field: ".concat(n)),!1;if(void 0!==t){if(a.type&&typeof t!==a.type)return console.error("Invalid type for ".concat(n,": expected ").concat(a.type)),!1;if(a.enum&&!a.enum.includes(t))return console.error("Invalid value for ".concat(n,": must be one of ").concat(a.enum.join(", "))),!1;if(a.minLength&&t.length<a.minLength)return console.error("".concat(n," too short: minimum ").concat(a.minLength," characters")),!1;if(a.min&&t<a.min)return console.error("".concat(n," too small: minimum ").concat(a.min)),!1;if(a.max&&t>a.max)return console.error("".concat(n," too large: maximum ").concat(a.max)),!1}}return!0}bindEvents(){window.addEventListener("resize",()=>{this.repositionContainers()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&this.clearAll()})}repositionContainers(){Object.entries(this.containers).forEach(e=>{let[t,n]=e;this.positionContainer(n,t)})}getStatistics(){return{visible:this.visibleCount,queued:this.queue.length,total:this.notifications.size+this.queue.length,byType:this.getStatsByType()}}getStatsByType(){const e={};return this.notifications.forEach(t=>{const n=t.type;e[n]=(e[n]||0)+1}),this.queue.forEach(t=>{const n=t.type;e[n]=(e[n]||0)+1}),e}updateOptions(e){this.options=(0,a.A)((0,a.A)({},this.options),e)}destroy(){this.clearAll(),Object.values(this.containers).forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),window.removeEventListener("resize",this.repositionContainers),this.notifications.clear(),this.queue=[],this.containers={}}};class ot{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=(0,a.A)({preset:"beginner",autoInitialize:!0,enableAchievements:!0,enableProgress:!0,enableNotifications:!0,enableXP:!0,enableLeveling:!0},e),this.initialized=!1,this.userData={xp:0,level:1,achievements:new Map,statistics:{totalXP:0,achievementsEarned:0,currentStreak:0,maxStreak:0,joinedAt:Date.now()}},this.controllers={},this.options.autoInitialize&&this.initialize()}async initialize(){if(!this.initialized)try{await this.loadStyles(),this.options.enableAchievements&&(this.controllers.achievements=new at({autoSave:!0,trackProgress:!0}),this.bindAchievementEvents()),this.options.enableProgress&&(this.controllers.progress=new st({enableAnimations:!0,batchUpdates:!0})),this.options.enableNotifications&&(this.controllers.notifications=new it({maxVisible:3,enableSound:!0,enableAnimations:!0})),this.loadUserData(),this.options.preset&&this.applyPreset(this.options.preset),this.initialized=!0,this.emit("system:initialized")}catch(e){throw console.error("Failed to initialize reward system:",e),e}}async loadStyles(){return new Promise((e,t)=>{const n=document.createElement("link");n.rel="stylesheet",n.href="/ui-components/organisms/rewards/styles/reward-system.css",n.onload=e,n.onerror=()=>{console.warn("Failed to load reward system styles, using fallback"),e()},document.head.appendChild(n)})}applyPreset(e){const t=tt[e];t?(this.xpMultiplier=t.xpMultiplier||1,this.controllers.notifications&&t.notifications&&this.controllers.notifications.updateOptions({enableSound:!1!==t.notifications.sound}),this.emit("preset:applied",{preset:e,config:t})):console.warn("Unknown preset: ".concat(e))}bindAchievementEvents(){const e=this.controllers.achievements;e.on("achievement:earned",e=>{this.handleAchievementEarned(e)}),e.on("progress:updated",e=>{this.handleProgressUpdated(e)}),e.on("xp:awarded",e=>{this.awardXP(e.points,e.source)})}handleAchievementEarned(e){const{achievement:t,userProgress:n}=e;this.userData.statistics.achievementsEarned++,this.controllers.notifications&&this.controllers.notifications.showAchievement(t),this.checkLevelUp(),this.emit("achievement:earned",e)}handleProgressUpdated(e){this.emit("progress:updated",e)}awardXP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unknown";if(!this.options.enableXP)return;const n=Math.floor(e*(this.xpMultiplier||1)),a=this.userData.xp;this.userData.level,this.userData.xp+=n,this.userData.statistics.totalXP+=n,this.controllers.notifications&&this.controllers.notifications.showXP(n,t);const s=this.checkLevelUp();return this.emit("xp:awarded",{points:n,source:t,oldXP:a,newXP:this.userData.xp,levelUp:!!s,level:this.userData.level}),this.saveUserData(),n}checkLevelUp(){if(!this.options.enableLeveling)return null;const e=et.getLevelFromXP(this.userData.xp),t=this.userData.level;return e.level>t?(this.userData.level=e.level,this.controllers.notifications&&this.controllers.notifications.showLevelUp(e.level),this.emit("level:up",{oldLevel:t,newLevel:e.level,xp:this.userData.xp,levelData:e}),e):null}createAchievementBadge(e,t){if(!this.controllers.achievements)throw new Error("Achievement controller not initialized");const n=this.controllers.achievements.achievements.get(t),a=this.controllers.achievements.userProgress.get(t);if(!n)throw new Error("Achievement not found: ".concat(t));return this.renderAchievementBadge(e,n,a)}async renderAchievementBadge(e,t,n){const a=document.getElementById(e);if(!a)throw new Error("Container not found: ".concat(e));const s=await this.loadTemplate("achievement-badge.html"),i=document.createElement("div");i.innerHTML=s;const o=i.firstElementChild;o.classList.add("rarity-".concat(t.rarity.toLowerCase())),n.earned?o.classList.add("earned"):o.classList.add("locked");const r=o.querySelector(".badge-icon"),l=o.querySelector(".badge-title"),c=o.querySelector(".badge-description"),d=o.querySelector(".badge-requirements"),h=o.querySelector(".badge-earned-date");r&&(r.textContent=t.icon),l&&(l.textContent=t.title),c&&(c.textContent=t.description),d&&(d.textContent=this.getRequirementsText(t)),h&&n.earned&&(h.textContent="Earned ".concat(new Date(n.earnedAt).toLocaleDateString()));const u=o.querySelector(".progress-ring");return u&&!n.earned&&this.updateProgressRing(u,n.progress,this.getMaxProgress(t)),a.appendChild(o),o}createProgress(e,t){if(!this.controllers.progress)throw new Error("Progress controller not initialized");return this.controllers.progress.createProgress(e,t)}updateProgress(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return!!this.controllers.progress&&this.controllers.progress.updateProgress(e,t,n)}showNotification(e){return this.controllers.notifications?this.controllers.notifications.show(e):null}trackAction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.controllers.achievements)return;const n={trade_completed:{metric:"trades_completed",increment:1},module_completed:{metric:"modules_completed",increment:1},quiz_passed:{metric:"quizzes_passed",increment:1},forum_post:{metric:"forum_posts",increment:1},member_helped:{metric:"members_helped",increment:1}}[e];if(n){const a=et.sources[e.toUpperCase()]||0;a>0&&this.awardXP(a,e),this.updateAchievementsByMetric(n.metric,n.increment,t)}this.emit("action:tracked",{action:e,metadata:t})}updateAchievementsByMetric(e,t,n){const a=this.controllers.achievements;a.achievements.forEach((s,i)=>{const o=s.requirements;if("count"===o.type&&o.metric===e){const e=a.userProgress.get(i).progress;a.updateProgress(i,e+t,n)}else if("complex"===o.type){o.conditions.some(t=>t.metric===e)&&a.updateProgress(i,1,n)}})}getRequirementsText(e){const{requirements:t}=e;switch(t.type){case"count":return"Complete ".concat(t.target," ").concat(t.metric.replace("_"," "));case"condition":return"Meet specific condition: ".concat(t.condition);case"complex":return"Meet multiple requirements";default:return"Complete the requirements"}}getMaxProgress(e){const{requirements:t}=e;return"count"===t.type?t.target:1}updateProgressRing(e,t,n){const a=e.querySelector(".circle"),s=e.querySelector(".percentage");if(a){const e=2*30*Math.PI,s=e-t/n*100/100*e;a.style.strokeDasharray="".concat(e," ").concat(e),a.style.strokeDashoffset=s}s&&(s.textContent="".concat(Math.round(t/n*100),"%"))}async loadTemplate(e){try{const t=await fetch("/ui-components/organisms/rewards/templates/".concat(e));if(!t.ok)throw new Error("Failed to load template: ".concat(e));return await t.text()}catch(t){return console.warn("Failed to load template ".concat(e,", using fallback")),this.getFallbackTemplate(e)}}getFallbackTemplate(e){return{"achievement-badge.html":'\n        <div class="tmyl-achievement-badge">\n          <div class="badge-icon">\n            <div class="progress-ring">\n              <svg class="circular-chart" width="64" height="64">\n                <circle class="circle-bg" cx="32" cy="32" r="30"></circle>\n                <circle class="circle" cx="32" cy="32" r="30"></circle>\n              </svg>\n              <div class="percentage">0%</div>\n            </div>\n          </div>\n          <div class="badge-content">\n            <h4 class="badge-title"></h4>\n            <p class="badge-description"></p>\n            <div class="badge-requirements"></div>\n            <div class="badge-earned-date"></div>\n          </div>\n        </div>\n      ',"progress-indicator.html":'\n        <div class="tmyl-progress-indicator">\n          <div class="progress-label"></div>\n          <div class="progress-content"></div>\n        </div>\n      ',"reward-notification.html":'\n        <div class="tmyl-reward-notification">\n          <div class="notification-content">\n            <div class="notification-icon"></div>\n            <div class="notification-text">\n              <div class="notification-title"></div>\n              <div class="notification-message"></div>\n              <div class="notification-value"></div>\n            </div>\n            <button class="notification-close">\xd7</button>\n          </div>\n        </div>\n      '}[e]||"<div>Template not found</div>"}loadUserData(){try{const e=localStorage.getItem("tmyl_reward_system_user");if(e){const t=JSON.parse(e);this.userData=(0,a.A)((0,a.A)({},this.userData),t)}}catch(e){console.warn("Failed to load user data:",e)}}saveUserData(){try{localStorage.setItem("tmyl_reward_system_user",JSON.stringify(this.userData))}catch(e){console.warn("Failed to save user data:",e)}}getUserStats(){const e=et.getLevelFromXP(this.userData.xp),t=this.controllers.achievements?this.controllers.achievements.getStatistics():{};return(0,a.A)((0,a.A)({},this.userData.statistics),{},{level:this.userData.level,xp:this.userData.xp,levelProgress:e,achievements:t})}reset(){this.controllers.achievements&&this.controllers.achievements.reset(),this.controllers.notifications&&this.controllers.notifications.clearAll(),this.userData={xp:0,level:1,achievements:new Map,statistics:{totalXP:0,achievementsEarned:0,currentStreak:0,maxStreak:0,joinedAt:Date.now()}},this.saveUserData(),this.emit("system:reset")}on(e,t){this.listeners||(this.listeners=new Map),this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t)}off(e,t){if(this.listeners&&this.listeners.has(e)){const n=this.listeners.get(e),a=n.indexOf(t);a>-1&&n.splice(a,1)}}emit(e,t){this.listeners&&this.listeners.has(e)&&this.listeners.get(e).forEach(n=>{try{n(t)}catch(a){console.error("Error in event listener for ".concat(e,":"),a)}})}destroy(){this.saveUserData(),Object.values(this.controllers).forEach(e=>{"function"===typeof e.destroy&&e.destroy()}),this.controllers={},this.listeners=new Map,this.initialized=!1,this.emit("system:destroyed")}}function rt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{preset:t="beginner",autoInitialize:n=!0,enableAchievements:i=!0,enableProgress:o=!0,enableNotifications:l=!0,enableXP:c=!0,enableLeveling:d=!0,container:h=null}=e,u=(0,s.A)(e,r);let m=null,p=null;function v(){return p=document.createElement("div"),p.className="tmyl-reward-system",p.setAttribute("data-preset",t),p.innerHTML='\n      <div class="tmyl-reward-system__header">\n        <h3 class="tmyl-reward-system__title">Reward System</h3>\n        <div class="tmyl-reward-system__stats">\n          <div class="tmyl-reward-system__level">Level: <span class="level-value">1</span></div>\n          <div class="tmyl-reward-system__xp">XP: <span class="xp-value">0</span></div>\n        </div>\n      </div>\n      <div class="tmyl-reward-system__content">\n        <div class="tmyl-reward-system__achievements">\n          <h4>Achievements</h4>\n          <div class="achievements-list"></div>\n        </div>\n        <div class="tmyl-reward-system__progress">\n          <h4>Progress</h4>\n          <div class="progress-list"></div>\n        </div>\n      </div>\n    ',p}function g(){m||(m=new ot((0,a.A)({preset:t,autoInitialize:n,enableAchievements:i,enableProgress:o,enableNotifications:l,enableXP:c,enableLeveling:d},u)),m&&"function"===typeof m.on&&(m.on("achievement:earned",e=>{y()}),m.on("level:up",e=>{f(e)}),m.on("xp:gained",e=>{b(e)})))}function y(){if(!p||!m)return;const e=p.querySelector(".achievements-list");if(!e)return;const t=m.getAchievements?m.getAchievements():[];e.innerHTML=t.map(e=>'\n      <div class="achievement-item '.concat(e.earned?"earned":"locked",'">\n        <span class="achievement-icon">').concat(e.icon||"\ud83c\udfc6",'</span>\n        <span class="achievement-title">').concat(e.title,"</span>\n        ").concat(e.earned?'<span class="earned-badge">\u2713</span>':"","\n      </div>\n    ")).join("")}function f(e){if(!p)return;const t=p.querySelector(".level-value");t&&(t.textContent=e||1)}function b(e){if(!p)return;const t=p.querySelector(".xp-value");t&&(t.textContent=e||0)}return{render:function(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;if(!n)throw new Error("Container element required for rendering reward system");return p||v(),n.appendChild(p),m||g(),y(),f((null===(e=m)||void 0===e||null===(e=e.userData)||void 0===e?void 0:e.level)||1),b((null===(t=m)||void 0===t||null===(t=t.userData)||void 0===t?void 0:t.xp)||0),p},destroy:function(){m&&"function"===typeof m.destroy&&m.destroy(),p&&p.parentNode&&p.parentNode.removeChild(p),m=null,p=null},awardXP:function(e){m&&"function"===typeof m.awardXP&&(m.awardXP(e),b(m.userData.xp))},checkAchievement:function(e){return!(!m||"function"!==typeof m.checkAchievement)&&m.checkAchievement(e)},getUserData:function(){return m?m.userData:null},getAchievements:function(){return m&&"function"===typeof m.getAchievements?m.getAchievements():[]},getElement:function(){return p||v(),p},getRewardSystem:function(){return m||g(),m},get props(){return{preset:t,autoInitialize:n,enableAchievements:i,enableProgress:o,enableNotifications:l,enableXP:c,enableLeveling:d}}}}function lt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{type:t="widget",title:n="",size:i="medium",data:o=null,widgets:r=[],layout:c="grid",columns:d=3,gap:h="16px",container:u=null}=e,m=(0,s.A)(e,l);let p=null,v=new Map;function g(){const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{type:t="card",title:n="",size:a="medium",data:s=null,refreshInterval:i=0,loading:o=!1,error:r=null,actions:l=[],resizable:c=!1,movable:d=!1,collapsible:h=!0,className:u="",onRefresh:m,onResize:p,onMove:v,onCollapse:g}=e,y=document.createElement("div");y.className="tmyl-dashboard-widget widget-".concat(t," size-").concat(a," ").concat(u),y.setAttribute("role","region"),y.setAttribute("aria-label","Dashboard widget: ".concat(n)),c&&y.classList.add("resizable"),d&&y.classList.add("movable");let f='\n    <div class="widget-header">\n      <h3 class="widget-title">'.concat(n,'</h3>\n      <div class="widget-actions">\n        ').concat(l.map(e=>'\n          <button class="widget-action" data-action="'.concat(e.id,'" title="').concat(e.title||e.label,'">\n            ').concat(e.icon||e.label,"\n          </button>\n        ")).join(""),"\n        ").concat(h?'<button class="widget-collapse" title="Collapse widget">\u2212</button>':"","\n        ").concat(m?'<button class="widget-refresh" title="Refresh data">\u27f3</button>':"",'\n      </div>\n    </div>\n    <div class="widget-content">\n      ').concat(o?'<div class="widget-loading">Loading...</div>':"","\n      ").concat(r?'<div class="widget-error">'.concat(r,"</div>"):"",'\n      <div class="widget-body"></div>\n    </div>\n  ');y.innerHTML=f;let b=!1,w=o,S=s,C=null;const _={updateData(e){return S=e,this.render(),this},render(){const e=y.querySelector(".widget-body");if(!e)return this;if(e.innerHTML="",w)return e.innerHTML='<div class="widget-loading">Loading...</div>',this;if(r)return e.innerHTML='<div class="widget-error">'.concat(r,"</div>"),this;if(!S)return e.innerHTML='<div class="widget-empty">No data available</div>',this;switch(t){case"metric":this.renderMetric(e);break;case"chart":this.renderChart(e);break;case"list":this.renderList(e);break;case"table":this.renderTable(e);break;default:this.renderCard(e)}return this},renderMetric(e){const{value:t,label:n,change:a,trend:s,format:i="number"}=S;let o=t;"currency"===i?o=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t):"percentage"===i&&(o="".concat(t,"%")),e.innerHTML='\n        <div class="metric-display">\n          <div class="metric-value">'.concat(o,'</div>\n          <div class="metric-label">').concat(n,"</div>\n          ").concat(void 0!==a?'\n            <div class="metric-change '.concat(a>=0?"positive":"negative",'">\n              <span class="change-indicator">').concat(a>=0?"\u25b2":"\u25bc",'</span>\n              <span class="change-value">').concat(Math.abs(a),"%</span>\n            </div>\n          "):"","\n        </div>\n      ")},renderChart(e){const{chartType:t="line",datasets:n=[],labels:a=[]}=S;e.innerHTML='\n        <div class="chart-container">\n          <div class="chart-placeholder">\n            <div class="chart-type">'.concat(t.toUpperCase(),' CHART</div>\n            <div class="chart-data-points">').concat(n.length," datasets, ").concat(a.length,' points</div>\n            <div class="chart-note">Chart integration ready for Chart.js or similar</div>\n          </div>\n        </div>\n      ')},renderList(e){const{items:t=[],showIcons:n=!0,showActions:a=!1}=S,s=t.map(e=>'\n        <div class="list-item" data-id="'.concat(e.id||"",'">\n          ').concat(n&&e.icon?'<span class="item-icon">'.concat(e.icon,"</span>"):"",'\n          <div class="item-content">\n            <div class="item-title">').concat(e.title||e.name,"</div>\n            ").concat(e.description?'<div class="item-description">'.concat(e.description,"</div>"):"","\n            ").concat(e.value?'<div class="item-value">'.concat(e.value,"</div>"):"","\n          </div>\n          ").concat(a&&e.actions?'\n            <div class="item-actions">\n              '.concat(e.actions.map(t=>'\n                <button class="item-action" data-action="'.concat(t.id,'" data-item="').concat(e.id,'">\n                  ').concat(t.icon||t.label,"\n                </button>\n              ")).join(""),"\n            </div>\n          "):"","\n        </div>\n      ")).join("");e.innerHTML='<div class="widget-list">'.concat(s,"</div>")},renderTable(e){const{columns:t=[],rows:n=[],sortable:a=!0}=S,s=t.map(e=>'\n        <th class="'.concat(a?"sortable":"",'" data-column="').concat(e.key,'">\n          ').concat(e.label,"\n          ").concat(a?'<span class="sort-indicator"></span>':"","\n        </th>\n      ")).join(""),i=n.map(e=>'\n        <tr data-id="'.concat(e.id||"",'">\n          ').concat(t.map(t=>'\n            <td data-column="'.concat(t.key,'">\n              ').concat(t.format?t.format(e[t.key]):e[t.key],"\n            </td>\n          ")).join(""),"\n        </tr>\n      ")).join("");e.innerHTML='\n        <div class="widget-table-container">\n          <table class="widget-table">\n            <thead>\n              <tr>'.concat(s,"</tr>\n            </thead>\n            <tbody>").concat(i,"</tbody>\n          </table>\n        </div>\n      ")},renderCard(e){const{content:t="",html:n=""}=S;e.innerHTML=n||'<div class="card-content">'.concat(t,"</div>")},setLoading(e){return w=e,e?y.classList.add("loading"):y.classList.remove("loading"),this.render(),this},setError(e){return r=e,e?y.classList.add("error"):y.classList.remove("error"),this.render(),this},clearError(){return this.setError(null)},async refresh(){if(!m)return!1;this.setLoading(!0);try{const e=await m();return this.updateData(e),this.clearError(),!0}catch(e){return this.setError(e.message||"Failed to refresh data"),!1}finally{this.setLoading(!1)}},toggleCollapse(){return b=!b,b?(y.classList.add("collapsed"),y.querySelector(".widget-collapse").textContent="+"):(y.classList.remove("collapsed"),y.querySelector(".widget-collapse").textContent="\u2212"),g&&g(b),y.dispatchEvent(new CustomEvent("widget-collapse",{detail:{collapsed:b,widget:_}})),this},startAutoRefresh(){return i>0&&m&&(C=setInterval(()=>{this.refresh()},i)),this},stopAutoRefresh(){return C&&(clearInterval(C),C=null),this},setTitle(e){const t=y.querySelector(".widget-title");return t&&(t.textContent=e,y.setAttribute("aria-label","Dashboard widget: ".concat(e))),this},setSize(e){return y.classList.remove("size-".concat(a)),y.classList.add("size-".concat(e)),p&&p(e),this},destroy(){this.stopAutoRefresh(),y.parentNode&&y.parentNode.removeChild(y)},get element(){return y},get data(){return S},get collapsed(){return b}};return y.addEventListener("click",e=>{const n=e.target.closest(".widget-action");if(n){const e=n.getAttribute("data-action"),t=l.find(t=>t.id===e);return void(t&&t.handler&&t.handler(_))}if(e.target.closest(".widget-collapse"))return void _.toggleCollapse();if(e.target.closest(".widget-refresh"))return void _.refresh();const a=e.target.closest(".sortable");if(a&&"table"===t){const e=a.getAttribute("data-column");y.dispatchEvent(new CustomEvent("widget-sort",{detail:{column:e,widget:_}}))}const s=e.target.closest(".item-action");if(s){const e=s.getAttribute("data-action"),t=s.getAttribute("data-item");y.dispatchEvent(new CustomEvent("widget-item-action",{detail:{action:e,item:t,widget:_}}))}}),_.render(),i>0&&_.startAutoRefresh(),_}((0,a.A)({type:"card",title:n,size:i,data:o},m));return v.set("main",e),e.element||e}function y(){const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{columns:t=12,gap:n="16px",responsive:a=!0,autoResize:s=!0,draggable:i=!1,className:o=""}=e,r=document.createElement("div");r.className="tmyl-dashboard-grid ".concat(o),r.style.cssText="\n    display: grid;\n    grid-template-columns: repeat(".concat(t,", 1fr);\n    gap: ").concat(n,";\n    width: 100%;\n  "),a&&r.classList.add("responsive");const l=new Map,c={addWidget(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{row:n="auto",column:a="auto",rowSpan:s=1,columnSpan:i=1}=t,o=e.element||e;o.style.gridRow="auto"===n?"auto":"".concat(n," / span ").concat(s),o.style.gridColumn="auto"===a?"auto":"".concat(a," / span ").concat(i),r.appendChild(o);const c=o.getAttribute("data-widget-id")||"widget-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9));return o.setAttribute("data-widget-id",c),l.set(c,{element:o,controller:e,position:{row:n,column:a,rowSpan:s,columnSpan:i}}),c},removeWidget(e){const t=l.get(e);return!!t&&(t.element.parentNode&&t.element.parentNode.removeChild(t.element),l.delete(e),!0)},moveWidget(e,t){const n=l.get(e);if(!n)return!1;const{row:a=n.position.row,column:s=n.position.column,rowSpan:i=n.position.rowSpan,columnSpan:o=n.position.columnSpan}=t;return n.element.style.gridRow="auto"===a?"auto":"".concat(a," / span ").concat(i),n.element.style.gridColumn="auto"===s?"auto":"".concat(s," / span ").concat(o),n.position={row:a,column:s,rowSpan:i,columnSpan:o},!0},getWidget:e=>l.get(e),getAllWidgets:()=>Array.from(l.values()),setColumns(e){return r.style.gridTemplateColumns="repeat(".concat(e,", 1fr)"),this},setGap(e){return r.style.gap=e,this},clear(){return l.forEach((e,t)=>{this.removeWidget(t)}),this},getLayout(){const e=[];return l.forEach((t,n)=>{e.push({id:n,position:t.position})}),e},setLayout(e){return e.forEach(e=>{this.moveWidget(e.id,e.position)}),this},get element(){return r}};return c}((0,a.A)({widgets:r,layout:c,columns:d,gap:h},m));return v.set("grid",e),e.element||e}function f(){if(p="grid"===t?y():g(),!p||"function"!==typeof p.appendChild){const e=document.createElement("div");e.className="tmyl-dashboard-wrapper",e.setAttribute("data-type",t),p?e.appendChild(p):e.innerHTML='\n          <div class="dashboard-placeholder">\n            <h3>Dashboard '.concat(t.charAt(0).toUpperCase()+t.slice(1),"</h3>\n            <p>Loading dashboard component...</p>\n          </div>\n        "),p=e}return p}return{render:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;if(!e)throw new Error("Container element required for rendering dashboard");return p||f(),e.appendChild(p),p},destroy:function(){v.forEach(e=>{e&&"function"===typeof e.destroy&&e.destroy()}),v.clear(),p&&p.parentNode&&p.parentNode.removeChild(p),p=null},updateData:function(e){if("widget"===t){const t=v.get("main");t&&"function"===typeof t.updateData&&t.updateData(e)}else if("grid"===t){const t=v.get("grid");t&&"function"===typeof t.updateWidgets&&t.updateWidgets(e)}},addWidget:function(e){if("grid"!==t)return;const n=v.get("grid");n&&"function"===typeof n.addWidget&&n.addWidget(e)},removeWidget:function(e){if("grid"!==t)return;const n=v.get("grid");n&&"function"===typeof n.removeWidget&&n.removeWidget(e)},getElement:function(){return p||f(),p},getWidget:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return v.get(e)},get props(){return{type:t,title:n,size:i,data:o,widgets:r,layout:c,columns:d,gap:h}}}}function ct(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{title:t="",size:n="md",type:a="default",showClose:s=!0,loading:i=!1}=e,o=["tmyl-modal","tmyl-modal--".concat(n),"default"!==a?"tmyl-modal--".concat(a):"",i?"tmyl-modal--loading":""].filter(Boolean).join(" ");return'\n    <div class="tmyl-modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="modal-title">\n      <div class="'.concat(o,'" tabindex="-1">\n        ').concat(function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e||t?'\n    <div class="tmyl-modal__header">\n      '.concat(e?'<h2 class="tmyl-modal__title" id="modal-title">'.concat(e,"</h2>"):"","\n      ").concat(t?'\n        <button class="tmyl-modal__close" \n                type="button" \n                aria-label="Close modal"\n                data-modal-close>\n          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">\n            <path d="M11.854 4.146a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708-.708l7-7a.5.5 0 0 1 .708 0z"/>\n            <path d="M4.146 4.146a.5.5 0 0 0 0 .708l7 7a.5.5 0 0 0 .708-.708l-7-7a.5.5 0 0 0-.708 0z"/>\n          </svg>\n        </button>\n      ':"","\n    </div>\n  "):""}(t,s),"\n        ").concat(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e)return'\n      <div class="tmyl-modal__body">\n        <div class="tmyl-modal__spinner"></div>\n      </div>\n    ';return'\n    <div class="tmyl-modal__body" data-modal-body>\n      \x3c!-- Content will be inserted here --\x3e\n    </div>\n  '}(i),"\n        ").concat('\n    <div class="tmyl-modal__actions" data-modal-actions style="display: none;">\n      \x3c!-- Action buttons will be inserted here --\x3e\n    </div>\n  ',"\n      </div>\n    </div>\n  ")}"undefined"!==typeof window&&(window.TamylaRewardSystem=ot);class dt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=(0,a.A)({size:"md",type:"default",showClose:!0,closeOnBackdrop:!0,closeOnEscape:!0,focusTrap:!0,restoreFocus:!0,onOpen:null,onClose:null},e),this.state={isOpen:!1,isLoading:!1,lastFocusedElement:null},this.element=null,this.backdrop=null,this.setupEventListeners()}initialize(e){this.element=e,this.setupElementEventListeners()}setupElementEventListeners(){if(!this.element)return;const e=this.element.querySelector(".tmyl-modal-close, [data-modal-close]");e&&this.options.showClose&&e.addEventListener("click",()=>this.close())}setupEventListeners(){this.options.closeOnEscape&&document.addEventListener("keydown",e=>{"Escape"===e.key&&this.state.isOpen&&this.close()})}open(){this.state.isOpen||(this.options.restoreFocus&&(this.state.lastFocusedElement=document.activeElement),this.state.isOpen=!0,this.options.closeOnBackdrop&&this.createBackdrop(),this.options.focusTrap&&this.setupFocusTrap(),this.options.onOpen&&this.options.onOpen())}close(){this.state.isOpen&&(this.state.isOpen=!1,this.backdrop&&(this.backdrop.remove(),this.backdrop=null),this.options.restoreFocus&&this.state.lastFocusedElement&&this.state.lastFocusedElement.focus(),this.options.onClose&&this.options.onClose())}createBackdrop(){this.backdrop=document.createElement("div"),this.backdrop.className="tmyl-modal-backdrop",this.backdrop.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(0, 0, 0, 0.5);\n      z-index: 999;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    ",this.backdrop.addEventListener("click",()=>{this.options.closeOnBackdrop&&this.close()}),document.body.appendChild(this.backdrop)}setupFocusTrap(){var e;const t=null===(e=this.element)||void 0===e?void 0:e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(t&&t.length>0){var n;const e=t[0],a=t[t.length-1];null===(n=this.element)||void 0===n||n.addEventListener("keydown",t=>{"Tab"===t.key&&(t.shiftKey?document.activeElement===e&&(a.focus(),t.preventDefault()):document.activeElement===a&&(e.focus(),t.preventDefault()))})}}setElement(e){this.element=e}getState(){return(0,a.A)({},this.state)}setContent(e){if(this.element){const t=this.element.querySelector(".tmyl-modal-content, .tmyl-modal-body");t&&("string"===typeof e?t.innerHTML=e:e instanceof HTMLElement&&(t.innerHTML="",t.appendChild(e)))}}setTitle(e){if(this.element){const t=this.element.querySelector(".tmyl-modal-title, .tmyl-modal-header h2");t&&(t.textContent=e)}}setLoading(e){this.state.isLoading=e}destroy(){this.close()}}function ht(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{title:t="",content:n="",size:a="md",type:s="default",showClose:i=!0,closeOnBackdrop:o=!0,closeOnEscape:r=!0,focusTrap:l=!0,restoreFocus:c=!0,actions:d=[],onOpen:h,onClose:u,onConfirm:m,onCancel:p,onSubmit:v,onAction:g,container:y=document.body}=e;let f=null,b=null;const w={render:S,open:function(){b&&b.open();return w},close:function(){b&&b.close();return w},destroy:function(){b&&(b.destroy(),b=null);f&&f.parentNode&&f.parentNode.removeChild(f);f=null},setContent:C,setTitle:function(e){b&&b.setTitle(e);return w},setActions:_,setLoading:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];b&&b.setLoading(e);return w},getController:()=>b,getElement:()=>(f||S(),f),isOpen:()=>{var e;return(null===(e=b)||void 0===e?void 0:e.getState().isOpen)||!1},confirm:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;b&&b.confirm(e);return w},cancel:function(){b&&b.cancel();return w}};function S(){let S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;return S?(f=function(){const n=document.createElement("div");let o;switch(n.className="tmyl-modal-container",n.style.display="none",s){case"confirm":o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{title:t="Confirm Action",message:n="Are you sure?",confirmText:a="Confirm",cancelText:s="Cancel",type:i="warning"}=e,o={warning:'\n      <svg width="48" height="48" viewBox="0 0 48 48" fill="#f59e0b">\n        <path d="M24 2L2 42h44L24 2zm0 6l18 32H6l18-32z"/>\n        <path d="M22 18h4v12h-4z"/>\n        <circle cx="24" cy="34" r="2"/>\n      </svg>\n    ',error:'\n      <svg width="48" height="48" viewBox="0 0 48 48" fill="#ef4444">\n        <circle cx="24" cy="24" r="20"/>\n        <path d="M16 16l16 16m0-16L16 32" stroke="white" stroke-width="2"/>\n      </svg>\n    ',info:'\n      <svg width="48" height="48" viewBox="0 0 48 48" fill="#3b82f6">\n        <circle cx="24" cy="24" r="20"/>\n        <path d="M24 16v8m0 4h.01" stroke="white" stroke-width="2"/>\n      </svg>\n    '};return'\n    <div class="tmyl-modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="modal-title">\n      <div class="tmyl-modal tmyl-modal--md tmyl-modal--confirm">\n        <div class="tmyl-modal__header">\n          <h2 class="tmyl-modal__title" id="modal-title">'.concat(t,'</h2>\n        </div>\n        <div class="tmyl-modal__body">\n          <div style="margin-bottom: 1rem; display: flex; justify-content: center;">\n            ').concat(o[i]||o.warning,'\n          </div>\n          <p style="margin: 0; text-align: center; font-size: 1rem; line-height: 1.5;">\n            ').concat(n,'\n          </p>\n        </div>\n        <div class="tmyl-modal__actions">\n          <button class="tmyl-modal__action tmyl-modal__action--secondary" \n                  type="button" \n                  data-modal-action="cancel">\n            ').concat(s,'\n          </button>\n          <button class="tmyl-modal__action tmyl-modal__action--').concat("error"===i?"danger":"primary",'" \n                  type="button" \n                  data-modal-action="confirm"\n                  autofocus>\n            ').concat(a,"\n          </button>\n        </div>\n      </div>\n    </div>\n  ")}(e);break;case"alert":o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{title:t="Alert",message:n="Something happened",buttonText:a="OK",type:s="info"}=e,i={success:'\n      <svg width="48" height="48" viewBox="0 0 48 48" fill="#10b981">\n        <circle cx="24" cy="24" r="20"/>\n        <path d="M16 24l6 6 12-12" stroke="white" stroke-width="2" fill="none"/>\n      </svg>\n    ',warning:'\n      <svg width="48" height="48" viewBox="0 0 48 48" fill="#f59e0b">\n        <path d="M24 2L2 42h44L24 2zm0 6l18 32H6l18-32z"/>\n        <path d="M22 18h4v12h-4z"/>\n        <circle cx="24" cy="34" r="2"/>\n      </svg>\n    ',error:'\n      <svg width="48" height="48" viewBox="0 0 48 48" fill="#ef4444">\n        <circle cx="24" cy="24" r="20"/>\n        <path d="M16 16l16 16m0-16L16 32" stroke="white" stroke-width="2"/>\n      </svg>\n    ',info:'\n      <svg width="48" height="48" viewBox="0 0 48 48" fill="#3b82f6">\n        <circle cx="24" cy="24" r="20"/>\n        <path d="M24 16v8m0 4h.01" stroke="white" stroke-width="2"/>\n      </svg>\n    '};return'\n    <div class="tmyl-modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="modal-title">\n      <div class="tmyl-modal tmyl-modal--sm tmyl-modal--'.concat(s,'">\n        <div class="tmyl-modal__header">\n          <h2 class="tmyl-modal__title" id="modal-title">').concat(t,'</h2>\n        </div>\n        <div class="tmyl-modal__body">\n          <div style="margin-bottom: 1rem; display: flex; justify-content: center;">\n            ').concat(i[s]||i.info,'\n          </div>\n          <p style="margin: 0; text-align: center; font-size: 1rem; line-height: 1.5;">\n            ').concat(n,'\n          </p>\n        </div>\n        <div class="tmyl-modal__actions">\n          <button class="tmyl-modal__action tmyl-modal__action--primary" \n                  type="button" \n                  data-modal-action="ok"\n                  autofocus>\n            ').concat(a,"\n          </button>\n        </div>\n      </div>\n    </div>\n  ")}(e);break;case"form":o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{title:t="Form",size:n="md",submitText:a="Submit",cancelText:s="Cancel"}=e;return'\n    <div class="tmyl-modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="modal-title">\n      <div class="tmyl-modal tmyl-modal--'.concat(n,'">\n        <div class="tmyl-modal__header">\n          <h2 class="tmyl-modal__title" id="modal-title">').concat(t,'</h2>\n          <button class="tmyl-modal__close" \n                  type="button" \n                  aria-label="Close modal"\n                  data-modal-close>\n            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">\n              <path d="M11.854 4.146a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708-.708l7-7a.5.5 0 0 1 .708 0z"/>\n              <path d="M4.146 4.146a.5.5 0 0 0 0 .708l7 7a.5.5 0 0 0 .708-.708l-7-7a.5.5 0 0 0-.708 0z"/>\n            </svg>\n          </button>\n        </div>\n        <form data-modal-form>\n          <div class="tmyl-modal__body" data-modal-body>\n            \x3c!-- Form content will be inserted here --\x3e\n          </div>\n          <div class="tmyl-modal__actions">\n            <button class="tmyl-modal__action tmyl-modal__action--secondary" \n                    type="button" \n                    data-modal-action="cancel">\n              ').concat(s,'\n            </button>\n            <button class="tmyl-modal__action tmyl-modal__action--primary" \n                    type="submit" \n                    data-modal-action="submit">\n              ').concat(a,"\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  ")}(e);break;case"loading":o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{title:t="Loading...",message:n="Please wait"}=e;return'\n    <div class="tmyl-modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="modal-title">\n      <div class="tmyl-modal tmyl-modal--sm tmyl-modal--loading">\n        <div class="tmyl-modal__header">\n          <h2 class="tmyl-modal__title" id="modal-title">'.concat(t,'</h2>\n        </div>\n        <div class="tmyl-modal__body">\n          <div class="tmyl-modal__spinner"></div>\n          ').concat(n?'<p style="text-align: center; margin-top: 1rem; color: #6b7280;">'.concat(n,"</p>"):"","\n        </div>\n      </div>\n    </div>\n  ")}(e);break;default:o=ct({title:t,size:a,type:s,showClose:i})}return n.innerHTML=o,n}(),b=new dt({size:a,type:s,showClose:i,closeOnBackdrop:o,closeOnEscape:r,focusTrap:l,restoreFocus:c,onOpen:h,onClose:u,onConfirm:m,onCancel:p,onSubmit:v,onAction:g}),b.initialize(f),n&&C(n),d.length>0&&_(d),"string"===typeof S&&(S=document.querySelector(S)),S&&S.appendChild(f),w):(console.error("Modal: No container provided"),w)}function C(e){return b&&b.setContent(e),w}function _(e){return b&&b.setActions(e),w}return w}const ut=new class{constructor(){this.factories=new Map,this.instances=new Map,this.registerDefaults()}registerDefaults(){this.register("search-interface",Xe),this.register("reward-system",rt),this.register("dashboard",lt),this.register("modal",ht)}register(e,t){return this.factories.set(e,t),this}create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const a=this.factories.get(e);if(!a)throw new Error("Unknown organism component type: ".concat(e));const s=a(t);return n&&this.instances.set(n,s),s}getFactory(e){return this.factories.get(e)}getInstance(e){return this.instances.get(e)}getTypes(){return Array.from(this.factories.keys())}destroyInstance(e){const t=this.instances.get(e);t&&"function"===typeof t.destroy&&t.destroy(),this.instances.delete(e)}destroyAll(){this.instances.forEach((e,t)=>{this.destroyInstance(t)}),this.instances.clear()}setSharedFoundation(e,t){this.factories.forEach((n,a)=>{try{const a=n({});a&&"function"===typeof a.setSharedFoundation&&a.setSharedFoundation(e,t)}catch(s){console.warn("Organism factory ".concat(a," does not support setSharedFoundation:"),s.message)}})}};function mt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return ut.create(e,t,n)}const pt=new class{constructor(){this.atomFactory=be,this.moleculeFactory=Ve,this.organismFactory=ut,this.initializeSharedFoundation()}initializeSharedFoundation(){this.atomFactory.setupSharedFoundation&&this.atomFactory.setupSharedFoundation(),this.moleculeFactory.setSharedFoundation&&this.moleculeFactory.setSharedFoundation(c,f),this.organismFactory.setSharedFoundation&&this.organismFactory.setSharedFoundation(c,f)}create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!==typeof e)throw new Error("Component type must be a string");const n=e.toLowerCase();if(["button","input","card","status-indicator","input-group"].includes(n))return this.atomFactory.create(n,t);if(["search-bar","action-card","content-card","file-list","notification"].includes(n))return this.moleculeFactory.create(n,t);if(["search-interface","reward-system","dashboard","modal"].includes(n)){return this.organismFactory.create(n,t).getElement()}if(["enhanced-search","campaign-selector","content-manager"].includes(n))return this.createApplication(n,t);throw new Error("Unknown component type: ".concat(e,". Available types: button, input, card, status-indicator, input-group, search-bar, action-card, content-card, file-list, notification, search-interface, reward-system, modal, enhanced-search, campaign-selector, content-manager"))}createApplication(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!{"enhanced-search":()=>Promise.resolve().then(function(){return Dt}),"campaign-selector":()=>Promise.resolve().then(function(){return Vt}),"content-manager":()=>Promise.resolve().then(function(){return Kt})}[e])throw new Error("Unknown application type: ".concat(e));return this.createPlaceholder(e,t)}createPlaceholder(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=document.createElement("div");return n.className="tmyl-placeholder tmyl-placeholder--".concat(e),n.setAttribute("data-component-type",e),n.innerHTML='\n      <div style="padding: 20px; border: 2px dashed #ccc; border-radius: 8px; text-align: center; color: #666;">\n        <h4>'.concat(e.replace("-"," ").toUpperCase(),"</h4>\n        <p>Component will be rendered here</p>\n        <small>Props: ").concat(JSON.stringify(t,null,2),"</small>\n      </div>\n    "),n}getAvailableTypes(){return{atoms:["button","input","card","status-indicator","input-group"],molecules:["search-bar","action-card","content-card","file-list","notification"],organisms:["search-interface","reward-system","modal"],applications:["enhanced-search","campaign-selector","content-manager"]}}getVariants(e){const t=e.toLowerCase();return["button","input","card","status-indicator","input-group"].includes(t)?this.atomFactory.getVariants(t):["search-bar","action-card","content-card","file-list","notification"].includes(t)?this.moleculeFactory.getVariants?this.moleculeFactory.getVariants(t):[]:["search-interface","reward-system","modal","dashboard"].includes(t)&&this.organismFactory.getVariants?this.organismFactory.getVariants(t):[]}createMultiple(e){if(!Array.isArray(e))throw new Error("createMultiple expects an array of component configurations");return e.map(e=>{let{type:t,props:n}=e;return this.create(t,n)})}createThemed(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=(0,a.A)((0,a.A)({},n),{},{"data-theme":t,className:"".concat(n.className||""," tmyl-theme-").concat(t).trim()});return this.create(e,s)}};class vt{constructor(){this.defaultProps={status:"pending",text:"",size:"md",animated:!0,showDot:!0,showText:!0,uppercase:!0,interactive:!1,analytics:!1},this.statusTypes=["pending","filled","cancelled","rejected","active","inactive","warning","info","success","error","connecting","connected","disconnected"],this.sizes=["xs","sm","md","lg"],this.ensureCSS()}ensureCSS(){}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,a.A)((0,a.A)({},this.defaultProps),e);this.statusTypes.includes(t.status)||(console.warn("Invalid status type: ".concat(t.status,". Using 'pending'.")),t.status="pending");const n=document.createElement("span");return n.className=this.buildStatusClasses(t),this.setupAccessibility(n,t),n.innerHTML=this.createStatusTemplate(t),t.interactive&&this.attachInteractions(n,t),n}buildStatusClasses(e){return["tmyl-status","tmyl-status--".concat(e.status),"tmyl-status--".concat(e.size),e.animated&&"tmyl-status--animated",e.interactive&&"tmyl-status--interactive",!e.showText&&"tmyl-status--dot-only",e.uppercase&&"tmyl-status--uppercase"].filter(Boolean).join(" ")}setupAccessibility(e,t){e.setAttribute("role","status"),e.setAttribute("aria-live","polite");const n=t.text||this.getDefaultStatusText(t.status);e.setAttribute("aria-label","Status: ".concat(n)),t.interactive&&(e.setAttribute("tabindex","0"),e.setAttribute("role","button"))}getDefaultStatusText(e){return{pending:"Pending",filled:"Filled",cancelled:"Cancelled",rejected:"Rejected",active:"Active",inactive:"Inactive",warning:"Warning",info:"Info",success:"Success",error:"Error",connecting:"Connecting",connected:"Connected",disconnected:"Disconnected"}[e]||e}createStatusTemplate(e){const t=e.text||this.getDefaultStatusText(e.status);return"\n      ".concat(e.showDot?'\n        <span class="tmyl-status__dot" aria-hidden="true"></span>\n      ':"","\n      \n      ").concat(e.showText?'\n        <span class="tmyl-status__text">'.concat(t,"</span>\n      "):"","\n      \n      ").concat("connecting"===e.status?'\n        <span class="tmyl-status__spinner" aria-hidden="true"></span>\n      ':"","\n    ")}attachInteractions(e,t){e.addEventListener("click",n=>{t.analytics&&this.trackStatusClick(t),t.onClick&&t.onClick(n),e.dispatchEvent(new CustomEvent("tmyl-status-click",{detail:{status:t.status,element:e}}))}),e.addEventListener("keydown",t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),e.click())}),e.addEventListener("mouseenter",()=>{e.classList.add("tmyl-status--hovering")}),e.addEventListener("mouseleave",()=>{e.classList.remove("tmyl-status--hovering")})}trackStatusClick(e){window.tamylaAnalytics&&window.tamylaAnalytics.track("status_indicator_click",{status:e.status,text:e.text,timestamp:Date.now()})}updateStatus(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const a=Array.from(e.classList).find(e=>e.startsWith("tmyl-status--")&&this.statusTypes.includes(e.replace("tmyl-status--","")));if(a&&e.classList.remove(a),e.classList.add("tmyl-status--".concat(t)),null!==n){const t=e.querySelector(".tmyl-status__text");t&&(t.textContent=n)}const s=n||this.getDefaultStatusText(t);e.setAttribute("aria-label","Status: ".concat(s)),e.classList.add("tmyl-status--updating"),setTimeout(()=>{e.classList.remove("tmyl-status--updating")},300)}createRealTime(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)((0,a.A)({},e),{},{animated:!0,status:e.status||"connecting"}))}createPending(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)((0,a.A)({},e),{},{status:"pending"}))}createSuccess(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)((0,a.A)({},e),{},{status:"success"}))}createError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)((0,a.A)({},e),{},{status:"error"}))}createWarning(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)((0,a.A)({},e),{},{status:"warning"}))}createConnected(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)((0,a.A)({},e),{},{status:"connected",animated:!0}))}createDisconnected(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)((0,a.A)({},e),{},{status:"disconnected"}))}createBadge(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.create((0,a.A)((0,a.A)({},e),{},{size:"sm",uppercase:!0,showDot:!1}))}}new vt;function gt(e){return'\n    <div class="tmyl-action-card__background"></div>\n    <div class="tmyl-action-card__content">\n      '.concat(function(e){return e.icon?'\n    <div class="tmyl-action-card__icon" aria-hidden="true">\n      '.concat(e.icon,"\n    </div>\n  "):""}(e),"\n      ").concat(function(e){return'\n    <div class="tmyl-action-card__info">\n      <h3 class="tmyl-action-card__title">'.concat(e.title,"</h3>\n      ").concat(function(e){return e.description?'\n    <p class="tmyl-action-card__description">'.concat(e.description,"</p>\n  "):""}(e),"\n      ").concat(function(e){return e.showProgress&&null!==e.progress?'\n    <div class="tmyl-action-card__progress">\n      <div class="tmyl-action-card__progress-bar">\n        <div class="tmyl-action-card__progress-fill" style="width: '.concat(e.progress,'%"></div>\n      </div>\n      <span class="tmyl-action-card__progress-text">').concat(e.progress,"% complete</span>\n    </div>\n  "):""}(e),"\n    </div>\n  ")}(e),"\n      ").concat(function(e){return e.showReward&&e.reward?'\n    <div class="tmyl-action-card__reward" aria-label="Reward: '.concat(e.reward,'">\n      ').concat(e.reward,"\n    </div>\n  "):""}(e),"\n      ").concat(function(e){switch(e.status){case"completed":return'\n    <div class="tmyl-action-card__check" aria-hidden="true">\n      <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">\n        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>\n      </svg>\n    </div>\n  ';case"locked":return'\n    <div class="tmyl-action-card__lock" aria-hidden="true">\n      <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">\n        <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM12 17c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM15.1 8H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>\n      </svg>\n    </div>\n  ';default:return""}}(e),"\n    </div>\n    ").concat(function(e){return e.interactive?'\n    <div class="tmyl-action-card__ripple-container"></div>\n  ':""}(e),"\n  ")}class yt{constructor(e,t){this.element=e,this.props=t,this.isDestroyed=!1,this.init()}init(){this.setupAccessibility(),this.attachEventListeners()}setupAccessibility(){this.element.setAttribute("role",this.props.interactive?"button":"article"),this.element.setAttribute("tabindex","disabled"===this.props.status?"-1":"0"),"completed"===this.props.status?this.element.setAttribute("aria-label","".concat(this.props.title," - Completed")):"locked"===this.props.status&&(this.element.setAttribute("aria-label","".concat(this.props.title," - Locked")),this.element.setAttribute("aria-disabled","true"))}attachEventListeners(){this.props.interactive&&"disabled"!==this.props.status&&"locked"!==this.props.status&&(this.setupHoverEffects(),this.setupClickHandling(),this.setupKeyboardInteraction(),this.setupFocusManagement())}setupHoverEffects(){this.element.addEventListener("mouseenter",this.handleMouseEnter.bind(this)),this.element.addEventListener("mouseleave",this.handleMouseLeave.bind(this))}setupClickHandling(){this.element.addEventListener("click",this.handleClick.bind(this))}setupKeyboardInteraction(){this.element.addEventListener("keydown",this.handleKeydown.bind(this))}setupFocusManagement(){this.element.addEventListener("focus",this.handleFocus.bind(this)),this.element.addEventListener("blur",this.handleBlur.bind(this))}handleMouseEnter(){"available"===this.props.status&&this.element.classList.add("tmyl-action-card--hovering")}handleMouseLeave(){this.element.classList.remove("tmyl-action-card--hovering")}handleClick(e){"available"===this.props.status&&(this.createRippleEffect(e),this.trackAnalytics(),this.triggerCallbacks(e),this.dispatchCustomEvent(e))}handleKeydown(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.element.click())}handleFocus(){this.element.classList.add("tmyl-action-card--focused")}handleBlur(){this.element.classList.remove("tmyl-action-card--focused")}createRippleEffect(e){const t=this.element.querySelector(".tmyl-action-card__ripple-container");if(!t)return;const n=document.createElement("span");n.className="tmyl-action-card__ripple";const a=this.element.getBoundingClientRect(),s=1.5*Math.max(a.width,a.height),i=e.clientX-a.left-s/2,o=e.clientY-a.top-s/2;n.style.width=n.style.height=s+"px",n.style.left=i+"px",n.style.top=o+"px",t.appendChild(n),setTimeout(()=>{!this.isDestroyed&&n.parentNode&&n.remove()},800)}trackAnalytics(){this.props.analytics&&window.tamylaAnalytics&&window.tamylaAnalytics.track("action_card_click",{title:this.props.title,status:this.props.status,color:this.props.color,reward:this.props.reward,timestamp:Date.now()})}triggerCallbacks(e){this.props.onClick&&this.props.onClick(e)}dispatchCustomEvent(e){this.element.dispatchEvent(new CustomEvent("tmyl-action-card-click",{detail:{props:this.props,element:this.element}}))}updateProgress(e){const t=this.element.querySelector(".tmyl-action-card__progress-fill"),n=this.element.querySelector(".tmyl-action-card__progress-text");t&&(t.style.width=e+"%"),n&&(n.textContent="".concat(e,"% complete")),e>=100&&this.markAsCompleted()}markAsCompleted(){this.element.classList.remove("tmyl-action-card--available"),this.element.classList.add("tmyl-action-card--completed"),this.element.setAttribute("aria-label",this.element.querySelector(".tmyl-action-card__title").textContent+" - Completed"),this.element.classList.add("tmyl-action-card--completing"),setTimeout(()=>{this.isDestroyed||this.element.classList.remove("tmyl-action-card--completing")},1e3)}destroy(){this.isDestroyed=!0}}const ft={buildCardClasses:e=>["tmyl-action-card","tmyl-action-card--".concat(e.status),"tmyl-action-card--".concat(e.color),"tmyl-action-card--".concat(e.size),e.interactive&&"tmyl-action-card--interactive",e.showProgress&&"tmyl-action-card--with-progress"].filter(Boolean).join(" "),validateProps(e){const t=[];return e.title||t.push("Title is required"),e.status&&!["available","completed","locked","disabled"].includes(e.status)&&t.push("Invalid status value"),e.color&&!["primary","secondary","success","warning","info"].includes(e.color)&&t.push("Invalid color value"),e.size&&!["sm","md","lg"].includes(e.size)&&t.push("Invalid size value"),t}},bt={title:"",description:"",icon:"",reward:"",progress:null,status:"available",color:"primary",size:"md",interactive:!0,showProgress:!1,showReward:!0,analytics:!1},wt={statuses:["available","completed","locked","disabled"],colors:["primary","secondary","success","warning","info"],sizes:["sm","md","lg"],animations:{ripple:800,completion:1e3,hover:200,focus:150},accessibility:{tabIndex:{enabled:"0",disabled:"-1"},roles:{interactive:"button",static:"article"}},classNames:{base:"tmyl-action-card",status:"tmyl-action-card--",color:"tmyl-action-card--",size:"tmyl-action-card--",interactive:"tmyl-action-card--interactive",withProgress:"tmyl-action-card--with-progress",hovering:"tmyl-action-card--hovering",focused:"tmyl-action-card--focused",completing:"tmyl-action-card--completing"}},St={validateStatus:e=>wt.statuses.includes(e),validateColor:e=>wt.colors.includes(e),validateSize:e=>wt.sizes.includes(e),validateProgress:e=>null===e||"number"===typeof e&&e>=0&&e<=100,validateProps(e){const t=[];return e.title&&"string"===typeof e.title||t.push("Title must be a non-empty string"),e.status&&!this.validateStatus(e.status)&&t.push("Invalid status. Must be one of: ".concat(wt.statuses.join(", "))),e.color&&!this.validateColor(e.color)&&t.push("Invalid color. Must be one of: ".concat(wt.colors.join(", "))),e.size&&!this.validateSize(e.size)&&t.push("Invalid size. Must be one of: ".concat(wt.sizes.join(", "))),void 0===e.progress||this.validateProgress(e.progress)||t.push("Progress must be null or a number between 0 and 100"),t}};wt.colors,wt.sizes;class Ct{constructor(){this.defaultProps=bt,this.config=wt,this.validation=St,this.ensureCSS()}ensureCSS(){}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,a.A)((0,a.A)({},this.defaultProps),e),n=this.validation.validateProps(t);n.length>0&&console.warn("Action Card validation errors:",n);const s=document.createElement("div");s.className=ft.buildCardClasses(t),s.innerHTML=gt(t);const i=new yt(s,t);return s._actionCardController=i,s}updateProgress(e,t){const n=e._actionCardController;n&&n.updateProgress(t)}markAsCompleted(e){const t=e._actionCardController;t&&t.markAsCompleted()}destroy(e){const t=e._actionCardController;t&&(t.destroy(),delete e._actionCardController)}createAvailable(e){return this.create((0,a.A)((0,a.A)({},e),{},{status:"available"}))}createCompleted(e){return this.create((0,a.A)((0,a.A)({},e),{},{status:"completed"}))}createLocked(e){return this.create((0,a.A)((0,a.A)({},e),{},{status:"locked"}))}createWithProgress(e){return this.create((0,a.A)((0,a.A)({},e),{},{showProgress:!0}))}}new Ct;function _t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{type:t="info",title:n="",message:a="",showClose:s=!0,showProgress:i=!0,duration:o=4e3,actions:r=[]}=e,l=r&&r.length>0,c=n&&""!==n.trim();return'\n    <div class="tmyl-notification tmyl-notification--'.concat(t,' tmyl-notification--entering" \n         role="alert" \n         aria-live="polite"\n         data-notification-type="').concat(t,'">\n      \n      ').concat(function(e){const t={success:'\n      <svg class="tmyl-notification__icon" viewBox="0 0 20 20" fill="currentColor">\n        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />\n      </svg>\n    ',warning:'\n      <svg class="tmyl-notification__icon" viewBox="0 0 20 20" fill="currentColor">\n        <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />\n      </svg>\n    ',error:'\n      <svg class="tmyl-notification__icon" viewBox="0 0 20 20" fill="currentColor">\n        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />\n      </svg>\n    ',info:'\n      <svg class="tmyl-notification__icon" viewBox="0 0 20 20" fill="currentColor">\n        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />\n      </svg>\n    '};return t[e]||t.info}(t),'\n      \n      <div class="tmyl-notification__content">\n        ').concat(c?'<h4 class="tmyl-notification__title">'.concat(n,"</h4>"):"",'\n        <p class="tmyl-notification__message">').concat(a,"</p>\n        ").concat(l?function(e){if(!e||0===e.length)return"";const t=e.map(e=>{const t=["tmyl-notification__action",e.primary?"tmyl-notification__action--primary":""].filter(Boolean).join(" ");return'\n      <button class="'.concat(t,'" \n              type="button"\n              data-notification-action="').concat(e.action||"",'"\n              ').concat(e.disabled?"disabled":"",">\n        ").concat(e.text,"\n      </button>\n    ")}).join("");return'\n    <div class="tmyl-notification__actions">\n      '.concat(t,"\n    </div>\n  ")}(r):"","\n      </div>\n      \n      ").concat(s?'\n    <button class="tmyl-notification__close" \n            type="button" \n            aria-label="Close notification"\n            data-notification-close>\n      <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">\n        <path d="M6.75 6l3.25-3.25-.75-.75L6 5.25 2.75 2l-.75.75L5.25 6 2 9.25l.75.75L6 6.75l3.25 3.25.75-.75L6.75 6z"/>\n      </svg>\n    </button>\n  ':"","\n      ").concat(i&&o>0?function(e){return'\n    <div class="tmyl-notification__progress" \n         style="--notification-duration: '.concat(e,'ms"></div>\n  ')}(o):"","\n    </div>\n  ")}class Et{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props=(0,a.A)({type:"info",title:"",message:"",duration:4e3,position:"top-right",showClose:!0,showProgress:!0,pauseOnHover:!0,autoDismiss:!0,actions:[],onShow:null,onHide:null,onClick:null,onAction:null},e),this.state={isVisible:!1,isExiting:!1,isPaused:!1,timeRemaining:this.props.duration},this.element=null,this.container=null,this.dismissTimer=null,this.startTime=null,this.pausedTime=null}initialize(e){return this.element=e,this.setupEventListeners(),this.setupProgressTracking(),this}setupEventListeners(){if(!this.element)return;const e=this.element.querySelector("[data-notification-close]");e&&e.addEventListener("click",this.hide.bind(this));this.element.querySelectorAll("[data-notification-action]").forEach(e=>{e.addEventListener("click",e=>{const t=e.currentTarget.dataset.notificationAction;this.handleAction(t,e)})}),this.element.addEventListener("click",e=>{"BUTTON"!==e.target.tagName&&this.props.onClick&&this.props.onClick(e)}),this.props.pauseOnHover&&(this.element.addEventListener("mouseenter",this.pause.bind(this)),this.element.addEventListener("mouseleave",this.resume.bind(this))),this.element.addEventListener("keydown",this.handleKeyDown.bind(this))}setupProgressTracking(){var e;if(!this.props.autoDismiss||this.props.duration<=0)return;const t=null===(e=this.element)||void 0===e?void 0:e.querySelector(".tmyl-notification__progress");t&&(t.style.animation="none",t.offsetHeight,t.style.animation="notificationProgress ".concat(this.props.duration,"ms linear forwards"))}handleKeyDown(e){switch(e.key){case"Escape":e.preventDefault(),this.hide();break;case"Enter":case" ":const t=document.activeElement;t&&t.hasAttribute("data-notification-action")&&t.click()}}handleAction(e,t){if(this.props.onAction){if(!1===this.props.onAction(e,t))return}this.hide()}show(){return this.state.isVisible||(this.setState({isVisible:!0,isExiting:!1}),this.element&&(this.element.classList.add("tmyl-notification--entering"),this.element.classList.remove("tmyl-notification--exiting")),this.props.autoDismiss&&this.props.duration>0&&this.startDismissTimer(),this.props.onShow&&this.props.onShow()),this}async hide(){return!this.state.isVisible||this.state.isExiting||(this.setState({isExiting:!0}),this.clearDismissTimer(),this.element&&(this.element.classList.add("tmyl-notification--exiting"),this.element.classList.remove("tmyl-notification--entering")),await new Promise(e=>setTimeout(e,200)),this.setState({isVisible:!1,isExiting:!1}),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.props.onHide&&this.props.onHide()),this}pause(){var e;if(!this.props.autoDismiss||this.state.isPaused)return this;this.setState({isPaused:!0}),this.pausedTime=Date.now(),this.clearDismissTimer();const t=null===(e=this.element)||void 0===e?void 0:e.querySelector(".tmyl-notification__progress");return t&&(t.style.animationPlayState="paused"),this}resume(){var e;if(!this.props.autoDismiss||!this.state.isPaused)return this;if(this.setState({isPaused:!1}),this.pausedTime&&this.startTime){const e=this.pausedTime-this.startTime;this.state.timeRemaining=Math.max(0,this.props.duration-e)}this.state.timeRemaining>0&&this.startDismissTimer(this.state.timeRemaining);const t=null===(e=this.element)||void 0===e?void 0:e.querySelector(".tmyl-notification__progress");return t&&(t.style.animationPlayState="running",this.state.timeRemaining<this.props.duration&&(t.style.animationDuration="".concat(this.state.timeRemaining,"ms"))),this}startDismissTimer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.duration;this.clearDismissTimer(),this.startTime=Date.now(),this.dismissTimer=setTimeout(()=>{this.hide()},e)}clearDismissTimer(){this.dismissTimer&&(clearTimeout(this.dismissTimer),this.dismissTimer=null)}updateContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object.assign(this.props,e),void 0!==e.title){var t;const n=null===(t=this.element)||void 0===t?void 0:t.querySelector(".tmyl-notification__title");n&&(n.textContent=e.title)}if(void 0!==e.message){var n;const t=null===(n=this.element)||void 0===n?void 0:n.querySelector(".tmyl-notification__message");t&&(t.textContent=e.message)}if(void 0!==e.type){var a;const t=null===(a=this.element)||void 0===a?void 0:a.dataset.notificationType;t&&this.element&&(this.element.classList.remove("tmyl-notification--".concat(t)),this.element.classList.add("tmyl-notification--".concat(e.type)),this.element.dataset.notificationType=e.type)}return this}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;if(!this.props.autoDismiss||this.state.isPaused)return this;this.clearDismissTimer();const t=this.startTime?Date.now()-this.startTime:0,n=Math.max(e,this.props.duration-t+e);return this.startDismissTimer(n),this}persist(){var e;this.props.autoDismiss=!1,this.clearDismissTimer();const t=null===(e=this.element)||void 0===e?void 0:e.querySelector(".tmyl-notification__progress");return t&&(t.style.display="none"),this}setState(e){Object.assign(this.state,e)}getState(){return(0,a.A)({},this.state)}getTimeRemaining(){if(!this.props.autoDismiss||this.state.isPaused)return this.state.timeRemaining;if(this.startTime){const e=Date.now()-this.startTime;return Math.max(0,this.props.duration-e)}return this.props.duration}destroy(){this.clearDismissTimer(),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.container=null}}function At(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{type:t="info",title:n="",message:a="",duration:s=4e3,position:i="top-right",showClose:o=!0,showProgress:r=!0,pauseOnHover:l=!0,autoDismiss:c=!0,actions:d=[],onShow:h,onHide:u,onClick:m,onAction:p,container:v=null}=e;let g=null,y=null,f=null;const b={render:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;return f=S(i,e),g=w(),y=new Et({type:t,title:n,message:a,duration:s,position:i,showClose:o,showProgress:r,pauseOnHover:l,autoDismiss:c,actions:d,onShow:h,onHide:u,onClick:m,onAction:p}),y.initialize(g),f.appendChild(g),b},show:function(){y&&y.show();return b},hide:function(){y&&y.hide();return b},destroy:function(){y&&(y.destroy(),y=null);g=null,f=null},updateContent:C,setTitle:function(e){return C({title:e})},setMessage:function(e){return C({message:e})},setType:function(e){return C({type:e})},pause:function(){y&&y.pause();return b},resume:function(){y&&y.resume();return b},extend:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;y&&y.extend(e);return b},persist:function(){y&&y.persist();return b},getController:()=>y,getElement:()=>g,isVisible:()=>{var e;return(null===(e=y)||void 0===e?void 0:e.getState().isVisible)||!1},getTimeRemaining:()=>{var e;return(null===(e=y)||void 0===e?void 0:e.getTimeRemaining())||0}};function w(){const e=document.createElement("div");return e.innerHTML=_t({type:t,title:n,message:a,showClose:o,showProgress:r,duration:s,actions:d}),e.firstElementChild}function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;const n="tmyl-notifications-".concat(e);let a=document.getElementById(n);if(!a){const n=document.createElement("div");n.innerHTML=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top-right";return'\n    <div class="tmyl-notification-container tmyl-notification-container--'.concat(e,'" \n         id="tmyl-notifications-').concat(e,'"\n         aria-live="polite"\n         aria-label="Notifications">\n    </div>\n  ')}(e),a=n.firstElementChild,"string"===typeof t&&(t=document.querySelector(t)),(t||document.body).appendChild(a)}return a}function C(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y&&y.updateContent(e),b}return b}class Lt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=(0,a.A)({maxNotifications:5,defaultPosition:"top-right",defaultDuration:4e3,stackOldest:"remove"},e),this.notifications=new Map,this.containers=new Map,this.idCounter=0}show(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=this.generateId(),i=n.position||this.options.defaultPosition;this.enforceLimit(i);const o=At((0,a.A)({type:e,message:t,duration:this.options.defaultDuration,position:i,onHide:()=>{this.remove(s)}},n));return o.render().show(),this.notifications.set(s,{notification:o,position:i,timestamp:Date.now()}),{id:s,notification:o}}success(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.show("success",e,t)}error(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.show("error",e,(0,a.A)({duration:5e3},t))}warning(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.show("warning",e,t)}info(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.show("info",e,t)}hide(e){const t=this.notifications.get(e);t&&t.notification.hide()}remove(e){const t=this.notifications.get(e);t&&(t.notification.destroy(),this.notifications.delete(e))}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?this.notifications.forEach((t,n)=>{t.position===e&&this.remove(n)}):this.notifications.forEach((e,t)=>{this.remove(t)})}enforceLimit(e){const t=Array.from(this.notifications.entries()).filter(t=>{let[n,a]=t;return a.position===e}).sort((e,t)=>{let[,n]=e,[,a]=t;return n.timestamp-a.timestamp});for(;t.length>=this.options.maxNotifications;){const[e]=t.shift();"remove"===this.options.stackOldest?this.remove(e):this.hide(e)}}generateId(){return"notification-".concat(++this.idCounter,"-").concat(Date.now())}getCount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?Array.from(this.notifications.values()).filter(t=>t.position===e).length:this.notifications.size}hasNotifications(e){return this.getCount(e)>0}}new Lt;const xt={application(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{title:t="Enhanced Search",description:n="Intelligent content discovery with natural language processing",layout:a="vertical",showSidebar:s=!0,showAnalytics:i=!1}=e;return'\n      <div class="tmyl-enhanced-search" data-layout="'.concat(a,'">\n        ').concat(this.header({title:t,description:n}),"\n        ").concat(s?this.sidebar():"","\n        ").concat(this.main(),"\n        ").concat(this.footer(),"\n        ").concat(i?this.analytics():"","\n      </div>\n    ")},header(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{title:t="Enhanced Search",description:n="Intelligent content discovery",showLogo:a=!1,logoUrl:s="",breadcrumbs:i=[]}=e;return'\n      <header class="tmyl-enhanced-search__header">\n        '.concat(a?'<img src="'.concat(s,'" alt="Logo" class="tmyl-enhanced-search__logo">'):"","\n        ").concat(i.length>0?this.breadcrumbs(i):"",'\n        <h1 class="tmyl-enhanced-search__title">').concat(t,'</h1>\n        <p class="tmyl-enhanced-search__description">').concat(n,'</p>\n        <div class="tmyl-enhanced-search__search-section" data-search-container>\n          \x3c!-- Search bar will be mounted here --\x3e\n        </div>\n      </header>\n    ')},breadcrumbs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e.length)return"";const t=e.map((t,n)=>{const a=n===e.length-1,s=a?t.name:'<a href="'.concat(t.url,'" class="tmyl-enhanced-search__breadcrumb-link">').concat(t.name,"</a>");return'\n        <span class="tmyl-enhanced-search__breadcrumb '.concat(a?"tmyl-enhanced-search__breadcrumb--current":"",'">\n          ').concat(s,"\n        </span>\n      ")}).join('<span class="tmyl-enhanced-search__breadcrumb-separator">/</span>');return'\n      <nav class="tmyl-enhanced-search__breadcrumbs" aria-label="Breadcrumb">\n        '.concat(t,"\n      </nav>\n    ")},sidebar(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{showRecentSearches:t=!0,showFilters:n=!0,showSavedSearches:a=!1,customSections:s=[]}=e;return'\n      <aside class="tmyl-enhanced-search__sidebar">\n        '.concat(n?this.filtersSection():"","\n        ").concat(t?this.recentSearchesSection():"","\n        ").concat(a?this.savedSearchesSection():"","\n        ").concat(s.map(e=>this.customSection(e)).join(""),"\n      </aside>\n    ")},filtersSection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{title:t="Filters",filters:n=[]}=e;return'\n      <div class="tmyl-enhanced-search__filter-group">\n        <h3 class="tmyl-enhanced-search__filter-title">'.concat(t,'</h3>\n        <div class="tmyl-enhanced-search__filters" data-filters-container>\n          \x3c!-- Filters will be mounted here --\x3e\n        </div>\n      </div>\n    ')},recentSearchesSection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{title:t="Recent Searches",searches:n=[],maxItems:a=5}=e,s=n.slice(0,a).map(e=>'<li class="tmyl-enhanced-search__recent-search" \n           data-search-query="'.concat(e.query,'"\n           title="').concat(e.query," - ").concat(e.timestamp,'">\n         ').concat(e.query,"\n       </li>")).join("");return'\n      <div class="tmyl-enhanced-search__filter-group">\n        <h3 class="tmyl-enhanced-search__filter-title">'.concat(t,'</h3>\n        <ul class="tmyl-enhanced-search__recent-searches">\n          ').concat(s,"\n          ").concat(0===n.length?'<li class="tmyl-enhanced-search__recent-search tmyl-enhanced-search__recent-search--empty">No recent searches</li>':"","\n        </ul>\n      </div>\n    ")},savedSearchesSection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{title:t="Saved Searches",searches:n=[]}=e,a=n.map(e=>'<li class="tmyl-enhanced-search__saved-search" \n           data-search-id="'.concat(e.id,'">\n         <span class="tmyl-enhanced-search__saved-search-name">').concat(e.name,'</span>\n         <button class="tmyl-enhanced-search__saved-search-delete" \n                 data-search-id="').concat(e.id,'"\n                 aria-label="Delete saved search">\xd7</button>\n       </li>')).join("");return'\n      <div class="tmyl-enhanced-search__filter-group">\n        <h3 class="tmyl-enhanced-search__filter-title">'.concat(t,'</h3>\n        <ul class="tmyl-enhanced-search__saved-searches">\n          ').concat(a,"\n          ").concat(0===n.length?'<li class="tmyl-enhanced-search__saved-search tmyl-enhanced-search__saved-search--empty">No saved searches</li>':"","\n        </ul>\n      </div>\n    ")},customSection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{title:t="Custom Section",content:n="",className:a=""}=e;return'\n      <div class="tmyl-enhanced-search__filter-group '.concat(a,'">\n        <h3 class="tmyl-enhanced-search__filter-title">').concat(t,'</h3>\n        <div class="tmyl-enhanced-search__custom-content">\n          ').concat(n,"\n        </div>\n      </div>\n    ")},main(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{showControls:t=!0,showPagination:n=!0}=e;return'\n      <main class="tmyl-enhanced-search__main">\n        '.concat(t?this.controls():"",'\n        <div class="tmyl-enhanced-search__results" data-results-container>\n          ').concat(this.loadingState(),"\n        </div>\n        ").concat(n?this.pagination():"","\n      </main>\n    ")},controls(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{viewModes:t=["grid","list"],sortOptions:n=[{value:"relevance",label:"Relevance"},{value:"date",label:"Date"},{value:"title",label:"Title"}],showExport:a=!1}=e,s=t.map(e=>'<button class="tmyl-enhanced-search__view-toggle" \n               data-view-mode="'.concat(e,'"\n               aria-label="Switch to ').concat(e,' view">\n         <span class="tmyl-enhanced-search__view-icon tmyl-enhanced-search__view-icon--').concat(e,'"></span>\n         ').concat(e,"\n       </button>")).join(""),i=n.map(e=>'<option value="'.concat(e.value,'">').concat(e.label,"</option>")).join("");return'\n      <div class="tmyl-enhanced-search__controls">\n        <div class="tmyl-enhanced-search__view-controls">\n          '.concat(s,'\n        </div>\n        <div class="tmyl-enhanced-search__sort-controls">\n          <label for="sort-select" class="tmyl-enhanced-search__sort-label">Sort by:</label>\n          <select id="sort-select" class="tmyl-enhanced-search__sort-select">\n            ').concat(i,"\n          </select>\n        </div>\n        ").concat(a?this.exportControls():"","\n      </div>\n    ")},exportControls:()=>'\n      <div class="tmyl-enhanced-search__export-controls">\n        <button class="tmyl-enhanced-search__export-btn" data-export-type="csv">\n          Export CSV\n        </button>\n        <button class="tmyl-enhanced-search__export-btn" data-export-type="json">\n          Export JSON\n        </button>\n      </div>\n    ',resultsContainer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{viewMode:t="grid",results:n=[],total:a=0,searchTime:s=0}=e;return 0===n.length?this.emptyState():'\n      <div class="tmyl-enhanced-search__results-wrapper">\n        '.concat(this.resultsHeader({total:a,searchTime:s}),'\n        <div class="tmyl-enhanced-search__results-').concat(t,'" data-view-mode="').concat(t,'">\n          \x3c!-- Results will be mounted here by organism components --\x3e\n        </div>\n      </div>\n    ')},resultsHeader(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{total:t=0,searchTime:n=0,currentPage:a=1,perPage:s=20}=e,i=(a-1)*s+1,o=Math.min(a*s,t);return'\n      <div class="tmyl-enhanced-search__results-header">\n        <span class="tmyl-enhanced-search__results-count">\n          '.concat(t>0?"Showing ".concat(i,"-").concat(o," of ").concat(t," results"):"No results found",'\n        </span>\n        <span class="tmyl-enhanced-search__results-time">\n          ').concat(n>0?"(".concat(n,"ms)"):"","\n        </span>\n      </div>\n    ")},loadingState(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{message:t="Searching...",showSpinner:n=!0}=e;return'\n      <div class="tmyl-enhanced-search__loading">\n        '.concat(n?'<div class="tmyl-enhanced-search__loading-spinner"></div>':"",'\n        <p class="tmyl-enhanced-search__loading-message">').concat(t,"</p>\n      </div>\n    ")},emptyState(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{title:t="No results found",message:n="Try adjusting your search terms or filters",showSuggestions:a=!0,suggestions:s=["Check your spelling","Try more general keywords","Remove some filters"]}=e,i=a&&s.length>0?'\n      <ul class="tmyl-enhanced-search__empty-suggestions">\n        '.concat(s.map(e=>'<li class="tmyl-enhanced-search__empty-suggestion">'.concat(e,"</li>")).join(""),"\n      </ul>\n    "):"";return'\n      <div class="tmyl-enhanced-search__empty">\n        <div class="tmyl-enhanced-search__empty-icon">\n          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">\n            <circle cx="11" cy="11" r="8"></circle>\n            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>\n          </svg>\n        </div>\n        <h3 class="tmyl-enhanced-search__empty-title">'.concat(t,'</h3>\n        <p class="tmyl-enhanced-search__empty-message">').concat(n,"</p>\n        ").concat(i,"\n      </div>\n    ")},errorState(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{title:t="Search Error",message:n="Something went wrong while searching",showRetry:a=!0,errorCode:s="",technical:i=!1}=e;return'\n      <div class="tmyl-enhanced-search__error">\n        <h3 class="tmyl-enhanced-search__error-title">'.concat(t,'</h3>\n        <p class="tmyl-enhanced-search__error-message">').concat(n,"</p>\n        ").concat(s&&i?'<code class="tmyl-enhanced-search__error-code">'.concat(s,"</code>"):"","\n        ").concat(a?'<button class="tmyl-enhanced-search__error-retry">Try Again</button>':"","\n      </div>\n    ")},pagination(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{currentPage:t=1,totalPages:n=1,perPage:a=20,total:s=0,showPageSize:i=!0}=e;if(n<=1)return"";const o=1===t,r=t===n,l=this.generatePageNumbers(t,n).map(e=>{if("..."===e)return'<span class="tmyl-enhanced-search__pagination-ellipsis">...</span>';const n=e===t;return'\n        <button class="tmyl-enhanced-search__pagination-page '.concat(n?"tmyl-enhanced-search__pagination-page--active":"",'"\n                data-page="').concat(e,'"\n                ').concat(n?'aria-current="page"':"",">\n          ").concat(e,"\n        </button>\n      ")}).join(""),c=i?'\n      <div class="tmyl-enhanced-search__pagination-size">\n        <label for="page-size-select">Items per page:</label>\n        <select id="page-size-select" class="tmyl-enhanced-search__pagination-size-select">\n          <option value="10" '.concat(10===a?"selected":"",'>10</option>\n          <option value="20" ').concat(20===a?"selected":"",'>20</option>\n          <option value="50" ').concat(50===a?"selected":"",'>50</option>\n          <option value="100" ').concat(100===a?"selected":"",">100</option>\n        </select>\n      </div>\n    "):"";return'\n      <nav class="tmyl-enhanced-search__pagination" aria-label="Search results pagination">\n        <div class="tmyl-enhanced-search__pagination-info">\n          Page '.concat(t," of ").concat(n," (").concat(s,' total items)\n        </div>\n        <div class="tmyl-enhanced-search__pagination-controls">\n          <button class="tmyl-enhanced-search__pagination-prev" \n                  data-page="').concat(t-1,'"\n                  ').concat(o?"disabled":"",">\n            Previous\n          </button>\n          ").concat(l,'\n          <button class="tmyl-enhanced-search__pagination-next" \n                  data-page="').concat(t+1,'"\n                  ').concat(r?"disabled":"",">\n            Next\n          </button>\n        </div>\n        ").concat(c,"\n      </nav>\n    ")},generatePageNumbers(e,t){const n=[];n.push(1);const a=Math.max(2,e-2),s=Math.min(t-1,e+2);a>2&&n.push("...");for(let i=a;i<=s;i++)n.push(i);return s<t-1&&n.push("..."),t>1&&n.push(t),n},analytics(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{searchStats:t={},insights:n=[],showDetails:a=!1}=e,s=n.map(e=>'<span class="tmyl-enhanced-search__insight-tag">'.concat(e,"</span>")).join("");return'\n      <div class="tmyl-enhanced-search__analytics">\n        <h3>Search Analytics</h3>\n        <p>Search performance and insights</p>\n        '.concat(s?'<div class="tmyl-enhanced-search__insights">'.concat(s,"</div>"):"","\n        ").concat(a?this.analyticsDetails(t):"","\n      </div>\n    ")},analyticsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{totalSearches:t=0,avgResponseTime:n=0,popularTerms:a=[],successRate:s=0}=e;return'\n      <div class="tmyl-enhanced-search__analytics-details">\n        <div class="tmyl-enhanced-search__stat">\n          <span class="tmyl-enhanced-search__stat-value">'.concat(t,'</span>\n          <span class="tmyl-enhanced-search__stat-label">Total Searches</span>\n        </div>\n        <div class="tmyl-enhanced-search__stat">\n          <span class="tmyl-enhanced-search__stat-value">').concat(n,'ms</span>\n          <span class="tmyl-enhanced-search__stat-label">Avg Response</span>\n        </div>\n        <div class="tmyl-enhanced-search__stat">\n          <span class="tmyl-enhanced-search__stat-value">').concat(s,'%</span>\n          <span class="tmyl-enhanced-search__stat-label">Success Rate</span>\n        </div>\n      </div>\n    ')},footer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{showStats:t=!0,showInfo:n=!0,customLinks:a=[]}=e,s=a.map(e=>'<a href="'.concat(e.url,'" class="tmyl-enhanced-search__footer-link">').concat(e.label,"</a>")).join(" | ");return'\n      <footer class="tmyl-enhanced-search__footer">\n        '.concat(t?this.footerStats():"","\n        ").concat(n?'<div class="tmyl-enhanced-search__footer-info">\n          Enhanced Search Application\n          '.concat(s?" | ".concat(s):"","\n        </div>"):"","\n      </footer>\n    ")},footerStats(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{totalDocuments:t=0,lastUpdated:n="",searchEngines:a=["Meilisearch","Vectorize"]}=e;return'\n      <div class="tmyl-enhanced-search__stats">\n        <div class="tmyl-enhanced-search__stat">\n          <span class="tmyl-enhanced-search__stat-value">'.concat(t.toLocaleString(),'</span>\n          <span class="tmyl-enhanced-search__stat-label">Documents</span>\n        </div>\n        <div class="tmyl-enhanced-search__stat">\n          <span class="tmyl-enhanced-search__stat-value">').concat(a.length,'</span>\n          <span class="tmyl-enhanced-search__stat-label">Search Engines</span>\n        </div>\n        <div class="tmyl-enhanced-search__stat">\n          <span class="tmyl-enhanced-search__stat-value">').concat(n||"Now",'</span>\n          <span class="tmyl-enhanced-search__stat-label">Last Updated</span>\n        </div>\n      </div>\n    ')}};class Mt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.element=e,this.options=(0,a.A)({meilisearchUrl:"/api/search",apiBase:"/api/content",voiceEnabled:!0,naturalLanguage:!0,smartFilters:!0,recentSearches:!0,searchSuggestions:!0,placeholder:'Search content... Try "Find PDFs about coffee from last month"',layout:"vertical",viewMode:"grid",perPage:20,enableAnalytics:!0,enableAutoComplete:!0,enableExport:!1},t),this.state={query:"",results:[],filters:{},sorting:"relevance",viewMode:this.options.viewMode,currentPage:1,totalPages:0,totalResults:0,isLoading:!1,error:null,searchTime:0,recentSearches:this.loadRecentSearches(),selectedItems:new Set,analytics:{searchCount:0,totalSearchTime:0,popularTerms:new Map}},this.searchInterface=null,this.searchAPI=null,this.boundHandlers={handleSearch:this.handleSearch.bind(this),handleViewModeChange:this.handleViewModeChange.bind(this),handleSortChange:this.handleSortChange.bind(this),handlePageChange:this.handlePageChange.bind(this),handleFilterChange:this.handleFilterChange.bind(this),handleContentSelection:this.handleContentSelection.bind(this),handleBulkAction:this.handleBulkAction.bind(this),handleRecentSearchClick:this.handleRecentSearchClick.bind(this),handleKeyboardNavigation:this.handleKeyboardNavigation.bind(this),handleExport:this.handleExport.bind(this)},this.initialize()}async initialize(){try{await this.initializeSearchAPI(),this.setupEventListeners(),this.setupKeyboardNavigation(),this.setupOrganismComponents(),await this.loadInitialData(),this.emit("initialized",{controller:this})}catch(e){console.error("Enhanced Search Controller initialization failed:",e),this.handleError(e)}}async initializeSearchAPI(){var e=this;this.searchAPI={search:async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=new URLSearchParams((0,a.A)({q:t,page:n.page||1,limit:n.limit||e.options.perPage,sort:n.sort||e.state.sorting},n.filters)),i=await fetch("".concat(e.options.meilisearchUrl,"?").concat(s),{method:"GET",headers:{Authorization:"Bearer ".concat(e.getAuthToken()),"Content-Type":"application/json"}});if(!i.ok)throw new Error("Search failed: ".concat(i.statusText));return i.json()},advancedSearch:async e=>{const t=await fetch("".concat(this.options.meilisearchUrl,"/advanced"),{method:"POST",headers:{Authorization:"Bearer ".concat(this.getAuthToken()),"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Advanced search failed: ".concat(t.statusText));return t.json()},getSuggestions:async e=>{const t=await fetch("".concat(this.options.meilisearchUrl,"/suggestions?q=").concat(encodeURIComponent(e)),{headers:{Authorization:"Bearer ".concat(this.getAuthToken())}});if(!t.ok)return[];return(await t.json()).suggestions||[]}}}setupOrganismComponents(){const e=this.element.querySelector("[data-search-container]");e&&(this.searchInterface=mt.createSearchInterface({placeholder:this.options.placeholder,enableVoice:this.options.voiceEnabled,enableSuggestions:this.options.searchSuggestions,onSearch:this.boundHandlers.handleSearch,onSuggestionRequest:this.handleSuggestionRequest.bind(this),container:e}));const t=this.element.querySelector("[data-results-container]");t&&this.setupResultsDisplay(t);const n=this.element.querySelector("[data-filters-container]");n&&this.setupFiltersDisplay(n)}setupResultsDisplay(e){this.resultsContainer=e,this.updateResultsDisplay()}setupFiltersDisplay(e){this.filtersContainer=e}setupEventListeners(){this.element.querySelectorAll("[data-view-mode]").forEach(e=>{e.addEventListener("click",this.boundHandlers.handleViewModeChange)});const e=this.element.querySelector(".tmyl-enhanced-search__sort-select");e&&e.addEventListener("change",this.boundHandlers.handleSortChange),this.element.addEventListener("click",e=>{e.target.matches("[data-page]")&&this.boundHandlers.handlePageChange(e)}),this.element.addEventListener("click",e=>{e.target.matches(".tmyl-enhanced-search__recent-search")&&this.boundHandlers.handleRecentSearchClick(e)}),this.element.addEventListener("click",e=>{e.target.matches("[data-export-type]")&&this.boundHandlers.handleExport(e)}),this.element.addEventListener("click",e=>{e.target.matches(".tmyl-enhanced-search__error-retry")&&this.retryLastSearch()});const t=this.element.querySelector(".tmyl-enhanced-search__pagination-size-select");t&&t.addEventListener("change",e=>{this.options.perPage=parseInt(e.target.value),this.state.currentPage=1,this.performSearch(this.state.query)})}setupKeyboardNavigation(){this.element.addEventListener("keydown",this.boundHandlers.handleKeyboardNavigation)}handleKeyboardNavigation(e){if(e.ctrlKey||e.metaKey)switch(e.key){case"f":case"k":e.preventDefault(),this.focusSearchInput();break;case"a":e.shiftKey&&(e.preventDefault(),this.selectAllResults());break;case"e":this.options.enableExport&&(e.preventDefault(),this.handleExport({target:{dataset:{exportType:"csv"}}}))}["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)&&this.handleResultNavigation(e)}handleResultNavigation(e){const t=this.element.querySelectorAll("[data-content-item]"),n=document.activeElement,a=Array.from(t).indexOf(n);if(-1===a)return;let s=a;const i="grid"===this.state.viewMode,o=i?this.calculateItemsPerRow():1;switch(e.key){case"ArrowUp":s=i?a-o:a-1;break;case"ArrowDown":s=i?a+o:a+1;break;case"ArrowLeft":i&&(s=a-1);break;case"ArrowRight":i&&(s=a+1)}s>=0&&s<t.length&&(e.preventDefault(),t[s].focus())}calculateItemsPerRow(){const e=this.element.querySelector(".tmyl-enhanced-search__results-grid");if(!e)return 3;const t=e.offsetWidth;return Math.floor((t+24)/374)}async handleSearch(e){const{query:t,filters:n={},engine:s="auto"}=e;this.state.query=t,this.state.filters=(0,a.A)((0,a.A)({},this.state.filters),n),this.state.currentPage=1,await this.performSearch(t)}async performSearch(e){if(!e.trim())return void this.clearResults();this.setLoadingState(!0);const t=performance.now();try{var n;const s={page:this.state.currentPage,limit:this.options.perPage,sort:this.state.sorting,filters:this.state.filters};let i;i=this.isAdvancedQuery(e)?await this.searchAPI.advancedSearch((0,a.A)({query:e},s)):await this.searchAPI.search(e,s);const o=performance.now()-t;this.state.searchTime=Math.round(o),this.updateSearchResults(i),this.updateAnalytics(e,o,(null===(n=i.hits)||void 0===n?void 0:n.length)||0),this.saveRecentSearch(e)}catch(s){console.error("Search failed:",s),this.handleError(s)}finally{this.setLoadingState(!1)}}isAdvancedQuery(e){return[/\b(find|show|get|search)\b.*\b(from|in|during|before|after)\b/i,/\b(last|past|recent)\s+(week|month|year|day)\b/i,/\b(type|format|extension):\w+\b/i,/\b(by|from|author):\w+\b/i].some(t=>t.test(e))}updateSearchResults(e){this.state.results=e.hits||e.results||[],this.state.totalResults=e.estimatedTotalHits||e.total||0,this.state.totalPages=Math.ceil(this.state.totalResults/this.options.perPage),this.updateResultsDisplay(),this.updatePagination(),this.updateFiltersFromResults(e)}updateResultsDisplay(){this.resultsContainer&&(0!==this.state.results.length?(this.resultsContainer.innerHTML=xt.resultsContainer({viewMode:this.state.viewMode,results:this.state.results,total:this.state.totalResults,searchTime:this.state.searchTime}),this.mountResultsOrganisms()):this.resultsContainer.innerHTML=xt.emptyState({title:this.state.query?"No results found":"Start searching",message:this.state.query?"Try adjusting your search terms or filters":"Enter a search query to find content"}))}mountResultsOrganisms(){const e=this.element.querySelector('[data-view-mode="'.concat(this.state.viewMode,'"]'));e&&("grid"===this.state.viewMode?this.createContentCardGrid(e):this.createContentCardList(e))}createContentCardGrid(e){this.contentGrid=mt.createContentCardGrid({items:this.state.results,selectable:!0,viewMode:"grid",onItemSelect:this.boundHandlers.handleContentSelection,onItemAction:this.handleContentAction.bind(this),container:e})}createContentCardList(e){this.contentList=mt.createContentCardGrid({items:this.state.results,selectable:!0,viewMode:"list",onItemSelect:this.boundHandlers.handleContentSelection,onItemAction:this.handleContentAction.bind(this),container:e})}handleViewModeChange(e){const t=e.target.dataset.viewMode;t&&t!==this.state.viewMode&&(this.element.querySelectorAll("[data-view-mode]").forEach(e=>{e.classList.toggle("tmyl-enhanced-search__view-toggle--active",e.dataset.viewMode===t)}),this.state.viewMode=t,this.updateResultsDisplay(),this.emit("viewModeChanged",{viewMode:t}))}handleSortChange(e){this.state.sorting=e.target.value,this.state.currentPage=1,this.performSearch(this.state.query),this.emit("sortChanged",{sorting:this.state.sorting})}handlePageChange(e){const t=parseInt(e.target.dataset.page);t&&t!==this.state.currentPage&&(this.state.currentPage=t,this.performSearch(this.state.query),this.emit("pageChanged",{page:t}))}handleFilterChange(e){this.state.filters=(0,a.A)((0,a.A)({},this.state.filters),e),this.state.currentPage=1,this.performSearch(this.state.query),this.emit("filtersChanged",{filters:this.state.filters})}handleContentSelection(e){const{item:t,selected:n,selectedItems:a}=e;this.state.selectedItems=a,this.updateBulkActionControls(),this.emit("contentSelected",{item:t,selected:n,totalSelected:a.size})}handleContentAction(e){const{action:t,item:n}=e;switch(t){case"view":this.viewContent(n);break;case"download":this.downloadContent(n);break;case"share":this.shareContent(n);break;case"edit":this.editContent(n);break;default:console.warn("Unknown content action:",t)}this.emit("contentAction",e)}handleBulkAction(e){const t=e.target.dataset.bulkAction,n=Array.from(this.state.selectedItems);if(0!==n.length){switch(t){case"download":this.downloadMultipleItems(n);break;case"share":this.shareMultipleItems(n);break;case"delete":this.deleteMultipleItems(n);break;default:console.warn("Unknown bulk action:",t)}this.emit("bulkAction",{action:t,items:n})}else this.showMessage("No items selected","warning")}handleRecentSearchClick(e){const t=e.target.dataset.searchQuery;t&&(this.searchInterface&&this.searchInterface.setQuery&&this.searchInterface.setQuery(t),this.performSearch(t))}async handleSuggestionRequest(e){if(!this.options.searchSuggestions||e.length<2)return[];try{return await this.searchAPI.getSuggestions(e)}catch(t){return console.error("Failed to get suggestions:",t),[]}}async handleExport(e){const t=e.target.dataset.exportType,n=Array.from(this.state.selectedItems),a=n.length>0?n:this.state.results;if(0!==a.length)try{switch(this.setLoadingState(!0,"Preparing export..."),t){case"csv":await this.exportAsCSV(a);break;case"json":await this.exportAsJSON(a);break;default:throw new Error("Unknown export type: ".concat(t))}this.showMessage("Exported ".concat(a.length," items as ").concat(t.toUpperCase()),"success")}catch(s){console.error("Export failed:",s),this.showMessage("Export failed","error")}finally{this.setLoadingState(!1)}else this.showMessage("No items to export","warning")}async exportAsCSV(e){const t=[["Title","Summary","Type","Upload Date","File Size"],...e.map(e=>[e.title||"Untitled",e.summary||"",e.mimeType||"",e.uploadedAt||"",e.fileSize||""])].map(e=>e.map(e=>'"'.concat(e.toString().replace(/"/g,'""'),'"')).join(",")).join("\n");this.downloadFile(t,"search-results.csv","text/csv")}async exportAsJSON(e){const t=JSON.stringify({query:this.state.query,filters:this.state.filters,totalResults:this.state.totalResults,exportedAt:(new Date).toISOString(),results:e},null,2);this.downloadFile(t,"search-results.json","application/json")}downloadFile(e,t,n){const a=new Blob([e],{type:n}),s=URL.createObjectURL(a),i=document.createElement("a");i.href=s,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s)}updatePagination(){const e=this.element.querySelector(".tmyl-enhanced-search__pagination");e&&(this.state.totalPages<=1?e.style.display="none":(e.style.display="",e.innerHTML=xt.pagination({currentPage:this.state.currentPage,totalPages:this.state.totalPages,perPage:this.options.perPage,total:this.state.totalResults})))}updateFiltersFromResults(e){if(!this.filtersContainer||!e.facets)return;const t=Object.entries(e.facets).map(e=>{let[t,n]=e;return this.createFilterGroup(t,n)}).join("");this.filtersContainer.innerHTML=t,this.setupFilterEventListeners()}createFilterGroup(e,t){const n=Object.entries(t).map(t=>{let[n,a]=t;return'<label class="tmyl-enhanced-search__filter-option">\n         <input type="checkbox" value="'.concat(n,'" data-filter-key="').concat(e,'">\n         <span>').concat(n," (").concat(a,")</span>\n       </label>")}).join("");return'\n      <div class="tmyl-enhanced-search__filter-group">\n        <h4 class="tmyl-enhanced-search__filter-title">'.concat(this.formatFilterKey(e),'</h4>\n        <div class="tmyl-enhanced-search__filter-options">\n          ').concat(n,"\n        </div>\n      </div>\n    ")}formatFilterKey(e){return e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).replace(/_/g," ")}setupFilterEventListeners(){this.filtersContainer.querySelectorAll('input[type="checkbox"]').forEach(e=>{e.addEventListener("change",e=>{const t=e.target.dataset.filterKey,n=e.target.value,a=e.target.checked;this.state.filters[t]||(this.state.filters[t]=[]),a?this.state.filters[t].push(n):(this.state.filters[t]=this.state.filters[t].filter(e=>e!==n),0===this.state.filters[t].length&&delete this.state.filters[t]),this.handleFilterChange({})})})}updateBulkActionControls(){const e=this.element.querySelector(".tmyl-enhanced-search__bulk-controls");if(!e)return;const t=this.state.selectedItems.size;if(0===t)e.style.display="none";else{e.style.display="flex";const n=e.querySelector(".tmyl-enhanced-search__selected-count");n&&(n.textContent="".concat(t," selected"))}}updateAnalytics(e,t,n){if(!this.options.enableAnalytics)return;this.state.analytics.searchCount++,this.state.analytics.totalSearchTime+=t;e.toLowerCase().split(/\s+/).forEach(e=>{if(e.length>2){const t=this.state.analytics.popularTerms.get(e)||0;this.state.analytics.popularTerms.set(e,t+1)}}),this.options.analyticsEndpoint&&this.sendAnalytics({query:e,searchTime:t,resultCount:n,timestamp:(new Date).toISOString()})}async sendAnalytics(e){try{await fetch(this.options.analyticsEndpoint,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.getAuthToken())},body:JSON.stringify(e)})}catch(t){console.error("Failed to send analytics:",t)}}saveRecentSearch(e){const t={query:e,timestamp:(new Date).toISOString()};this.state.recentSearches=this.state.recentSearches.filter(t=>t.query!==e),this.state.recentSearches.unshift(t),this.state.recentSearches=this.state.recentSearches.slice(0,10);try{localStorage.setItem("tmyl-recent-searches",JSON.stringify(this.state.recentSearches))}catch(n){console.warn("Failed to save recent searches:",n)}this.updateRecentSearchesDisplay()}loadRecentSearches(){try{const e=localStorage.getItem("tmyl-recent-searches");return e?JSON.parse(e):[]}catch(e){return console.warn("Failed to load recent searches:",e),[]}}updateRecentSearchesDisplay(){const e=this.element.querySelector(".tmyl-enhanced-search__recent-searches");e&&(e.innerHTML=xt.recentSearchesSection({searches:this.state.recentSearches}))}async loadInitialData(){const e=new URLSearchParams(window.location.search).get("q");e&&(this.searchInterface&&this.searchInterface.setQuery&&this.searchInterface.setQuery(e),await this.performSearch(e))}setLoadingState(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Searching...";this.state.isLoading=e,e&&(this.resultsContainer.innerHTML=xt.loadingState({message:t}))}clearResults(){this.state.results=[],this.state.totalResults=0,this.state.totalPages=0,this.state.currentPage=1,this.updateResultsDisplay(),this.updatePagination()}handleError(e){this.state.error=e,this.resultsContainer&&(this.resultsContainer.innerHTML=xt.errorState({title:"Search Error",message:e.message||"Something went wrong while searching",showRetry:!0})),this.emit("error",{error:e})}retryLastSearch(){this.state.query&&this.performSearch(this.state.query)}focusSearchInput(){this.searchInterface&&this.searchInterface.focus&&this.searchInterface.focus()}selectAllResults(){this.contentGrid&&this.contentGrid.selectAll?this.contentGrid.selectAll():this.contentList&&this.contentList.selectAll&&this.contentList.selectAll()}getAuthToken(){return localStorage.getItem("auth_token")||""}showMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";this.emit("message",{message:e,type:t})}viewContent(e){window.open("/content/".concat(e.id),"_blank")}downloadContent(e){window.open("/api/content/".concat(e.id,"/download"),"_blank")}shareContent(e){navigator.share?navigator.share({title:e.title,text:e.summary,url:"/content/".concat(e.id)}):(navigator.clipboard.writeText("".concat(window.location.origin,"/content/").concat(e.id)),this.showMessage("Link copied to clipboard","success"))}editContent(e){window.open("/content/".concat(e.id,"/edit"),"_blank")}downloadMultipleItems(e){e.forEach(e=>{setTimeout(()=>this.downloadContent(e),100)})}shareMultipleItems(e){const t=e.map(e=>"".concat(window.location.origin,"/content/").concat(e.id)),n="Multiple files:\n".concat(t.join("\n"));navigator.share?navigator.share({title:"".concat(e.length," files"),text:n}):(navigator.clipboard.writeText(n),this.showMessage("Links copied to clipboard","success"))}async deleteMultipleItems(e){if(confirm("Delete ".concat(e.length," items? This action cannot be undone.")))try{const t=e.map(e=>fetch("/api/content/".concat(e.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(this.getAuthToken())}}));await Promise.all(t),this.performSearch(this.state.query),this.showMessage("Deleted ".concat(e.length," items"),"success")}catch(t){console.error("Delete failed:",t),this.showMessage("Delete failed","error")}}emit(e,t){const n=new CustomEvent("tmyl-enhanced-search:".concat(e),{detail:t,bubbles:!0});this.element.dispatchEvent(n)}on(e,t){this.element.addEventListener("tmyl-enhanced-search:".concat(e),t)}off(e,t){this.element.removeEventListener("tmyl-enhanced-search:".concat(e),t)}search(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.handleSearch((0,a.A)({query:e},t))}setFilters(e){this.state.filters=e,this.performSearch(this.state.query)}getState(){return(0,a.A)({},this.state)}getResults(){return[...this.state.results]}getSelectedItems(){return Array.from(this.state.selectedItems)}clearSelection(){this.state.selectedItems.clear(),this.updateBulkActionControls()}destroy(){Object.values(this.boundHandlers).forEach(e=>{this.element.removeEventListener("click",e),this.element.removeEventListener("change",e),this.element.removeEventListener("keydown",e)}),this.searchInterface&&this.searchInterface.destroy&&this.searchInterface.destroy(),this.contentGrid&&this.contentGrid.destroy&&this.contentGrid.destroy(),this.contentList&&this.contentList.destroy&&this.contentList.destroy(),this.state=null,this.options=null,this.element=null}}function kt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{container:t=null,meilisearchUrl:n="/api/search",apiBase:a="/api/content",analyticsEndpoint:s="/api/analytics",voiceEnabled:i=!0,naturalLanguage:o=!0,smartFilters:r=!0,recentSearches:l=!0,searchSuggestions:c=!0,enableAnalytics:d=!0,enableAutoComplete:h=!0,enableExport:u=!1,title:m="Enhanced Search",description:p="Intelligent content discovery with natural language processing",placeholder:v='Search content... Try "Find PDFs about coffee from last month"',layout:g="vertical",viewMode:y="grid",perPage:f=20,showSidebar:b=!0,showLogo:w=!1,logoUrl:S="",breadcrumbs:C=[],theme:_="default",darkMode:E="auto",customStyles:A="",onSearch:L=null,onResults:x=null,onContentSelection:M=null,onError:k=null,onAnalytics:T=null,searchEngines:z=["meilisearch","vectorize"],cacheResults:P=!0,debounceDelay:I=300,maxRecentSearches:D=10,ariaLabel:N="Enhanced search application",announceResults:B=!0,keyboardShortcuts:q=!0}=e;let F=null,H=null,R=null;function V(){try{return F=function(){const e=document.createElement("div");e.setAttribute("role","application"),e.setAttribute("aria-label",N),e.setAttribute("data-enhanced-search-app",""),e.className="tmyl-enhanced-search tmyl-enhanced-search--theme-".concat(_),"auto"!==E&&e.classList.add("tmyl-enhanced-search--".concat(E?"dark":"light"));if(e.innerHTML=xt.application({title:m,description:p,layout:g,showSidebar:b,showAnalytics:d}),A){const t=document.createElement("style");t.textContent=A,e.appendChild(t)}return e}(),R=function(){const e=document.createElement("style");e.setAttribute("data-enhanced-search-styles","");const t=function(){const e=[];"corporate"===_?(e.push("--color-primary: #1a365d"),e.push("--color-accent: #3182ce")):"modern"===_?(e.push("--color-primary: #667eea"),e.push("--color-accent: #764ba2")):"minimal"===_&&(e.push("--color-primary: #2d3748"),e.push("--color-accent: #4a5568"));return e.join("; ")}();return e.textContent=":root { ".concat(t," }"),document.head.appendChild(e),e}(),H=function(){const e=new Mt(F,{meilisearchUrl:n,apiBase:a,analyticsEndpoint:s,voiceEnabled:i,naturalLanguage:o,smartFilters:r,recentSearches:l,searchSuggestions:c,enableAnalytics:d,enableAutoComplete:h,enableExport:u,placeholder:v,layout:g,viewMode:y,perPage:f,searchEngines:z,cacheResults:P,debounceDelay:I,maxRecentSearches:D,announceResults:B,keyboardShortcuts:q});return function(e){L&&e.on("search",e=>{L(e.detail)});x&&e.on("resultsUpdated",e=>{x(e.detail)});M&&e.on("contentSelected",e=>{M(e.detail)});k&&e.on("error",e=>{k(e.detail)});T&&e.on("analyticsEvent",e=>{T(e.detail)})}(e),e}(),t&&j(t),{element:F,controller:H,mount:j,unmount:O,destroy:Y,search:U,setFilters:G,getState:W,getResults:K,on:X,off:Q}}catch(e){throw console.error("Enhanced Search Application creation failed:",e),e}}function j(e){if(!e)throw new Error("Container is required for mounting");e.appendChild(F),F.dispatchEvent(new CustomEvent("tmyl-enhanced-search:mounted",{detail:{factory:V},bubbles:!0}))}function O(){F&&F.parentNode&&(F.parentNode.removeChild(F),F.dispatchEvent(new CustomEvent("tmyl-enhanced-search:unmounted",{detail:{factory:V},bubbles:!0})))}function U(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!H)throw new Error("Controller not initialized");return H.search(e,t)}function G(e){if(!H)throw new Error("Controller not initialized");return H.setFilters(e)}function W(){if(!H)throw new Error("Controller not initialized");return H.getState()}function K(){if(!H)throw new Error("Controller not initialized");return H.getResults()}function X(e,t){if(!F)throw new Error("Element not initialized");F.addEventListener("tmyl-enhanced-search:".concat(e),t)}function Q(e,t){if(!F)throw new Error("Element not initialized");F.removeEventListener("tmyl-enhanced-search:".concat(e),t)}function Y(){try{H&&H.destroy&&H.destroy(),R&&R.parentNode&&R.parentNode.removeChild(R),O(),F=null,H=null,R=null}catch(e){console.error("Enhanced Search Application cleanup failed:",e)}}return V()}const Tt={standard(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return kt((0,a.A)({title:"Content Search",description:"Search and discover your content",showSidebar:!0,enableAnalytics:!0,enableExport:!1,theme:"default"},e))},advanced(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return kt((0,a.A)({title:"Advanced Content Discovery",description:"Intelligent search with natural language processing",voiceEnabled:!0,naturalLanguage:!0,smartFilters:!0,enableAnalytics:!0,enableExport:!0,searchEngines:["meilisearch","vectorize"],theme:"modern"},e))},minimal(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return kt((0,a.A)({title:"Search",description:"",showSidebar:!1,enableAnalytics:!1,enableExport:!1,recentSearches:!1,theme:"minimal",layout:"compact"},e))},enterprise(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return kt((0,a.A)({title:"Enterprise Content Search",description:"Secure content discovery for enterprise environments",enableAnalytics:!0,enableExport:!0,searchEngines:["meilisearch","vectorize"],theme:"corporate",announceResults:!0,keyboardShortcuts:!0},e))},mobile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return kt((0,a.A)({title:"Search",showSidebar:!1,layout:"compact",viewMode:"list",perPage:10,voiceEnabled:!0,theme:"minimal"},e))}};class zt{constructor(){this.applications=new Map,this.defaultContainer=null}create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.applications.has(e))throw new Error("Application with id '".concat(e,"' already exists"));const n=kt(t);return this.applications.set(e,n),n}get(e){return this.applications.get(e)}remove(e){const t=this.applications.get(e);return!!t&&(t.destroy(),this.applications.delete(e),!0)}getAll(){return Array.from(this.applications.values())}setDefaultContainer(e){this.defaultContainer=e}createAuto(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t="search-app-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9));return this.defaultContainer&&!e.container&&(e.container=this.defaultContainer),this.create(t,e)}destroyAll(){this.applications.forEach(e=>e.destroy()),this.applications.clear()}getStats(){const e=Array.from(this.applications.values());return{totalApplications:e.length,totalSearches:e.reduce((e,t)=>{var n;return e+((null===(n=t.getState().analytics)||void 0===n?void 0:n.searchCount)||0)},0),averageResults:e.reduce((e,t)=>e+t.getResults().length,0)/Math.max(e.length,1)}}}const Pt={validateConfig(e){const t=[];return e.meilisearchUrl&&"string"!==typeof e.meilisearchUrl&&t.push("meilisearchUrl must be a string"),e.perPage&&(!Number.isInteger(e.perPage)||e.perPage<1)&&t.push("perPage must be a positive integer"),e.searchEngines&&!Array.isArray(e.searchEngines)&&t.push("searchEngines must be an array"),e.theme&&!["default","modern","minimal","corporate"].includes(e.theme)&&t.push("theme must be one of: default, modern, minimal, corporate"),t},getRecommendedConfig:e=>({"content-discovery":{naturalLanguage:!0,smartFilters:!0,enableAnalytics:!0,searchEngines:["meilisearch","vectorize"]},"document-search":{showSidebar:!0,enableExport:!0,viewMode:"list",smartFilters:!0},"media-library":{viewMode:"grid",enableExport:!0,smartFilters:!0,perPage:50},"knowledge-base":{naturalLanguage:!0,enableAnalytics:!0,recentSearches:!0,searchSuggestions:!0}}[e]||{}),autoDetectConfig(e){const t={};if(e){const n=e.offsetWidth;n<768?(t.showSidebar=!1,t.layout="compact",t.viewMode="list",t.perPage=10):n<1200?(t.showSidebar=!0,t.viewMode="list",t.perPage=20):(t.showSidebar=!0,t.viewMode="grid",t.perPage=30)}return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(t.darkMode=!0),"ontouchstart"in window&&(t.voiceEnabled=!0,t.keyboardShortcuts=!1),t},createPerformanceMonitor(e){const t={searchTimes:[],renderTimes:[],errorCount:0};return e.on("search",n=>{const a=performance.now();e.on("resultsUpdated",e=>{const n=performance.now();t.searchTimes.push(n-a)})}),e.on("error",()=>{t.errorCount++}),{getStats:()=>({averageSearchTime:t.searchTimes.reduce((e,t)=>e+t,0)/t.searchTimes.length||0,totalSearches:t.searchTimes.length,errorRate:t.errorCount/t.searchTimes.length||0}),reset:()=>{t.searchTimes=[],t.renderTimes=[],t.errorCount=0}}}},It=new zt;var Dt=Object.freeze({__proto__:null,EnhancedSearchApplicationFactory:kt,EnhancedSearchApplicationManager:zt,EnhancedSearchApplicationUtils:Pt,EnhancedSearchPresets:Tt,default:kt,searchApplicationManager:It});class Nt{constructor(){this.performanceThresholds={high:.8,medium:.6,low:0}}getPerformanceLevel(e){return e>=this.performanceThresholds.high?{level:"high",label:"High",color:"#10B981"}:e>=this.performanceThresholds.medium?{level:"medium",label:"Good",color:"#F59E0B"}:{level:"low",label:"Low",color:"#EF4444"}}async generateRecommendations(e,t){try{const n=await fetch("".concat(t,"/recommendations?type=").concat(e,"&algorithm=v2")),a=await n.json();return this.enhanceRecommendations(a.recommendations||[])}catch(n){return console.error("Recommendation engine failed:",n),[]}}enhanceRecommendations(e){return e.map(e=>(0,a.A)((0,a.A)({},e),{},{performance:this.getPerformanceLevel(e.engagement_score||0),confidenceScore:Math.min(100*e.confidence,100),reasonSummary:this.generateReasonSummary(e)}))}generateReasonSummary(e){const t=[];return e.engagement_score>.7&&t.push("High engagement"),e.recent_performance&&t.push("Trending content"),e.topic_match>.8&&t.push("Perfect topic match"),t.join(" \u2022 ")||"AI recommendation"}calculateAveragePerformance(e){if(0===e.length)return null;const t=e.reduce((e,t)=>e+(t.engagement_score||0),0)/e.length;return this.getPerformanceLevel(t)}estimateReach(e){const t=e.reduce((e,t)=>e+(t.historical_reach||1e3),0);return Math.floor(.8*t)}}class Bt{constructor(){this.filters={contentType:"all",performance:"all",recency:"all",topics:[],tags:[]}}applyFilters(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.filters,n=[...e];if("all"!==t.contentType&&(n=n.filter(e=>e.category===t.contentType)),"all"!==t.performance&&(n=n.filter(e=>this.getPerformanceLevel(e.engagement_score||0).level===t.performance)),"all"!==t.recency){const e=this.getRecencyCutoff(t.recency),a=new Date(Date.now()-24*e*60*60*1e3);n=n.filter(e=>new Date(e.created_at||e.uploadedAt)>=a)}return n}getRecencyCutoff(e){return{week:7,month:30,quarter:90,year:365}[e]||365}updateFilter(e,t){return this.filters[e]=t,(0,a.A)({},this.filters)}getFilterOptions(){return{contentType:[{value:"all",label:"All Types"},{value:"image",label:"Images"},{value:"video",label:"Videos"},{value:"document",label:"Documents"},{value:"audio",label:"Audio"}],performance:[{value:"all",label:"All Performance"},{value:"high",label:"High Performing"},{value:"medium",label:"Good Performance"},{value:"low",label:"Needs Boost"}],recency:[{value:"all",label:"All Time"},{value:"week",label:"Past Week"},{value:"month",label:"Past Month"},{value:"quarter",label:"Past Quarter"}]}}getPerformanceLevel(e){return e>=.8?{level:"high",label:"High"}:e>=.6?{level:"medium",label:"Good"}:{level:"low",label:"Low"}}}class qt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;this.maxSelections=e,this.selectedContent=new Map,this.listeners=new Set}toggleSelection(e){if(this.selectedContent.has(e.id))this.selectedContent.delete(e.id);else{if(this.selectedContent.size>=this.maxSelections)return this.notifyError("Maximum ".concat(this.maxSelections," items can be selected")),!1;this.selectedContent.set(e.id,e)}return this.notifyChange(),!0}getSelectedItems(){return Array.from(this.selectedContent.values())}getSelectionSummary(){const e=this.getSelectedItems();return{count:e.length,maxCount:this.maxSelections,contentTypes:this.getContentTypeBreakdown(e),estimatedReach:this.estimateReach(e)}}getContentTypeBreakdown(e){const t={};return e.forEach(e=>{t[e.category]=(t[e.category]||0)+1}),t}estimateReach(e){const t=e.reduce((e,t)=>e+(t.historical_reach||1e3),0);return Math.floor(.8*t)}clearSelection(){this.selectedContent.clear(),this.notifyChange()}isSelected(e){return this.selectedContent.has(e)}addListener(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notifyChange(){this.listeners.forEach(e=>e({type:"selection-changed",summary:this.getSelectionSummary(),selectedItems:this.getSelectedItems()}))}notifyError(e){this.listeners.forEach(t=>t({type:"selection-error",message:e}))}}const Ft={createHeader:e=>'\n      <div class="campaign-header">\n        <div class="campaign-header-content">\n          <h2 class="campaign-title">Select Campaign Content</h2>\n          <p class="campaign-subtitle">Choose the best content for your '.concat(e," campaign</p>\n        </div>\n      </div>\n    "),createTabsContainer:()=>'\n      <div class="campaign-tabs" id="campaign-tabs">\n        <button class="campaign-tab active" data-tab="search">\n          \ud83d\udd0d Search Content\n        </button>\n        <button class="campaign-tab" data-tab="recommendations">\n          \u2b50 AI Recommendations\n          <span class="tab-badge">Smart</span>\n        </button>\n        <button class="campaign-tab" data-tab="templates">\n          \ud83d\udccb Templates\n        </button>\n      </div>\n    ',createSearchTab:()=>'\n      <div class="tab-content active" data-tab="search">\n        <div class="search-container" id="search-container">\n          \x3c!-- Enhanced search will be mounted here --\x3e\n        </div>\n        <div class="filters-section" id="filters-section">\n          \x3c!-- Filters will be rendered here --\x3e\n        </div>\n        <div class="content-grid" id="search-results">\n          \x3c!-- Search results will be rendered here --\x3e\n        </div>\n      </div>\n    ',createRecommendationsTab:()=>'\n      <div class="tab-content" data-tab="recommendations">\n        <div class="recommendations-header">\n          <h3>AI-Powered Content Recommendations</h3>\n          <p>Based on your campaign type and historical performance data</p>\n        </div>\n        <div class="content-grid" id="recommendations-results">\n          \x3c!-- Recommendations will be rendered here --\x3e\n        </div>\n      </div>\n    ',createTemplatesTab:()=>'\n      <div class="tab-content" data-tab="templates">\n        <div class="templates-header">\n          <h3>Pre-built Campaign Templates</h3>\n          <p>Ready-to-use content collections for common campaign types</p>\n        </div>\n        <div class="content-grid" id="templates-results">\n          \x3c!-- Templates will be rendered here --\x3e\n        </div>\n      </div>\n    ',createFilterGroup(e){const t=e.options.map(e=>'<option value="'.concat(e.value,'">').concat(e.label,"</option>")).join("");return'\n      <div class="filter-group">\n        <label class="filter-label">'.concat(e.label,'</label>\n        <select class="filter-select" name="').concat(e.name,'">\n          ').concat(t,"\n        </select>\n      </div>\n    ")},createSelectionSummary:e=>'\n      <div class="selection-summary">\n        <div class="summary-header">\n          <h3>Selected Content (<span class="selection-count">0 / '.concat(e,'</span>)</h3>\n          <div class="summary-actions">\n            <button class="btn-secondary" id="clear-selection">Clear All</button>\n            <button class="btn-outline" id="preview-campaign" disabled>Preview Campaign</button>\n            <button class="btn-primary" id="use-content" disabled>Use Selected Content</button>\n          </div>\n        </div>\n        <div class="selected-items-container">\n          <div class="selected-items" id="selected-items"></div>\n          <div class="selection-insights" id="selection-insights"></div>\n        </div>\n      </div>\n    '),createSelectedItem(e,t){const n=this.getContentIcon(e.category),a=(null===t||void 0===t?void 0:t.level)||"unknown",s=(null===t||void 0===t?void 0:t.label)||"Unknown";return'\n      <div class="selected-item" data-id="'.concat(e.id,'">\n        <span class="item-icon">').concat(n,'</span>\n        <span class="item-name">').concat(e.title||e.original_filename,'</span>\n        <span class="item-performance ').concat(a,'">\n          ').concat(s,'\n        </span>\n        <button class="remove-item" data-id="').concat(e.id,'">\xd7</button>\n      </div>\n    ')},createSelectionInsights(e){var t;if(0===e.count)return'<p class="no-insights">Select content to see insights</p>';const n=Object.entries(e.contentTypes).map(e=>{let[t,n]=e;return"".concat(n," ").concat(t).concat(n>1?"s":"")}).join(", ");return'\n      <div class="insights-grid">\n        <div class="insight-item">\n          <span class="insight-label">Content Mix:</span>\n          <span class="insight-value">'.concat(n,'</span>\n        </div>\n        <div class="insight-item">\n          <span class="insight-label">Est. Reach:</span>\n          <span class="insight-value">').concat((null===(t=e.estimatedReach)||void 0===t?void 0:t.toLocaleString())||"Unknown","</span>\n        </div>\n      </div>\n    ")},createEmptyState(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Try adjusting your search terms or filters";return'\n      <div class="empty-state">\n        <div class="empty-icon">\ud83d\udd0d</div>\n        <div class="empty-title">'.concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"No content found",'</div>\n        <div class="empty-message">').concat(e,"</div>\n      </div>\n    ")},createLoadingState(){return'\n      <div class="loading-state">\n        <div class="loading-spinner"></div>\n        <div class="loading-message">'.concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Loading content...","</div>\n      </div>\n    ")},getContentIcon(e){const t={image:"\ud83d\uddbc\ufe0f",video:"\ud83c\udfac",audio:"\ud83c\udfb5",document:"\ud83d\udcc4",default:"\ud83d\udcc1"};return t[e]||t.default}};function Ht(){return"<div>Template placeholder</div>"}class Rt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e,this.element=null,this.currentTab="search",this.analytics=new Nt,this.filterEngine=new Bt,this.selectionManager=new qt(e.maxSelections||10),this.handleTabSwitch=this.handleTabSwitch.bind(this),this.handleFilterChange=this.handleFilterChange.bind(this),this.handleSearchResults=this.handleSearchResults.bind(this),this.handleSelectionChange=this.handleSelectionChange.bind(this),this.handleContentSelect=this.handleContentSelect.bind(this),this.handleClearSelection=this.handleClearSelection.bind(this),this.handlePreviewCampaign=this.handlePreviewCampaign.bind(this),this.handleUseContent=this.handleUseContent.bind(this)}init(e){this.element=e,this.setupEventListeners(),this.setupServices(),this.loadInitialData()}setupEventListeners(){if(!this.element)return;this.element.querySelectorAll(".campaign-tab").forEach(e=>{e.addEventListener("click",this.handleTabSwitch)});this.element.querySelectorAll(".filter-select").forEach(e=>{e.addEventListener("change",this.handleFilterChange)});const e=this.element.querySelector("#clear-selection"),t=this.element.querySelector("#preview-campaign"),n=this.element.querySelector("#use-content");null===e||void 0===e||e.addEventListener("click",this.handleClearSelection),null===t||void 0===t||t.addEventListener("click",this.handlePreviewCampaign),null===n||void 0===n||n.addEventListener("click",this.handleUseContent)}setupServices(){this.selectionManager.addListener(this.handleSelectionChange)}async loadInitialData(){try{this.options.enableRecommendations&&await this.loadRecommendations(),this.renderFilters()}catch(e){console.error("Failed to load initial data:",e),this.notifyError("Failed to load initial data")}}handleTabSwitch(e){const t=e.target.dataset.tab;if(!t||t===this.currentTab)return;this.element.querySelectorAll(".campaign-tab").forEach(e=>{e.classList.remove("active")}),e.target.classList.add("active"),this.element.querySelectorAll(".tab-content").forEach(e=>{e.classList.remove("active")});const n=this.element.querySelector('[data-tab="'.concat(t,'"]'));n&&n.classList.add("active"),this.currentTab=t,this.loadTabContent(t)}async loadTabContent(e){switch(e){case"recommendations":this.hasRecommendations()||await this.loadRecommendations();break;case"templates":await this.loadTemplates()}}handleFilterChange(e){const t=e.target.name,n=e.target.value;this.filterEngine.updateFilter(t,n),this.applyCurrentFilters()}handleSearchResults(e){const t=this.filterEngine.applyFilters(e.hits||e);this.renderContentGrid(t,"search-results")}handleSelectionChange(e){"selection-changed"===e.type?(this.updateSelectionDisplay(e.summary,e.selectedItems),this.options.onSelectionChanged&&this.options.onSelectionChanged(e)):"selection-error"===e.type&&this.notifyError(e.message)}handleContentSelect(e){this.selectionManager.toggleSelection(e)}handleClearSelection(){this.selectionManager.clearSelection()}handlePreviewCampaign(){const e=this.selectionManager.getSelectedItems();this.options.onPreviewCampaign&&this.options.onPreviewCampaign({content:e,campaignType:this.options.campaignType})}handleUseContent(){const e=this.selectionManager.getSelectedItems();this.options.onContentSelected&&this.options.onContentSelected({content:e,campaignType:this.options.campaignType})}async loadRecommendations(){try{this.showLoading("recommendations-results","Loading AI recommendations...");const e=await this.analytics.generateRecommendations(this.options.campaignType,this.options.apiBase);this.renderContentGrid(e,"recommendations-results"),this.updateTabBadge("recommendations",e.length)}catch(e){console.error("Failed to load recommendations:",e),this.showError("recommendations-results","Failed to load recommendations")}}async loadTemplates(){try{this.showLoading("templates-results","Loading templates...");const e=await fetch("".concat(this.options.apiBase,"/templates?type=").concat(this.options.campaignType)),t=await e.json();this.renderContentGrid(t.templates||[],"templates-results")}catch(e){console.error("Failed to load templates:",e),this.showError("templates-results","Failed to load templates")}}renderContentGrid(e,t){const n=this.element.querySelector("#".concat(t));n&&(0!==e.length?(n.innerHTML="",e.forEach(e=>{const t=document.createElement("div");t.className="content-card-container",this.renderContentCard(e,t),n.appendChild(t)})):n.innerHTML=Ft.createEmptyState())}renderContentCard(e,t){const n=this.selectionManager.isSelected(e.id),a=this.analytics.getPerformanceLevel(e.engagement_score||0);t.innerHTML='\n      <div class="content-card '.concat(n?"selected":"",'" data-id="').concat(e.id,'">\n        <div class="content-thumbnail">\n          ').concat(Ft.getContentIcon(e.category),'\n        </div>\n        <div class="content-info">\n          <div class="content-title">').concat(e.title||e.original_filename,'</div>\n          <div class="content-meta">\n            <span class="performance-badge ').concat(a.level,'">').concat(a.label,'</span>\n            <span class="content-date">').concat(this.formatDate(e.created_at),"</span>\n          </div>\n        </div>\n        ").concat(n?'<div class="selection-indicator">\u2713</div>':"","\n      </div>\n    ");t.querySelector(".content-card").addEventListener("click",()=>this.handleContentSelect(e))}renderFilters(){const e=this.element.querySelector("#filters-section");if(!e)return;const t=this.filterEngine.getFilterOptions();e.innerHTML=Object.entries(t).map(e=>{let[t,n]=e;return Ft.createFilterGroup({name:t,label:this.capitalizeFirst(t.replace(/([A-Z])/g," $1")),options:n})}).join(""),e.querySelectorAll(".filter-select").forEach(e=>{e.addEventListener("change",this.handleFilterChange)})}updateSelectionDisplay(e,t){const n=this.element.querySelector(".selection-count");n&&(n.textContent="".concat(e.count," / ").concat(e.maxCount));const a=this.element.querySelector("#selected-items");a&&(a.innerHTML=t.map(e=>{const t=this.analytics.getPerformanceLevel(e.engagement_score||0);return Ft.createSelectedItem(e,t)}).join(""),a.querySelectorAll(".remove-item").forEach(e=>{e.addEventListener("click",n=>{n.stopPropagation();const a=t.find(t=>t.id===e.dataset.id);a&&this.selectionManager.toggleSelection(a)})}));const s=this.element.querySelector("#selection-insights");s&&(s.innerHTML=Ft.createSelectionInsights(e));const i=this.element.querySelector("#preview-campaign"),o=this.element.querySelector("#use-content");i&&(i.disabled=0===e.count),o&&(o.disabled=0===e.count)}applyCurrentFilters(){console.log("Applying filters:",this.filterEngine.filters)}showLoading(e,t){const n=this.element.querySelector("#".concat(e));n&&(n.innerHTML=Ft.createLoadingState(t))}showError(e,t){const n=this.element.querySelector("#".concat(e));n&&(n.innerHTML=Ft.createEmptyState("Error",t))}updateTabBadge(e,t){const n=this.element.querySelector('[data-tab="'.concat(e,'"]'));if(n){const e=n.querySelector(".tab-badge");e&&(e.textContent=t)}}hasRecommendations(){const e=this.element.querySelector("#recommendations-results");return e&&e.children.length>0}formatDate(e){if(!e)return"";const t=new Date(e),n=new Date,a=Math.floor((n-t)/864e5);return 0===a?"Today":1===a?"Yesterday":a<7?"".concat(a,"d ago"):a<30?"".concat(Math.floor(a/7),"w ago"):t.toLocaleDateString()}capitalizeFirst(e){return e.charAt(0).toUpperCase()+e.slice(1)}notifyError(e){this.options.onError?this.options.onError(e):console.error("Campaign Selector Error:",e)}destroy(){this.element&&this.element.removeEventListener("click",this.handleTabSwitch)}}var Vt=Object.freeze({__proto__:null,CampaignSelectorSystem:class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=(0,a.A)({maxSelections:10,showPerformanceInsights:!0,enableRecommendations:!0,enableTemplates:!0},e),this.container=null,this.data={content:[],templates:[],contentTypes:["Blog Posts","Videos","Images","Documents"],performanceLevels:["High","Medium","Low"]},this.state={currentTab:"content",loading:!1,contentLoaded:!1},this.analytics=new Nt(this.options),this.filterEngine=new Bt,this.selectionManager=new qt(this.options.maxSelections),this.templates=new Ht,this.controller=new Rt(this),this.initialize()}initialize(){this.setupEventListeners(),this.loadInitialData()}setupEventListeners(){this.selectionManager.on("selectionChange",e=>{this.handleSelectionChange(e)}),this.selectionManager.on("selectionLimitReached",()=>{this.showMessage("Maximum ".concat(this.options.maxSelections," items can be selected"),"warning")}),this.filterEngine.on("filtersChanged",e=>{this.renderContent(e)})}async loadInitialData(){this.setState({loading:!0});try{const[e,t]=await Promise.all([this.loadContent(),this.loadTemplates()]);this.data.content=e,this.data.templates=t,this.filterEngine.setContent(e),this.analytics.setContent(e),this.setState({loading:!1,contentLoaded:!0}),this.renderContent(e),this.updateSelectionSummary()}catch(e){console.error("Failed to load initial data:",e),this.setState({loading:!1}),this.showMessage("Failed to load content. Please try again.","error")}}async loadContent(){return[{id:"content-1",title:"Ultimate Guide to Digital Marketing in 2024",type:"Blog Posts",performance:"High",engagement:850,reach:15e3,thumbnail:"\ud83d\udcdd",publishDate:"2024-01-15",author:"Sarah Johnson"},{id:"content-2",title:"Product Demo: New Features Overview",type:"Videos",performance:"High",engagement:1200,reach:25e3,thumbnail:"\ud83c\udfa5",publishDate:"2024-01-20",author:"Mike Chen"},{id:"content-3",title:"Brand Identity Guidelines 2024",type:"Documents",performance:"Medium",engagement:340,reach:8e3,thumbnail:"\ud83d\udcc4",publishDate:"2024-01-10",author:"Design Team"},{id:"content-4",title:"Customer Success Stories Compilation",type:"Images",performance:"High",engagement:950,reach:18e3,thumbnail:"\ud83d\udcf8",publishDate:"2024-01-25",author:"Customer Success"},{id:"content-5",title:"Weekly Marketing Newsletter Template",type:"Documents",performance:"Medium",engagement:420,reach:12e3,thumbnail:"\ud83d\udce7",publishDate:"2024-01-12",author:"Marketing Team"},{id:"content-6",title:"Social Media Strategy Workshop",type:"Videos",performance:"Low",engagement:180,reach:5e3,thumbnail:"\ud83d\udcf1",publishDate:"2024-01-08",author:"Social Media Team"}]}async loadTemplates(){return[{id:"template-1",title:"Weekly Newsletter Template",type:"Email Campaign",performance:"High",engagement:720,reach:22e3,thumbnail:"\ud83d\udce7",category:"Newsletter"},{id:"template-2",title:"Product Launch Announcement",type:"Social Media",performance:"High",engagement:1100,reach:35e3,thumbnail:"\ud83d\ude80",category:"Product Launch"},{id:"template-3",title:"Customer Feedback Survey",type:"Email Campaign",performance:"Medium",engagement:440,reach:15e3,thumbnail:"\ud83d\udcca",category:"Survey"}]}render(e){e&&(this.container=e,this.container.innerHTML=this.templates.generateMainLayout(),this.controller.initialize(e),this.state.loading?this.renderLoadingState():this.state.contentLoaded&&(this.renderContent(this.data.content),this.updateSelectionSummary()))}renderLoadingState(){var e;const t=null===(e=this.container)||void 0===e?void 0:e.querySelector(".content-grid");t&&(t.innerHTML=this.templates.generateLoadingState())}renderContent(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const n=null===(e=this.container)||void 0===e?void 0:e.querySelector(".content-grid");if(!n)return;if(0===t.length)return void(n.innerHTML=this.templates.generateEmptyState("content"));const a=t.map(e=>this.templates.generateContentCard(e,this.selectionManager.isSelected(e.id))).join("");n.innerHTML=a}renderTemplates(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const n=null===(e=this.container)||void 0===e?void 0:e.querySelector("#templates-tab .content-grid");if(!n)return;if(0===t.length)return void(n.innerHTML=this.templates.generateEmptyState("templates"));const a=t.map(e=>this.templates.generateContentCard(e,this.selectionManager.isSelected(e.id))).join("");n.innerHTML=a}renderRecommendations(){var e;const t=null===(e=this.container)||void 0===e?void 0:e.querySelector("#recommendations-tab .content-grid");if(!t)return;const n=this.analytics.generateRecommendations(this.data.content,this.selectionManager.getSelectedItems());if(0===n.length)return void(t.innerHTML=this.templates.generateEmptyState("recommendations"));const a=n.map(e=>this.templates.generateContentCard(e,this.selectionManager.isSelected(e.id))).join("");t.innerHTML=a}handleSelectionChange(e){this.updateSelectionIndicators(),this.updateSelectionSummary(),"recommendations"===this.state.currentTab&&this.renderRecommendations(),this.emit("selectionChanged",{selections:e,insights:this.analytics.generateInsights(e)})}updateSelectionIndicators(){var e;const t=null===(e=this.container)||void 0===e?void 0:e.querySelectorAll(".content-card");null===t||void 0===t||t.forEach(e=>{const t=e.dataset.id,n=this.selectionManager.isSelected(t);e.classList.toggle("selected",n);const a=e.querySelector(".selection-indicator");if(n&&!a){const t=this.templates.generateSelectionIndicator();e.insertAdjacentHTML("afterbegin",t)}else!n&&a&&a.remove()})}updateSelectionSummary(){var e;const t=null===(e=this.container)||void 0===e?void 0:e.querySelector(".selection-summary");if(!t)return;const n=this.selectionManager.getSelectedItems(),a=this.analytics.generateInsights(n);t.innerHTML=this.templates.generateSelectionSummary(n,a,this.options.maxSelections)}setState(e){this.state=(0,a.A)((0,a.A)({},this.state),e)}showMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";console.log("[".concat(t.toUpperCase(),"] ").concat(e)),window.TamylaNotification&&window.TamylaNotification.show(e,t)}on(e,t){this.events||(this.events={}),this.events[e]||(this.events[e]=[]),this.events[e].push(t)}emit(e,t){this.events&&this.events[e]&&this.events[e].forEach(e=>e(t))}getSelectedContent(){return this.selectionManager.getSelectedItems()}clearSelections(){this.selectionManager.clearAll()}addContent(e){this.data.content=[...this.data.content,...e],this.filterEngine.setContent(this.data.content),this.analytics.setContent(this.data.content),"content"===this.state.currentTab&&this.renderContent(this.filterEngine.getFilteredContent())}updateFilters(e){this.filterEngine.updateFilters(e)}destroy(){this.container&&(this.container.innerHTML=""),this.events={}}}});function jt(e){return e&&0!==e.length?e.map(e=>'\n    <div class="upload-item">\n      <span class="upload-filename">'.concat(e.file.name,'</span>\n      <div class="upload-progress-bar">\n        <div class="upload-progress-fill" style="width: ').concat(e.progress||0,'%"></div>\n      </div>\n      <span class="upload-status">').concat(function(e){return e.error?"Error":100===e.progress?"Complete":e.progress>0?"".concat(Math.round(e.progress),"%"):"Pending"}(e),"</span>\n    </div>\n  ")).join(""):""}function Ot(e){const{totalItems:t=0,totalSize:n=0,selectedCount:a=0}=e;return'\n    <div class="content-stats">\n      <span class="content-count">'.concat(t," item").concat(1!==t?"s":"",'</span>\n      <span class="separator">\u2022</span>\n      <span class="storage-usage">').concat(function(e){if(0===e)return"0 B";const t=1024,n=["B","KB","MB","GB","TB"],a=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,a)).toFixed(1))+" "+n[a]}(n)," used</span>\n      ").concat(a>0?'\n        <span class="separator">\u2022</span>\n        <span class="selection-info">'.concat(a," selected</span>\n      "):"","\n    </div>\n  ")}class Ut{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props=(0,a.A)({apiBase:"/api/content",uploadEndpoint:"/api/upload",meilisearchUrl:"/api/search",maxFileSize:26214400,allowedFileTypes:["pdf","doc","docx","txt","md","jpg","png","mp4","mp3"],selectionMode:!0,onContentLoad:null,onContentSelect:null,onContentUpload:null,onContentDelete:null,onAnalytics:null},e),this.state={content:[],selectedContent:new Set,isLoading:!1,currentView:"grid",sortBy:"relevance",uploadProgress:new Map,searchApplication:null},this.element=null}initialize(e){return this.element=e,this.setupEventListeners(),this.loadContent(),this}setupEventListeners(){if(!this.element)return;const e=this.element.querySelector("#file-upload");e&&e.addEventListener("change",this.handleFileUpload.bind(this));this.element.querySelectorAll(".view-button").forEach(e=>{e.addEventListener("click",e=>{const t=e.currentTarget.dataset.view;this.changeView(t)})});const t=this.element.querySelector(".content-manager__sort-select");t&&t.addEventListener("change",e=>{this.changeSortBy(e.target.value)});this.element.querySelectorAll(".action-button").forEach(e=>{e.addEventListener("click",e=>{const t=e.currentTarget.dataset.action;this.handleBulkAction(t)})})}async loadContent(){this.setState({isLoading:!0}),this.updateContentDisplay();try{const e=await fetch("".concat(this.props.apiBase,"/list"));if(!e.ok)throw new Error("Failed to load content: ".concat(e.statusText));const t=await e.json();this.setState({content:t.items||[],isLoading:!1}),this.updateContentDisplay(),this.props.onContentLoad&&this.props.onContentLoad(t)}catch(e){console.error("Error loading content:",e),this.setState({isLoading:!1}),this.showError("Failed to load content. Please try again.")}}async handleFileUpload(e){const t=Array.from(e.target.files);if(0===t.length)return;const n=t.filter(e=>this.validateFile(e));if(0===n.length)return void this.showError("No valid files selected. Please check file types and sizes.");n.length!==t.length&&this.showError("".concat(t.length-n.length," files were skipped due to validation errors."));const a=n.map(e=>this.uploadFile(e));try{const e=(await Promise.allSettled(a)).filter(e=>"fulfilled"===e.status&&e.value.success).map(e=>e.value);e.length>0&&(this.showSuccess("Successfully uploaded ".concat(e.length," file(s).")),await this.loadContent(),this.props.onContentUpload&&this.props.onContentUpload(e))}catch(s){this.showError("Some files failed to upload. Please try again.")}e.target.value=""}validateFile(e){var t;if(e.size>this.props.maxFileSize)return console.warn("File ".concat(e.name," exceeds maximum size limit")),!1;const n=null===(t=e.name.split(".").pop())||void 0===t?void 0:t.toLowerCase();return!!this.props.allowedFileTypes.includes(n)||(console.warn("File ".concat(e.name," has unsupported file type")),!1)}async uploadFile(e){const t="upload-".concat(Date.now(),"-").concat(Math.random());this.state.uploadProgress.set(t,{file:e,progress:0}),this.updateUploadProgress();try{const n=new FormData;n.append("file",e),n.append("metadata",JSON.stringify({originalName:e.name,size:e.size,type:e.type,uploadedAt:(new Date).toISOString()}));const a=await fetch(this.props.uploadEndpoint,{method:"POST",body:n});if(!a.ok)throw new Error("Upload failed: ".concat(a.statusText));const s=await a.json();return this.state.uploadProgress.delete(t),this.updateUploadProgress(),{success:!0,file:e,result:s}}catch(n){return console.error("Upload error:",n),this.state.uploadProgress.delete(t),this.updateUploadProgress(),{success:!1,file:e,error:n.message}}}updateUploadProgress(){var e;const t=null===(e=this.element)||void 0===e?void 0:e.querySelector("#upload-progress");if(!t)return;const n=Array.from(this.state.uploadProgress.values());0!==n.length?(t.style.display="block",t.innerHTML=jt(n)):t.style.display="none"}changeView(e){var t;this.setState({currentView:e});const n=null===(t=this.element)||void 0===t?void 0:t.querySelectorAll(".view-button");null===n||void 0===n||n.forEach(t=>{t.classList.toggle("view-button--active",t.dataset.view===e)}),this.updateContentDisplay(),this.props.onAnalytics&&this.props.onAnalytics({type:"view_change",view:e,timestamp:Date.now()})}changeSortBy(e){if(this.setState({sortBy:e}),this.state.searchApplication){var t;const e=null===(t=this.state.searchApplication.getSearchInterface())||void 0===t?void 0:t.getController();if(e){const t=e.getState();e.search(t.query)}}this.updateContentDisplay()}handleContentSelection(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t?this.state.selectedContent.add(e):this.state.selectedContent.delete(e),this.updateSelectionDisplay(),this.props.onContentSelect&&this.props.onContentSelect({contentId:e,selected:t,selectedItems:Array.from(this.state.selectedContent)})}async handleBulkAction(e){const t=Array.from(this.state.selectedContent);if(0!==t.length)try{switch(e){case"download":await this.downloadSelectedItems(t);break;case"share":await this.shareSelectedItems(t);break;case"delete":await this.deleteSelectedItems(t);break;default:console.warn("Unknown bulk action: ".concat(e))}}catch(n){console.error("Error performing ".concat(e,":"),n),this.showError("Failed to ".concat(e," selected items."))}}async downloadSelectedItems(e){console.log("Downloading items:",e),this.showSuccess("Started download of ".concat(e.length," items."))}async shareSelectedItems(e){console.log("Sharing items:",e),this.showSuccess("Generated share links for ".concat(e.length," items."))}async deleteSelectedItems(e){if(confirm("Are you sure you want to delete ".concat(e.length," items?")))try{const t=await fetch("".concat(this.props.apiBase,"/delete"),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:e})});if(!t.ok)throw new Error("Delete failed: ".concat(t.statusText));this.state.content=this.state.content.filter(t=>!e.includes(t.id)),this.state.selectedContent.clear(),this.updateContentDisplay(),this.updateSelectionDisplay(),this.showSuccess("Deleted ".concat(e.length," items.")),this.props.onContentDelete&&this.props.onContentDelete(e)}catch(t){throw t}}updateContentDisplay(){var e;const t=null===(e=this.element)||void 0===e?void 0:e.querySelector(".content-manager__results");t&&(this.state.isLoading?t.innerHTML='\n    <div class="content-manager__loading">\n      <div class="loading-spinner"></div>\n    </div>\n  ':0!==this.state.content.length?t.innerHTML="":t.innerHTML=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?'\n      <div class="content-manager__empty">\n        <svg class="empty-icon" viewBox="0 0 64 64" fill="currentColor">\n          <path d="M32 2C15.431 2 2 15.431 2 32s13.431 30 30 30 30-13.431 30-30S48.569 2 32 2zm0 54C17.664 56 6 44.336 6 30S17.664 4 32 4s26 11.664 26 26-11.664 26-26 26z"/>\n          <path d="M26.5 20.5c-3.314 0-6 2.686-6 6s2.686 6 6 6 6-2.686 6-6-2.686-6-6-6zm0 8c-1.103 0-2-.897-2-2s.897-2 2-2 2 .897 2 2-.897 2-2 2z"/>\n          <path d="M43.5 34.5l-8-8c-.781-.781-2.047-.781-2.828 0l-8 8c-.781.781-.781 2.047 0 2.828l8 8c.391.391.902.586 1.414.586s1.023-.195 1.414-.586l8-8c.781-.781.781-2.047 0-2.828z"/>\n        </svg>\n        <h3 class="empty-title">No matching content found</h3>\n        <p class="empty-description">Try adjusting your search terms or filters</p>\n      </div>\n    ':'\n    <div class="content-manager__empty">\n      <svg class="empty-icon" viewBox="0 0 64 64" fill="currentColor">\n        <path d="M50 8H14c-3.3 0-6 2.7-6 6v36c0 3.3 2.7 6 6 6h36c3.3 0 6-2.7 6-6V14c0-3.3-2.7-6-6-6zM14 12h36c1.1 0 2 .9 2 2v28l-8-8c-1.1-1.1-3.1-1.1-4.2 0l-10 10-4-4c-1.1-1.1-3.1-1.1-4.2 0l-10 10V14c0-1.1.9-2 2-2z"/>\n        <circle cx="20" cy="20" r="4"/>\n      </svg>\n      <h3 class="empty-title">No content yet</h3>\n      <p class="empty-description">Upload files to get started with your content library</p>\n    </div>\n  '}())}updateSelectionDisplay(){var e,t;const n=null===(e=this.element)||void 0===e?void 0:e.querySelector(".content-manager__selection-actions"),a=null===(t=this.element)||void 0===t?void 0:t.querySelector(".selection-count");if(!n||!a)return;const s=this.state.selectedContent.size;s>0?(n.style.display="flex",a.textContent="".concat(s," selected")):n.style.display="none"}updateContentStats(){var e;const t=null===(e=this.element)||void 0===e?void 0:e.querySelector(".content-stats");if(!t)return;const n=this.state.content.reduce((e,t)=>e+(t.size||0),0),a={totalItems:this.state.content.length,totalSize:n,selectedCount:this.state.selectedContent.size};t.innerHTML=Ot(a)}setSearchApplication(e){this.state.searchApplication=e}setState(e){Object.assign(this.state,e)}getState(){return(0,a.A)({},this.state)}showSuccess(e){console.log("Success:",e)}showError(e){console.error("Error:",e)}destroy(){this.element=null,this.state.uploadProgress.clear(),this.state.selectedContent.clear()}}function Gt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{apiBase:t="/api/content",meilisearchUrl:n="/api/search",uploadEndpoint:a="/api/upload",selectionMode:s=!0,showUpload:i=!0,maxFileSize:o=26214400,allowedFileTypes:r=["pdf","doc","docx","txt","md","jpg","png","mp4","mp3"],voiceSearch:l=!0,naturalLanguage:c=!0,smartFilters:d=!0,title:h="Content Manager",description:u="Manage and search your content library",currentView:m="grid",sortBy:p="relevance",onContentLoad:v,onContentSelect:g,onContentUpload:y,onContentDelete:f,onAnalytics:b,container:w=null}=e;let S=null,C=null,_=null;const E={render:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w;if(!e)return console.error("ContentManagerApplication: No container provided"),E;S=A(),C=new Ut({apiBase:t,uploadEndpoint:a,meilisearchUrl:n,maxFileSize:o,allowedFileTypes:r,selectionMode:s,onContentLoad:v,onContentSelect:g,onContentUpload:y,onContentDelete:f,onAnalytics:b}),C.initialize(S),L(),"string"===typeof e&&(e=document.querySelector(e));e&&e.appendChild(S);return E},destroy:function(){C&&(C.destroy(),C=null);_&&_.destroy&&(_.destroy(),_=null);S&&S.parentNode&&S.parentNode.removeChild(S);S=null},getController:()=>C,getSearchInterface:()=>_,getElement:()=>S,loadContent:()=>{var e;return null===(e=C)||void 0===e?void 0:e.loadContent()},refreshContent:()=>{var e;return null===(e=C)||void 0===e?void 0:e.loadContent()},getSelectedContent:()=>{var e;return null===(e=C)||void 0===e?void 0:e.getState().selectedContent},clearSelection:()=>{var e;return null===(e=C)||void 0===e?void 0:e.setState({selectedContent:new Set})},changeView:e=>{var t;return null===(t=C)||void 0===t?void 0:t.changeView(e)},changeSortBy:e=>{var t;return null===(t=C)||void 0===t?void 0:t.changeSortBy(e)},triggerUpload:()=>{var e;return null===(e=S)||void 0===e||null===(e=e.querySelector("#file-upload"))||void 0===e?void 0:e.click()},getUploadProgress:()=>{var e;return null===(e=C)||void 0===e?void 0:e.getState().uploadProgress}};function A(){const e=document.createElement("div");return e.className="tmyl-content-manager-application",e.setAttribute("role","application"),e.setAttribute("aria-label",h),e.innerHTML=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{title:t="Content Manager",description:n="",showUpload:a=!0,allowedFileTypes:s=["pdf","doc","docx","txt","md","jpg","png","mp4","mp3"],currentView:i="grid",sortBy:o="relevance",selectionMode:r=!0}=e;return'\n    <div class="content-manager__header">\n      <div class="content-manager__header-info">\n        <h1 class="content-manager__title">'.concat(t,"</h1>\n        ").concat(n?'<p class="content-manager__description">'.concat(n,"</p>"):"",'\n      </div>\n      \n      <div class="content-manager__actions">\n        ').concat(function(e,t){return e?'\n    <div class="content-manager__upload-section">\n      <input type="file" \n             id="file-upload" \n             class="content-manager__file-input" \n             multiple \n             accept="'.concat(t.map(e=>".".concat(e)).join(","),'" />\n      <label for="file-upload" class="content-manager__upload-button">\n        <svg class="upload-icon" viewBox="0 0 20 20" fill="currentColor">\n          <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>\n        </svg>\n        Upload Files\n      </label>\n    </div>\n  '):""}(a,s),"\n        ").concat(function(e,t){return'\n    <div class="content-manager__view-controls">\n      <div class="content-manager__view-toggle">\n        <button class="view-button '.concat("grid"===e?"view-button--active":"",'" \n                data-view="grid"\n                title="Grid View">\n          <svg viewBox="0 0 20 20" fill="currentColor">\n            <path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>\n          </svg>\n        </button>\n        <button class="view-button ').concat("list"===e?"view-button--active":"",'" \n                data-view="list"\n                title="List View">\n          <svg viewBox="0 0 20 20" fill="currentColor">\n            <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path>\n          </svg>\n        </button>\n        <button class="view-button ').concat("timeline"===e?"view-button--active":"",'" \n                data-view="timeline"\n                title="Timeline View">\n          <svg viewBox="0 0 20 20" fill="currentColor">\n            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>\n          </svg>\n        </button>\n      </div>\n      \n      <select class="content-manager__sort-select" title="Sort by">\n        <option value="relevance" ').concat("relevance"===t?"selected":"",'>Relevance</option>\n        <option value="date" ').concat("date"===t?"selected":"",'>Date</option>\n        <option value="title" ').concat("title"===t?"selected":"",'>Title</option>\n        <option value="size" ').concat("size"===t?"selected":"",'>Size</option>\n        <option value="type" ').concat("type"===t?"selected":"",">File Type</option>\n      </select>\n    </div>\n  ")}(i,o),"\n        ").concat(function(e){return e?'\n    <div class="content-manager__selection-actions" style="display: none;">\n      <span class="selection-count">0 selected</span>\n      <button class="action-button action-button--secondary" \n              data-action="download"\n              title="Download selected items">\n        Download\n      </button>\n      <button class="action-button action-button--secondary" \n              data-action="share"\n              title="Share selected items">\n        Share\n      </button>\n      <button class="action-button action-button--danger" \n              data-action="delete"\n              title="Delete selected items">\n        Delete\n      </button>\n    </div>\n  ':""}(r),'\n      </div>\n    </div>\n    \n    <div class="content-manager__search-section">\n      \x3c!-- Enhanced search will be rendered here --\x3e\n    </div>\n    \n    <div class="content-manager__content">\n      <div class="content-manager__content-header">\n        <div class="content-stats">\n          <span class="content-count">0 items</span>\n          <span class="separator">\u2022</span>\n          <span class="storage-usage">0 MB used</span>\n        </div>\n      </div>\n      \n      <div class="content-manager__results">\n        \x3c!-- Content results will be managed by search application --\x3e\n      </div>\n    </div>\n    \n    <div class="upload-progress" id="upload-progress">\n      \x3c!-- Upload progress will be rendered here --\x3e\n    </div>\n  ')}({title:h,description:u,showUpload:i,allowedFileTypes:r,currentView:m,sortBy:p,selectionMode:s}),e}async function L(){try{var e;const{EnhancedSearchApplicationFactory:a}=await Promise.resolve().then(function(){return Dt}),s=null===(e=S)||void 0===e?void 0:e.querySelector(".content-manager__search-section");if(!s)return;_=a({meilisearchUrl:n,apiBase:t,voiceEnabled:l,naturalLanguage:c,smartFilters:d,title:"",description:"",placeholder:'Search your content... Try "Find my presentation slides from last week"',onSearchResults:x,onContentSelection:M,onAnalytics:b,container:s}),_.render(),C&&C.setSearchApplication(_)}catch(a){console.error("Failed to initialize search application:",a),function(){var e;const t=null===(e=S)||void 0===e?void 0:e.querySelector(".content-manager__search-section");if(t){t.innerHTML='\n        <div class="basic-search">\n          <input type="search" placeholder="Basic search..." class="basic-search-input">\n          <button class="basic-search-button">Search</button>\n        </div>\n      ';const e=t.querySelector(".basic-search-input"),n=t.querySelector(".basic-search-button"),a=()=>{var t;(null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.trim())&&C&&C.loadContent()};null===n||void 0===n||n.addEventListener("click",a),null===e||void 0===e||e.addEventListener("keypress",e=>{"Enter"===e.key&&a()})}}()}}function x(e){var t;(C&&(C.setState({content:e.items||[]}),C.updateContentDisplay(),C.updateContentStats()),b)&&b({type:"search_results",resultCount:(null===(t=e.items)||void 0===t?void 0:t.length)||0,query:e.query,timestamp:Date.now()})}function M(e){C&&C.handleContentSelection(e.contentId,e.selected)}return E}const Wt={knowledgeBase:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Gt((0,a.A)({title:"Knowledge Base",description:"Manage your knowledge base content",allowedFileTypes:["pdf","doc","docx","txt","md"],naturalLanguage:!0,smartFilters:!0},e))},mediaLibrary:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Gt((0,a.A)({title:"Media Library",description:"Manage your media files",allowedFileTypes:["jpg","jpeg","png","gif","mp4","mp3","wav"],currentView:"grid"},e))},documentArchive:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Gt((0,a.A)({title:"Document Archive",description:"Manage archived documents",allowedFileTypes:["pdf","doc","docx","xls","xlsx","ppt","pptx"],sortBy:"date"},e))}};var Kt=Object.freeze({__proto__:null,ContentManagerApplicationFactory:Gt,ContentManagerTemplates:Wt,createBasicContentManager:function(e){return Gt(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).render(e)},default:Gt});new class{constructor(){this.layers={atoms:we,molecules:Ve,organisms:ut,applications:new Map},this.instances=new Map,this.registerApplications()}registerApplications(){this.layers.applications.set("enhanced-search",kt),this.layers.applications.set("content-manager",Gt)}create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const s=this.layers[e];if(!s)throw new Error("Unknown layer: ".concat(e));let i;if("applications"===e){const a=s.get(t);if(!a)throw new Error("Unknown ".concat(e," component type: ").concat(t));i=a(n)}else i=s.create(t,n,a);return a&&this.instances.set(a,{layer:e,type:t,instance:i}),i}getInstance(e){var t;return null===(t=this.instances.get(e))||void 0===t?void 0:t.instance}getLayerInstances(e){return Array.from(this.instances.values()).filter(t=>t.layer===e).map(e=>e.instance)}destroyInstance(e){const t=this.instances.get(e);t&&t.instance&&"function"===typeof t.instance.destroy&&t.instance.destroy(),this.instances.delete(e)}destroyAll(){this.instances.forEach((e,t)=>{this.destroyInstance(t)}),this.instances.clear()}getTypes(e){const t=this.layers[e];return t?"applications"===e?Array.from(t.keys()):t.getTypes():[]}};(new Date).toISOString()}}]);